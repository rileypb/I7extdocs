<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Extension</title>
    <style type="text/css">
        <!--
        :root {
            color-scheme: light dark;
            --element-banner-background-colour: #eeeeee;
            --heading-panel-background-colour: #eeeeee;
            --heading-panel-text-colour: #222222;
            --heading-panel-succeeded-background-colour: #E6FFE6;
            --heading-panel-failed-background-colour: #f69Ca6;

            --heading-row-background-colour: #e0e0e0;
            --stripe-one-background-colour: #ffffff;
            --stripe-two-background-colour: #f3f6fa;

            --index-dull-red-colour: #800000;
            --periodic-table-sidebar-colour: #888;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: white;
            --library-card-title-colour: #803030;
            --library-card-other-colour: #303030;
            --index-more-box-background-colour: #e0e0e0;
            --index-activity-contents-background-colour: #e8e0c0;
            --registry-contents-link-colour: #202020;

        }

        @media (prefers-color-scheme: dark) {
          :root {
            --element-banner-background-colour: #444444;
            --heading-panel-background-colour: #444444;
            --heading-panel-text-colour: #ffffff;
            --heading-panel-succeeded-background-colour: #738073;
            --heading-panel-failed-background-colour: #7b4e53;

            --heading-row-background-colour: #707070;
            --stripe-one-background-colour: #7f7f7f;
            --stripe-two-background-colour: #797b7d;

            --index-dull-red-colour: #c00000;
            --periodic-table-sidebar-colour: #555;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: black;
            --library-card-title-colour: #a05050;
            --library-card-other-colour: #505050;
            --index-more-box-background-colour: #444444;
            --index-activity-contents-background-colour: #727060;
            --registry-contents-link-colour: #ffffff;
            }
        }

        /* The default font (family) and size */

        body, p, td {
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 12px;
        }

        /* For fixed-point material within text, such as the typing on the Library Card index page */

        span.typewritten {
            font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;
            font-size: 13px;
        }

        /* For less important material: the small print */

        span.smaller {
            font-size: 80%;
        }

        /* The "heading panel" is the coloured box, high up on the page. The colours
        vary depending on the page: for example, the style on a report of a translation
        with no problems is "headingpanelsucceeded", usually green, but if there were
        problems then "headingpanelfailed" is used, which is usually red. "headingpanel"
        itself is a more neutral grey by default. "headingpanelDark" is an alternative
        look to make the extensions index pages have some visual contrast with the others;
        by default they are a darker grey. */

        .headingpanel {
            background: var(--heading-panel-background-colour);
        }
        .headingpanelsucceeded {
            background: var(--heading-panel-succeeded-background-colour);
        }
        .headingpanelfailed {
            background: var(--heading-panel-failed-background-colour);
        }
        .headingpanelalt {
            background: #808080;
        }

        /* Heading panels have two lines of text: an upper one in a larger size, and a
        lower one in a smaller. Again, the alt versions are meant to contrast.

            Report on Translation: Succeeded                <-- headingpaneltext
            Produced by Inform 10.1.0 (build 6U97)          <-- headingpanelrubric

            Installed Extensions                            <-- headingpaneltextalt
            Bundles of extra rules or phrases to...         <-- headingpanelrubricalt

        */

        span.headingpaneltext {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }
        span.headingpaneltextalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }

        span.headingpanelrubric {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }
        span.headingpanelrubricalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }

        /* Horizontal rule styling */

        div.hr {
            border: 0;
            width: 100%;
            color: #707070;
            background-color: #707070;
            height: 5px;
        }

        /* This styles the (usually white) text of the example numbers written inside
        oval blobs in the extension documentation, which mimic the look of the in-app
        documentation. */

        .oval, .oval td {
            background-image:url('../../../doc_images/ovoid.png');
            color:white;
        }

        /* Styling used in the extension documentation indexes: */

        /* Used for extension names in the extensions pane of the app */

        span.extensioncensusentry {
            color: #ffffff;
        }

        span.extensionindexentry {
            color: #404040;
        }

        span.extensionindexerror {
            color: #ff8080;
        }

        /* This is used in extension documentation, where an example is presented
        in a slightly tinted box: */

        table.extensionexample {
        	background-color: #f0f0f0;
        }

        span.extensionexampleletter {
        	color: #202020;
        	font-size: 14px;
        	font-weight: bold;
        }

        /* Seen in problem messages: */

        span.problemred {
            color: #800000;
        }

        span.problemgreen {
            color: #008000;
        }

        span.phraseword {
            color: #808080;
        }

        span.phrasetokentext {
            color: #e00060;
        }

        span.phrasetokendesctext {
            color: #4040ff;
        }

        span.phrasetokenvaluetext {
            color: #ff4040;
        }

        /* Now we move on to styling used in the Index pages only: */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebarcolour {
            background: var(--periodic-table-sidebar-colour);
        }
        div.periodictablesidebar:hover {
            background: var(--periodic-table-sidebar-hover-colour);
        }

        /* The text of the element-abbreviation, such as "Lx" or "Ph", uses: */

        span.elementtext {
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        span.elementnumbertext {
            color: #ffffff;
            font-size: 7pt;
        }

        /* For the text of the element title, to the right of the element box: */

        span.elementtitletext {
            color: #ffffff;
            font-size: 9px;
            font-weight: bold;
        }

        /* The banner at the top of each element: */

        table.elementbanner {
            background: var(--element-banner-background-colour);
        }

        /* For the typewriting on the Library Card: */

        span.librarycardtitle {
            color: var(--library-card-title-colour);
        }

        span.librarycardother {
            color: var(--library-card-other-colour);
        }

        /* Generically used for "more details" boxes in the index: */

        table.indexmorebox {
        	background-color: var(--index-more-box-background-colour);
            border-radius: 8px;
        }

        /* But not for activity contents: */

        table.indexactivitycontents {
        	background-color: var(--index-activity-contents-background-colour);
            border-radius: 8px;
        }

        /* For responses in index entries about rules: */

        span.indexresponseletter {
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace;
            background-color: #8080ff;
        }

        span.indexresponsetext {
            color: #000066;
        }

        /* Used ubiquitously throughout the index for unemphasised text: */

        span.indexblack {
        	color: #000000;
        }

        span.indexgrey {
        	color: #808080;
        }

        span.indexdarkgrey {
            color: #505050;
        }

        span.indexdullred {
            color: var(--index-dull-red-colour);
        }

        span.indexdullgreen {
            color: #008000;
        }

        span.indexdullblue {
            color: #000080;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used for the room squares in the World map in the Index (which is currently
        a table with one row of one column) */

        table.indexmaproom {
        	border-color: #000000;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used e.g. for title rows in the Chart of basic kinds in the Index */

        tr.headingrow {
        	background-color: var(--heading-row-background-colour);
        }

        /* Standard rows have black text on striped background colours, these being
        the usual ones seen in Mac OS X applications such as iTunes. */

        tr.stripeone {
        	background-color: var(--stripe-one-background-colour);
        }

        tr.stripetwo {
        	background-color: var(--stripe-two-background-colour);
        }

        tr.tintedrow {
        	background-color: #808080;
        }

        /* In the Figures index, this is the background colour used behind images
        (though in fact it will only be visible if the image fails to load, or uses
        transparency): */

        div.figureindexbox {
        	background-color: #6495ed;
        }

        /* To get the book-contents-page style leaders on the Contents element of
           the index to work, these must use the background colour of the body of
           the page, whatever that is: */

        ul.leaders li.leaded span:first-child {
            background: var(--leaders-background-colour);
        }
        ul.leaders li.leaded span + span {
            background: var(--leaders-background-colour);
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttontext {
        	font-size: 11px;
        	border-color: #000000;
        }

        span.registryminibuttontext {
        	font-size: 10px;
        	border-color: #000000;
        }

        span.registrybuttonuninstalled {
        	color: #000000;
        	background: #ffffdd;
        }

        span.registrybuttoninstalled {
        	color: #000000;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonbuiltin {
        	color: #888888;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonupdate {
        	color: #000000;
        	background: #aaddff;
        }

        span.registrybuttonrevert {
        	color: #000000;
        	background: #ddaaff;
        }

        span.registrybuttonrevealer {
        	color: #ffffff;
        	background: #444444;
        }

        /* Registry index section headings: */

        span.registrysectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        }
        span.registrysubsectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        }

        /* These are for the "mark" for a section, usually a section-symbol and number */

        span.registrysectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        	color: #666;
        }
        span.registrysubsectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        	color: #666;
        }

        /* Text of an item listed in a registry: */

        span.registryitemtext {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 12px;
        	line-height: 16px;
        }

        /* And how the links in a registry index page behave: */

        a.registrysilentlink {
        	text-decoration: none;
        	color: #000;
        }
        a.registrybuttonlink {
        	text-decoration: none;
        }
        a.registrycontentslink:link {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:visited {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:hover {
        	text-decoration: none;
        	color: #D00000;
        }
        a.registrycontentslink:active {
        	text-decoration: none;
        	color: #D00000;
        }

        -->
    </style>
    <style type="text/css">
        <!--
        /* (1) General layout material */

        *, *:before, *:after {
        	-moz-box-sizing: border-box;
        	-webkit-box-sizing: border-box;
        	box-sizing: border-box;
        }
        .headingpanellayout {
        	position: relative;
        	height: 56px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingpanellayoutdeeper {
        	position: relative;
        	height: 117px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingtext {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 10px 0px 10px;
        }
        .headingrubric {
        	position: absolute;
        	top: 36px;
        	width: 100%;
        	padding: 0px 10px 0px 10px;
        }
        h3.tighter {
        	margin-top: 0px;
        }
        p.hang {
        	padding-left: 25px;
        	text-indent: -25px;
        	margin-top: 0px;
        	margin-bottom: 0px;
        }
        p.in1 {
        	padding-left: 0px;
        }
        p.tightin1 {
        	padding-left: 0px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin1 {
        	padding-left: 0px;
        	margin-bottom: 2px;
        }
        p.hangingin1 {
        	padding-left: 50px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in2 {
        	padding-left: 25px;
        }
        p.tightin2 {
        	padding-left: 25px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin2 {
        	padding-left: 25px;
        	margin-bottom: 2px;
        }
        p.hangingin2 {
        	padding-left: 75px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in3 {
        	padding-left: 50px;
        }
        p.tightin3 {
        	padding-left: 50px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin3 {
        	padding-left: 50px;
        	margin-bottom: 2px;
        }
        p.hangingin3 {
        	padding-left: 100px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in4 {
        	padding-left: 75px;
        }
        p.tightin4 {
        	padding-left: 75px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin4 {
        	padding-left: 75px;
        	margin-bottom: 2px;
        }
        p.hangingin4 {
        	padding-left: 125px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in5 {
        	padding-left: 100px;
        }
        p.tightin5 {
        	padding-left: 100px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin5 {
        	padding-left: 100px;
        	margin-bottom: 2px;
        }
        p.hangingin5 {
        	padding-left: 150px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in6 {
        	padding-left: 125px;
        }
        p.tightin6 {
        	padding-left: 125px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin6 {
        	padding-left: 125px;
        	margin-bottom: 2px;
        }
        p.hangingin6 {
        	padding-left: 175px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in7 {
        	padding-left: 150px;
        }
        p.tightin7 {
        	padding-left: 150px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin7 {
        	padding-left: 150px;
        	margin-bottom: 2px;
        }
        p.hangingin7 {
        	padding-left: 200px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in8 {
        	padding-left: 175px;
        }
        p.tightin8 {
        	padding-left: 175px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin8 {
        	padding-left: 175px;
        	margin-bottom: 2px;
        }
        p.hangingin8 {
        	padding-left: 225px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in9 {
        	padding-left: 200px;
        }
        p.tightin9 {
        	padding-left: 200px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin9 {
        	padding-left: 200px;
        	margin-bottom: 2px;
        }
        p.hangingin9 {
        	padding-left: 250px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }

        /* (2) Index page layout material */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebar {
        	height: 56px;
        	width: 16px;
        }
        .periodictablesidebar a:link { text-decoration: none; }
        .periodictablesidebar a:visited { text-decoration: none; }
        .periodictablesidebar a:active { text-decoration: none; }

        /* The "element boxes" are the cells appearing in the periodic-table display
        on the welcome page of the index: */

        .elementbox {
        	position: relative;
        	height: 56px;
        	width: 56px;
        	padding: 0px;
        }

        .elementbox a:link { text-decoration: none; }
        .elementbox a:visited { text-decoration: none; }
        .elementbox a:active { text-decoration: none; }
        .elementbox a:hover { text-decoration: none; }
        .elementbox:hover {
        	opacity: 0.6;
        }

        /* The "small element boxes" look like those, but are smaller, and used on
        the headings of the content which those original boxes link to: */

        .smallelementbox {
        	position: relative;
        	height: 40px;
        	width: 40px;
        	padding: 0px;
        }

        .smallelementbox a:link { text-decoration: none; }
        .smallelementbox a:visited { text-decoration: none; }
        .smallelementbox a:active { text-decoration: none; }
        .smallelementbox a:hover { text-decoration: none; }
        .smallelementbox:hover {
        	opacity: 0.6;
        }

        /* This is a class for the links formed by the element boxes: */

        a.elementlink {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 0px 14px 1px;
        	text-align: center;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        div.elementnumber {
        	position: absolute;
        	top: 1px;
        	left: 3px;
        	text-align: left;
        }

        /* For the text of the element title, to the right of the element box: */

        div.elementtitle {
        	position: absolute;
        	top: 35px;
        	width: 100%;
        	text-align: center;
        }

        /* Used for the book-contents-page style leaders on the Contents element of
           the index: */

        ul.leaders {
        	padding: 0;
        	margin-top: 1px;
        	margin-bottom: 0;
        	overflow-x: hidden;
        	list-style: none}
        ul.leaders li.leaded:before {
        	float: left;
        	width: 0;
        	white-space: nowrap;
        	content:
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "}
        ul.leaders li.leaded span:first-child {
        	padding-right: 0.33em;
        }
        ul.leaders li.leaded span + span {
        	float: right;
        	padding-left: 0.33em;
        }
        li.indent1 span:first-child {
        	padding-left: 25px;
        }
        li.indent2 span:first-child {
        	padding-left: 50px;
        }
        li.indent3 span:first-child {
        	padding-left: 75px;
        }
        li.indent4 span:first-child {
        	padding-left: 100px;
        }
        li.indent5 span:first-child {
        	padding-left: 125px;
        }
        li.indent6 span:first-child {
        	padding-left: 150px;
        }
        li.indent7 span:first-child {
        	padding-left: 175px;
        }
        li.indent8 span:first-child {
        	padding-left: 200px;
        }
        li.indent9 span:first-child {
        	padding-left: 225px;
        }

        li.unleaded:before {
        	content: "";
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttons {
        	height: 20px;
        	padding: 2px 8px 2px 8px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 5px;
        }

        span.registryminibuttons {
        	height: 14px;
        	padding: 2px 5px 2px 5px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 4px;
        }

        /* Used to hide or display sections in the Registry pages: */

        div.registrysectionitemsopen {
        	display: block;
        }

        div.registrysectionitemsclosed {
        	display: none;
        }

        /* Hanging indentation for Registry item paragraphs: */

        p.registryitem {
        	padding-left: 80px;
        	text-indent: -40px;
        }

        p.registryaddition {
        	padding-left: 40px;
        	text-indent: -40px;
        }

        -->
    </style>
    <script type="text/javascript">
        function project() {
            return window.Project;
        }
        function showExtra(id, imid) {
        	if (document.getElementById(id).style.display == 'block') {
        		document.getElementById(id).style.display = 'none';
        		document.getElementById(imid).src = 'inform:/extra.png';
        	} else {
        		document.getElementById(id).style.display = 'block';
        		document.getElementById(imid).src = 'inform:/extraclose.png';
        	}
        }
        function openExtra(id, imid) {
        	document.getElementById(id).style.display = 'block';
        	document.getElementById(imid).src = 'inform:/extraclose.png';
        }
        function closeExtra(id, imid) {
        	document.getElementById(id).style.display = 'none';
        	document.getElementById(imid).src = 'inform:/extra.png';
        }
        function pasteCode(code) {
            var myProject = project();

            myProject.selectView('source');
            myProject.pasteCode(code);
        }

    </script>
</head>
<body>
    <!--CONTENT BEGINS-->
    <table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table>

    <p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Conversation Rules<span class="extensionindexentry"> by </span>Eric Eve</b></p>
    <p><span class="smaller">Version 7</span></p>
    <p>A way of controlling conversations using rules and tables. Also implements topic suggestions and Conversation nodes. Requires Plurality by Emily Short and Conversation Framework, Epistemology and List Control by Eric Eve.</p>
    <p></p>
    <hr>
    <p><span class="indexblack"><b><a style="text-decoration: none" href=#docsec1>Chapter 1: </b></span>THE BASICS<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec2>Chapter 2: </b></span>DEFAULT RESPONSES<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec3>Chapter 3: </b></span>CONTROLLING RESPONSE ACCESSIBILITY<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec4>Chapter 4: </b></span>COMBINING ASK AND TELL<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec5>Chapter 5: </b></span>CONVERSATION NODES<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec6>Chapter 6: </b></span>SAYING YES AND NO<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec7>Chapter 7: </b></span>SUGGESTED TOPICS<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec8>Chapter 8: </b></span>DISAMBIGUATION AND PRIMARY SUBJECTS<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec9>Chapter 9: </b></span>. OTHER FEATURES<br>
    <br>
    <b>Examples</b><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Conversation Rules-eg1.html#eg1">A &mdash; The Tribune's Report</span><br>
    </p>
    <hr>
    <p></p>
    </p>

    <p><p><span class="indexdullred"><b><span id=docsec1>Chapter 1: THE BASICS</span></b></span></p>
    </p>

    <p> Conversation Rules builds on Conversation Framework, List Control and Epistemology (which it uses, and which therefore must be present for it to use) to provide a sophisticated (and fairly complex) means of handling conversations of the ASK/TELL type. It can also suggest to the player which topics are available to be asked about and told about. Finally, it allows the use of Conversation Nodes -- points in a conversation when the player can types responses outside the normal ask/tell paradigm in reply to a question or comment by the NPC. (If this all sounds a bit like the TADS 3 conversation system, there is a reason for that; I originally developed this extension in the course of porting part of a TADS 3 game to Inform 7).</p>

    <p> The first point to bear in mind about Conversation Rules is that it supports asking and telling NPCs about things rather than topics; that is it uses the quizzing it about and informing it about actions defined in Conversation Framework (the documentation of which should also be consulted at this point if it is not already familiar), rather than the standard asking it about and telling it about actions that come with Inform 7. That doesn't mean that we can't use asking it about (a topic) and telling it about (a topic) with Conversation Rules; it's just that Conversation Rules provides no additional support for these actions. Instead, it provides support for quizzing and informing NPCs about things (which may include things or subjects -- for which see the Epistemology documentation -- used to represent abstract ideas like love, liberty or the rate of inflation).</p>

    <p> Within Conversation Rules each NPC's responses to being quizzed about or informed about something is controlled through a pair of tables we need to define for the purpose: the NPC's quizzing table and informing table. Thus we might define:</p>

    <p><blockquote><span class="indexdullblue"> Bob is a man. The quizzing table is The Table of Bob's Quizzes. The informing table is The Table of Bob's Informs.</span></blockquote>

    <p> We then need to supply these tables, which take the form:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Quizzes</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob himself rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 1</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> This will cause the bob himself rule to be invoked in response to the command ASK BOB ABOUT BOB or ASK BOB ABOUT HIMSELF. It will also cause 'you could ask Bob about himself' to be suggested as a possible topic of conversation with Bob, until we had actually asked him about himself for the first time. If we didn't want this to appear as a suggested topic we could put a 0 in the suggest column (or leave it blank). If we wanted it to be suggested more than once, we would put the number of times Bob could be asked about himself before this ceased to be suggested in the suggest column.</p>

    <p> Obviously, we also need to provide an appropriate bob himself rule, for example:</p>

    <p><blockquote><span class="indexdullblue"> This is the bob himself rule:<br>
     say &quot;'How are you today, Bob?' you enquire.<br>
    <br>
    'Fine, just fine,' he replies.&quot;</span></blockquote>

    <p> If Bob's responses varied according to circumstances, we could write a more complex rule, or else use a rulebook to decide Bob's response:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Quizzes</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Fred</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob fred rules</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 3</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> The bob fred rules is a rulebook.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> A bob fred rule when fred is unseen: say &quot;Who is Fred anyway?' you ask.<br>
    <br>
    'He's my cousin,' Bob tells you.&quot;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> A bob fred rule when fred is seen:<br>
     say &quot;'Fred looks quite ill, don't you think?' you remark.<br>
    <br>
    'Yes - he contracted Dutch Elm Disease last week,' Bob tells you.&quot;</span></blockquote>

    <p> A common situation is where we want an NPC to run through a list of responses, supplying a new one each time he is asked until the last is reached, or maybe supplying a random one drawn from a list of possible responses on each occasion. The extension List Control, which Conversation Rules uses, provides a mechanism for running through such a list, while Conversation Rule provides a means of getting the next response from such a list automatically, instead of of explicitly having to write a rule to do it. Just put the name of the table containing the list of responses in the appropriate response table column, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Quizzes</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Table of Bob Himself</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 3</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> Table of Bob Himself</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> response
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you today?' you ask.<br>
                <br>
                'Fine, just fine,' he assures you.&quot;
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'Are you sure you're all right, Bob?' you enquire, 'you look a bit off colour.'<br>
                <br>
                'I'm absolutely fine,' he insists.&quot;
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;Are you absolutely sure you're all right?' you ask.<br>
                <br>
                'How many times do I have to tell you?' he snaps, 'I'm completely all right!'&quot;</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> Table of Table Types (continued)</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> tabname</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> index</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> tabtype
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Table of Bob Himself</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 0</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> stop-list</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> See the List Control documentation for an explanation of how the above two tables work. It is, by the way, perfectly legal to include both a rule and table name in the same row, in which case the rule will be executed before the next response from the table is shown. This may be useful if, say, we want quizzing someone about something to have a side effect in addition to the display of a conversational exchange.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec2>Chapter 2: DEFAULT RESPONSES</span></b></span></p>
    </p>

    <p> We next need a means of having our NPC respond to things we haven't explicitly provided for. Two rules are provided for this, the NPC's unknown quizzing rule and the NPC's unknown informing rule, which by default are set to the no response rule (which in turn simply says that there's no response). To customize this, we need to change these rules to something different; e.g.</p>

    <p><blockquote><span class="indexdullblue"> The unknown quizzing rule of Bob is the Bob no quiz rule. The unknown informing rule of Bob is the Bob no inform rule.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> This is the Bob no quiz rule: say &quot;Bob scratches his head and looks puzzled by your question.&quot;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> This is the Bob no inform rule: say &quot;Bob listens to what you have to say, but merely grunts in reply.&quot;</span></blockquote>

    <p> Of course, these rules could be more elaborate; we might, for example, want Bob's response to be a random response from a selection of defaults:</p>

    <p><blockquote><span class="indexdullblue"> This is the Bob no quiz rule: show the next response from the Table of Bob's Default Quiz Responses.</span></blockquote>

    <p> Obviously, we'd then need to define this table (again see the List Control documentation).</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec3>Chapter 3: CONTROLLING RESPONSE ACCESSIBILITY</span></b></span></p>
    </p>

    <p> A further sophistication is that Conversation Rules makes use of the Epistemology extension, which keeps track of which objects the player knows about. If the player asks an NPC about a thing the player character does not (yet) know about, the default response will be used even if a custom response has been supplied (in the relevant table) for that object. This prevents the player stumbling on something prematurely, or getting a response that presupposes something the player character does not know about (i.e. a thing which is still unfamiliar and unseen, as defined by the Epistemology extension). For example, suppose the PC doesn't know that Bob has a cousin called Fred until Bob mentions the fact in conversation; we could write:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Quizzes</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Table of Bob Himself</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 2
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> fred</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob-fred rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 1</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> Table of Bob Himself</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> response
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you today, Bob?' you ask.<br>
                <br>
                'Better than my cousin Fred, at any rate.' he mutters[reveal Fred].&quot;
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you doing?' you wonder.
                'Oh I'm doing fine, just fine,' he assures you.&quot;</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> This is the bob-fred rule:<br>
     say &quot;'What's the matter with your cousin Fred?' you ask.<br>
    <br>
    'He's suffering an acute attack of Dutch Elm Disease,' he tells you.&quot;</span></blockquote>

    <p> Now if we type ASK BOB ABOUT FRED before asking Bob about himself for the first time, we'll only get Bob's default response. The special tag &quot;[reveal Fred]&quot; changes Fred from unfamiliar to familiar (it's a to say rule that doesn't actually say anything), so that we can ask Bob (or anyone else) about Fred thereafter. Note that the 'To reveal X' rule is built into the Conversation Rules extension; it's not something we need to supply in our game code.</p>

    <p> This mechanism is fine for stopping the player character talking about things that aren't yet known to him or her, but there may be other reasons why we want to make a response temoparily unreachable, e.g because the NPC doesn't know about it yet, or it doesn't make sense to talk about it with this particular NPC until something else has been said. One way to deal with this situation would be to test for the appropriate condition (s) in the relevant response rule, but this may not always be convenient, particularly if we are using a response table to provide the response. Another method we can use is to set the value in the suggest to -1, which makes the topic unavailable (and, of course, not suggested) until the suggest value is changed to something else. Just as we can use &quot;[reveal Fred]&quot; to change Fred to familiar, so we can use &quot;[quiz x to n]&quot; or &quot;[inform x to n]&quot; to change the suggest column corresponding to x to n in the quizzing table or informing table of the current interlocutor (the NPC we're current talking to). So, for example, if it's possible that the player character already knows of the existence of Fred, but we don't want him asking Bob about Fred until Bob has mentioned Fred, we could change the above example to:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Quizzes</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Table of Bob Himself</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 2
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> fred</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> bob-fred rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> --</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> -1</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><blockquote><span class="indexdullblue"> Table of Bob Himself</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> response
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you today, Bob?' you ask.<br>
                <br>
                'Better than my cousin Fred, at any rate.' he mutters[quiz Fred to 1].&quot;
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you doing?' you wonder.
                'Oh I'm doing fine, just fine,' he assures you.&quot;</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec4>Chapter 4: COMBINING ASK AND TELL</span></b></span></p>
    </p>

    <p> Sometimes we want ASK FOO ABOUT BAR to give the same response as TELL FOO ABOUT BAR. If this is always the case for every NPC we can simply write:</p>

    <p><blockquote><span class="indexdullblue"> Instead of informing someone about something, try quizzing the noun about the second noun.</span></blockquote>

    <p> We can do something similar if we want this to apply only to a particular NPC:</p>

    <p><blockquote><span class="indexdullblue"> Instead of informing Bob about something, try quizzing Bob about the second noun.</span></blockquote>

    <p> Sometimes, however, we may want ASK and TELL to be equivalent only for certain topics. We could cope for this by writing a series of Instead rules:</p>

    <p><blockquote><span class="indexdullblue"> Instead of informing Bob about Fred, try asking Bob about Fred.<br>
     Instead of informing Bob about the lighthouse, try asking Bob about the lighthouse.</span></blockquote>

    <p> But this could become a bit tedious and long-winded if we have quite a few topics to redirect like this. An alternative is to use the supplied quiz-inform and inform-quiz rules within the apprropriate table to redirect quizzing to informing or informing to quizzing, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob's Informs</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> subject</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> response table</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> suggest
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> fred</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> inform-quiz rule</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> a table-name</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 0
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> lighthouse</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> inform-quiz rule</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> It may seem that we could simply have written &quot;bob-fred rule&quot; in the response column to get the same effect, since the same rule would be triggered whether we ASK BOB ABOUT FRED or TELL BOB ABOUT FRED. The problem is that we'd then have to worry about keeping the values in the suggest columns of both tables in sync, and this is a complication best avoided.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec5>Chapter 5: CONVERSATION NODES</span></b></span></p>
    </p>

    <p> There may come a point in a conversation when an NPC asks a question or makes a statement to which ASK BOB ABOUT X or TELL BOB ABOUT X would be a clumsy response at best. It may be that a simple yes or no would be better, or it may be that a more elaborate reply is called for. For this type of situation we can use a Conversation Node. Suppose, for example, that Bob asks a question to which the possible answers are YES, NO and I DON'T KNOW. Perhaps the question was &quot;Have you met my cousin Fred?&quot;, so we might call our conversation node the bob-fred node:</p>

    <p><blockquote><span class="indexdullblue"> The bob-fred node is a Conversation Node.</span></blockquote>

    <p> Next we need to have some means of letting the player know what responses are possible while we're in this node. For this purpose we can set the Conversation Node's suggestions property:</p>

    <p><blockquote><span class="indexdullblue"> The bob-fred node is a Conversation Node. The suggestions is &quot;say yes or no, or say that you don't know&quot;</span></blockquote>

    <p> The rule here is that the text in the suggestions property is something that can reasonably follow &quot;You could&quot;. In the above example the player would see a prompt like &quot;(You could say yes or no, or say that you don't know.&quot;). A further refinement is that a Conversation Node can be limited (the default) or unlimited. If the Conversation Node is limited then the suggestions in its suggestions property are the only suggested conversation topics that will be shown. If it is unlimited then all the other topics currently available for suggestion (i.e. all the quizzing and informing topics with a suggest entry greater than 0 in the appropriate table) will be listed too.</p>

    <p> We still need a means for the Conversation Node to respond to the player's special response (in this case yes, no, or don't know). To do this we need to give the Conversation Node a node rule (which in practice will usually be a rulebook):</p>

    <p><blockquote><span class="indexdullblue"> The bob-fred-node rules is a rulebook.<br>
     The node rule of the bob-fred node is the bob-fred-node rules.</span></blockquote>

    <p> Then we need to define the appropriate rules for handling the player's possible responses. We'll start by handling the straightforward YES and NO responses:</p>

    <p><blockquote><span class="indexdullblue"> A bob-fred-node rule when saying yes:<br>
     say &quot;'Yes, I ran into him the other day,' you say.<br>
    <br>
    'In that case you know he's not very well.' Bob replies[convnode null-node].&quot;; rule suceeds.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> A bob-fred-node-rule when saying no:<br>
     say &quot;'No, I didn't even know you had a cousin called Fred,' you reply.<br>
    <br>
    'Unless he recovers soon, I probably won't for much longer,' he replies darkly[convnode null-node].&quot;;<br>
     rule suceeds.</span></blockquote>

    <p> These rules will handle YES or NO or BOB, YES or BOB, NO or SAY YES TO BOB or SAY NO TO BOB (since Conversation Framework, included by Conversation Rules) takes care of converting the other forms to YES and NO respectively). Note that we need to end each rule with &quot;rule succeeds&quot; to prevent fall through to the normal conversation processing (unless, of course, we want to allow this). Not also the &quot;[convnode null-node]&quot;, which is used to reset the current conversation node to nothing once we are done with it (this will be explained further below).</p>

    <p> Next, we may want a special rule to make Bob insist on an answer if we don't give him one:</p>

    <p><blockquote><span class="indexdullblue"> The last bob-fred-node rule:<br>
     say &quot;'I asked you if you'd met my cousin Fred,' Bob reminds you.&quot;; rule succeeds.</span></blockquote>

    <p> Here we don't include &quot;[convnode null-node]&quot;, since we want the current node to remain active when Bob doesn't get a satisfactory reply. If we were instead happy for Bob's question to be ignored (say by the player asking about something else) we'd instead write:</p>

    <p><blockquote><span class="indexdullblue"> The last bob-fred-node rule:<br>
     Change the current convnode to the null-node;</span></blockquote>

    <p> This resets the current convnode so that the bob-fred-node rule doesn't stay current once the player has ignored the question that triggered it; we also make sure that this rule doesn't succeed so that we can go on to the ordinary handling of the topic asked about.</p>

    <p> This still leaves the question of how we respond to I DON'T KNOW. This is a bit trickier; the first part of the trick is to think of all the ways the player might signal I DON'T KNOW and then wrap them up in an Understand statement:</p>

    <p><blockquote><span class="indexdullblue"> Understand &quot;you don't/dont know&quot; or &quot;i don't/dont know&quot; or &quot;don't know&quot; or &quot;dont know&quot; as &quot;[dont know]&quot;.</span></blockquote>

    <p> Next we have to make these responses understood as a special action, but only when this conversation node is active. A special wierdly-named Xspcing action (most unlikely to clash with anything else) is provided for the purpose. In this case we'd use it thus:</p>

    <p><blockquote><span class="indexdullblue"> Understand &quot;[dont know]&quot; as Xspcing when the current convnode is the bob-fred node.</span></blockquote>

    <p> Then we provide a bob-fred-node rule to respond to this input:</p>

    <p><blockquote><span class="indexdullblue"> A bob-fred-node rule when Xspcing:<br>
     if the player's response matches &quot;[dont know]&quot; begin;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[dont know fred].&quot;;<br>
     rule succeeds;<br>
     end if.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> A bob-fred-node rule when answering and the topic understood matches &quot;[dont know]&quot;:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[dont know fred].&quot;;<br>
     rule succeeds;</span></blockquote>

    <p><blockquote><span class="indexdullblue"> To say dont know fred:<br>
     say &quot;'I have met someone called Fred, but I don't know whether he's your cousin,' you reply.
    'He's a tall, thin, bald man with a limp,' Bob tells you, 'anyway -- he's also very sick[convnode null-node].'&quot;</span></blockquote>

    <p> Note that in this case we need the 'when answering' rule to cover the possibility that the player types SAY I DON'T KNOW or the like.</p>

    <p> Finally, we need some way to trigger the conversation node. At root, the way to activate a Conversation Node is to make it the current convnode, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Change the current convnode to the bob-fred node.</span></blockquote>

    <p> More normally, though, we'd use a &quot;[convnode whatevernode]&quot; tag inside a text string, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Table of Bob Himself</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> response
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you today, Bob?' you ask.<br>
                <br>
                'Better than my cousin Fred, at any rate.' he mutters, 'Have you met him?'[quiz Fred to 1][convnode bob-fred node]&quot;
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> &quot;'How are you doing?' you wonder.
                'Oh I'm doing fine, just fine,' he assures you.&quot;</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> Not only does &quot;[convnode whatevernode]&quot; change the current convnode from within a text string, it also causes the topics associated with the node to be suggested so that the player can see what responses are available.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec6>Chapter 6: SAYING YES AND NO</span></b></span></p>
    </p>

    <p> As mentioned above, Conversation Framework (included by Conversation Rules) takes care of directing the commands WHOEVER, YES and SAY YES TO WHOEVER to a simple YES command (and likewise with NO). In addition commands like FRED, YES or SAY YES TO FRED will trigger an implicit greeting of Fred (for which see the Conversation Framework documentation) if Fred is not already the current interlocutor (actually, most of the work for this is now carried oun by Conversation Framework).</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec7>Chapter 7: SUGGESTED TOPICS</span></b></span></p>
    </p>

    <p> As noted under section 1 above, Conversation Rules provides a mechanism for showing the player a list of things s/he can ask or tell the current interlocutor about. As already explained, this is managed by entering a number (greater than zero) in the suggest column against the appropriate item in the appropriate table. This number is reduced by one each time the subject is asked about (or told about, as the case may be) until it reaches zero. The number should therefore start at the number of times you want the suggestion to remain active.</p>

    <p> Whether the suggestion appears as a suggested tell topic (&quot;You could tell Bob about Fred&quot;) or a suggested ask topic (&quot;You could ask Bob about Fred&quot;) depends on whether it appears in the NPC's informing table or its quizzing table (again, as described above).</p>

    <p> By default, a list of suggested topics is displayed:</p>

    <p> 1) In response to an explicit TOPICS command typed by the player; and</p>

    <p> 2) When a Conversation Node is entered via a &quot;[convnode whatevernode]&quot; tag in a text string, and the Conversation Node in question has a suggestions property that is not &quot;blank&quot;.</p>

    <p> It may be that we would also like to see a list of suggested topics displayed in response to an explict greeting (such as TALK TO BOB, or BOB, HELLO). To do this we need to dd something like (assuming we have elsewhere defined a Table of Bob's Greetings):</p>

    <p><blockquote><span class="indexdullblue"> After saying hello to Bob:<br>
     show the next response from the Table of Bob's Greetings;<br>
     if the greeting type is explicit then consider the standard list suggested topics rule.</span></blockquote>

    <p> Note that in this case it is preferable to use 'consider the standard list suggested topics rule' rather than 'try requesting suggested topics', since if the latter is used the turn count will not be advance (requesting suggested topics is an action out of world, since it seems reasonable that it shouldn't consume any game time).</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec8>Chapter 8: DISAMBIGUATION AND PRIMARY SUBJECTS</span></b></span></p>
    </p>

    <p> Since quizzing about and informing about are actions that potentially apply to all objects defined in our game, there is a danger that trying to converse with someone about something may result in an ungainly disambiguation prompt:</p>

    <p> &gt;ASK JIM ABOUT BALL</p>

    <p> Which do you mean, the red rubber ball, the ball gown, the masked ball or the ball bearing?</p>

    <p> Conversation Rules takes care of this to some extent by preferring subjects that are known about to those that aren't in such contexts, which may help cut down the list (and avoid revealing the existence of something the player isn't meant to know about yet), but this may not be enough to avoid all instances of ungainly disambiguation, especially in the later stages of a game when most things are known about. Conversation Rules offers partial relief in the form of the primary/secondary condition applied to all objects. Other things being equal, Conversation Rules will pick a primary thing in preference to a secondary thing in a context such as this (provided the primary thing is known). So, for example, if we want all conversational references to BALL, not otherwise qualified, to refer to the masked ball, then we could define:</p>

    <p><blockquote><span class="indexdullblue"> The masked ball is a primary subject.</span></blockquote>

    <p> The problem is, the masked ball is then the primary meaning of 'ball' for all interlocutors in the game. If little Billy is more likely to be more interested in his red rubber ball, we should have to supply special grammar lines for this particular exception:</p>

    <p><blockquote><span class="indexdullblue"> Understand &quot;ask [billy] about [red subber ball]&quot; as quizzing it about.<br>
     Understand &quot;a [red rubber ball]&quot; as quizzing it about when the default interlocutor is Billy.</span></blockquote>

    <p> But it could become quite cumbersome to do this for a lot of subject/interlocutor combinations.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec9>Chapter 9: . OTHER FEATURES</span></b></span></p>
    </p>

    <p> Note that Conversation Rules is fully compatible with the greeting protocols defined in Conversation Framework (for which consult the Conversation Framework documentation). To take full advantage of this it may be necessary to write rules for saying hello and goodbye to particular NPCs in addition to the various types of conversation rule described above.</p>

    <p> Conversation Rules is also compatible with the abbreviated conversation commands A THIS or T THAT implemented in Conversation Framework.</p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg1><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">A</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">The Tribune's Report</span></b><br>
                <p>A Sample Conversation</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p>
    <!--CONTENT ENDS-->
</body>
</html>
