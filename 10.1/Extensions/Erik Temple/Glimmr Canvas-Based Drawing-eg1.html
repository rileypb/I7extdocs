<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Extension</title>
    <style type="text/css">
        <!--
        :root {
            color-scheme: light dark;
            --element-banner-background-colour: #eeeeee;
            --heading-panel-background-colour: #eeeeee;
            --heading-panel-text-colour: #222222;
            --heading-panel-succeeded-background-colour: #E6FFE6;
            --heading-panel-failed-background-colour: #f69Ca6;

            --heading-row-background-colour: #e0e0e0;
            --stripe-one-background-colour: #ffffff;
            --stripe-two-background-colour: #f3f6fa;

            --index-dull-red-colour: #800000;
            --periodic-table-sidebar-colour: #888;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: white;
            --library-card-title-colour: #803030;
            --library-card-other-colour: #303030;
            --index-more-box-background-colour: #e0e0e0;
            --index-activity-contents-background-colour: #e8e0c0;
            --registry-contents-link-colour: #202020;

        }

        @media (prefers-color-scheme: dark) {
          :root {
            --element-banner-background-colour: #444444;
            --heading-panel-background-colour: #444444;
            --heading-panel-text-colour: #ffffff;
            --heading-panel-succeeded-background-colour: #738073;
            --heading-panel-failed-background-colour: #7b4e53;

            --heading-row-background-colour: #707070;
            --stripe-one-background-colour: #7f7f7f;
            --stripe-two-background-colour: #797b7d;

            --index-dull-red-colour: #c00000;
            --periodic-table-sidebar-colour: #555;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: black;
            --library-card-title-colour: #a05050;
            --library-card-other-colour: #505050;
            --index-more-box-background-colour: #444444;
            --index-activity-contents-background-colour: #727060;
            --registry-contents-link-colour: #ffffff;
            }
        }

        /* The default font (family) and size */

        body, p, td {
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 12px;
        }

        /* For fixed-point material within text, such as the typing on the Library Card index page */

        span.typewritten {
            font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;
            font-size: 13px;
        }

        /* For less important material: the small print */

        span.smaller {
            font-size: 80%;
        }

        /* The "heading panel" is the coloured box, high up on the page. The colours
        vary depending on the page: for example, the style on a report of a translation
        with no problems is "headingpanelsucceeded", usually green, but if there were
        problems then "headingpanelfailed" is used, which is usually red. "headingpanel"
        itself is a more neutral grey by default. "headingpanelDark" is an alternative
        look to make the extensions index pages have some visual contrast with the others;
        by default they are a darker grey. */

        .headingpanel {
            background: var(--heading-panel-background-colour);
        }
        .headingpanelsucceeded {
            background: var(--heading-panel-succeeded-background-colour);
        }
        .headingpanelfailed {
            background: var(--heading-panel-failed-background-colour);
        }
        .headingpanelalt {
            background: #808080;
        }

        /* Heading panels have two lines of text: an upper one in a larger size, and a
        lower one in a smaller. Again, the alt versions are meant to contrast.

            Report on Translation: Succeeded                <-- headingpaneltext
            Produced by Inform 10.1.0 (build 6U97)          <-- headingpanelrubric

            Installed Extensions                            <-- headingpaneltextalt
            Bundles of extra rules or phrases to...         <-- headingpanelrubricalt

        */

        span.headingpaneltext {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }
        span.headingpaneltextalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }

        span.headingpanelrubric {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }
        span.headingpanelrubricalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }

        /* Horizontal rule styling */

        div.hr {
            border: 0;
            width: 100%;
            color: #707070;
            background-color: #707070;
            height: 5px;
        }

        /* This styles the (usually white) text of the example numbers written inside
        oval blobs in the extension documentation, which mimic the look of the in-app
        documentation. */

        .oval, .oval td {
            background-image:url('../../../doc_images/ovoid.png');
            color:white;
        }

        /* Styling used in the extension documentation indexes: */

        /* Used for extension names in the extensions pane of the app */

        span.extensioncensusentry {
            color: #ffffff;
        }

        span.extensionindexentry {
            color: #404040;
        }

        span.extensionindexerror {
            color: #ff8080;
        }

        /* This is used in extension documentation, where an example is presented
        in a slightly tinted box: */

        table.extensionexample {
        	background-color: #f0f0f0;
        }

        span.extensionexampleletter {
        	color: #202020;
        	font-size: 14px;
        	font-weight: bold;
        }

        /* Seen in problem messages: */

        span.problemred {
            color: #800000;
        }

        span.problemgreen {
            color: #008000;
        }

        span.phraseword {
            color: #808080;
        }

        span.phrasetokentext {
            color: #e00060;
        }

        span.phrasetokendesctext {
            color: #4040ff;
        }

        span.phrasetokenvaluetext {
            color: #ff4040;
        }

        /* Now we move on to styling used in the Index pages only: */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebarcolour {
            background: var(--periodic-table-sidebar-colour);
        }
        div.periodictablesidebar:hover {
            background: var(--periodic-table-sidebar-hover-colour);
        }

        /* The text of the element-abbreviation, such as "Lx" or "Ph", uses: */

        span.elementtext {
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        span.elementnumbertext {
            color: #ffffff;
            font-size: 7pt;
        }

        /* For the text of the element title, to the right of the element box: */

        span.elementtitletext {
            color: #ffffff;
            font-size: 9px;
            font-weight: bold;
        }

        /* The banner at the top of each element: */

        table.elementbanner {
            background: var(--element-banner-background-colour);
        }

        /* For the typewriting on the Library Card: */

        span.librarycardtitle {
            color: var(--library-card-title-colour);
        }

        span.librarycardother {
            color: var(--library-card-other-colour);
        }

        /* Generically used for "more details" boxes in the index: */

        table.indexmorebox {
        	background-color: var(--index-more-box-background-colour);
            border-radius: 8px;
        }

        /* But not for activity contents: */

        table.indexactivitycontents {
        	background-color: var(--index-activity-contents-background-colour);
            border-radius: 8px;
        }

        /* For responses in index entries about rules: */

        span.indexresponseletter {
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace;
            background-color: #8080ff;
        }

        span.indexresponsetext {
            color: #000066;
        }

        /* Used ubiquitously throughout the index for unemphasised text: */

        span.indexblack {
        	color: #000000;
        }

        span.indexgrey {
        	color: #808080;
        }

        span.indexdarkgrey {
            color: #505050;
        }

        span.indexdullred {
            color: var(--index-dull-red-colour);
        }

        span.indexdullgreen {
            color: #008000;
        }

        span.indexdullblue {
            color: #000080;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used for the room squares in the World map in the Index (which is currently
        a table with one row of one column) */

        table.indexmaproom {
        	border-color: #000000;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used e.g. for title rows in the Chart of basic kinds in the Index */

        tr.headingrow {
        	background-color: var(--heading-row-background-colour);
        }

        /* Standard rows have black text on striped background colours, these being
        the usual ones seen in Mac OS X applications such as iTunes. */

        tr.stripeone {
        	background-color: var(--stripe-one-background-colour);
        }

        tr.stripetwo {
        	background-color: var(--stripe-two-background-colour);
        }

        tr.tintedrow {
        	background-color: #808080;
        }

        /* In the Figures index, this is the background colour used behind images
        (though in fact it will only be visible if the image fails to load, or uses
        transparency): */

        div.figureindexbox {
        	background-color: #6495ed;
        }

        /* To get the book-contents-page style leaders on the Contents element of
           the index to work, these must use the background colour of the body of
           the page, whatever that is: */

        ul.leaders li.leaded span:first-child {
            background: var(--leaders-background-colour);
        }
        ul.leaders li.leaded span + span {
            background: var(--leaders-background-colour);
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttontext {
        	font-size: 11px;
        	border-color: #000000;
        }

        span.registryminibuttontext {
        	font-size: 10px;
        	border-color: #000000;
        }

        span.registrybuttonuninstalled {
        	color: #000000;
        	background: #ffffdd;
        }

        span.registrybuttoninstalled {
        	color: #000000;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonbuiltin {
        	color: #888888;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonupdate {
        	color: #000000;
        	background: #aaddff;
        }

        span.registrybuttonrevert {
        	color: #000000;
        	background: #ddaaff;
        }

        span.registrybuttonrevealer {
        	color: #ffffff;
        	background: #444444;
        }

        /* Registry index section headings: */

        span.registrysectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        }
        span.registrysubsectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        }

        /* These are for the "mark" for a section, usually a section-symbol and number */

        span.registrysectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        	color: #666;
        }
        span.registrysubsectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        	color: #666;
        }

        /* Text of an item listed in a registry: */

        span.registryitemtext {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 12px;
        	line-height: 16px;
        }

        /* And how the links in a registry index page behave: */

        a.registrysilentlink {
        	text-decoration: none;
        	color: #000;
        }
        a.registrybuttonlink {
        	text-decoration: none;
        }
        a.registrycontentslink:link {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:visited {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:hover {
        	text-decoration: none;
        	color: #D00000;
        }
        a.registrycontentslink:active {
        	text-decoration: none;
        	color: #D00000;
        }

        -->
    </style>
    <style type="text/css">
        <!--
        /* (1) General layout material */

        *, *:before, *:after {
        	-moz-box-sizing: border-box;
        	-webkit-box-sizing: border-box;
        	box-sizing: border-box;
        }
        .headingpanellayout {
        	position: relative;
        	height: 56px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingpanellayoutdeeper {
        	position: relative;
        	height: 117px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingtext {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 10px 0px 10px;
        }
        .headingrubric {
        	position: absolute;
        	top: 36px;
        	width: 100%;
        	padding: 0px 10px 0px 10px;
        }
        h3.tighter {
        	margin-top: 0px;
        }
        p.hang {
        	padding-left: 25px;
        	text-indent: -25px;
        	margin-top: 0px;
        	margin-bottom: 0px;
        }
        p.in1 {
        	padding-left: 0px;
        }
        p.tightin1 {
        	padding-left: 0px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin1 {
        	padding-left: 0px;
        	margin-bottom: 2px;
        }
        p.hangingin1 {
        	padding-left: 50px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in2 {
        	padding-left: 25px;
        }
        p.tightin2 {
        	padding-left: 25px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin2 {
        	padding-left: 25px;
        	margin-bottom: 2px;
        }
        p.hangingin2 {
        	padding-left: 75px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in3 {
        	padding-left: 50px;
        }
        p.tightin3 {
        	padding-left: 50px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin3 {
        	padding-left: 50px;
        	margin-bottom: 2px;
        }
        p.hangingin3 {
        	padding-left: 100px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in4 {
        	padding-left: 75px;
        }
        p.tightin4 {
        	padding-left: 75px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin4 {
        	padding-left: 75px;
        	margin-bottom: 2px;
        }
        p.hangingin4 {
        	padding-left: 125px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in5 {
        	padding-left: 100px;
        }
        p.tightin5 {
        	padding-left: 100px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin5 {
        	padding-left: 100px;
        	margin-bottom: 2px;
        }
        p.hangingin5 {
        	padding-left: 150px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in6 {
        	padding-left: 125px;
        }
        p.tightin6 {
        	padding-left: 125px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin6 {
        	padding-left: 125px;
        	margin-bottom: 2px;
        }
        p.hangingin6 {
        	padding-left: 175px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in7 {
        	padding-left: 150px;
        }
        p.tightin7 {
        	padding-left: 150px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin7 {
        	padding-left: 150px;
        	margin-bottom: 2px;
        }
        p.hangingin7 {
        	padding-left: 200px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in8 {
        	padding-left: 175px;
        }
        p.tightin8 {
        	padding-left: 175px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin8 {
        	padding-left: 175px;
        	margin-bottom: 2px;
        }
        p.hangingin8 {
        	padding-left: 225px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in9 {
        	padding-left: 200px;
        }
        p.tightin9 {
        	padding-left: 200px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin9 {
        	padding-left: 200px;
        	margin-bottom: 2px;
        }
        p.hangingin9 {
        	padding-left: 250px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }

        /* (2) Index page layout material */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebar {
        	height: 56px;
        	width: 16px;
        }
        .periodictablesidebar a:link { text-decoration: none; }
        .periodictablesidebar a:visited { text-decoration: none; }
        .periodictablesidebar a:active { text-decoration: none; }

        /* The "element boxes" are the cells appearing in the periodic-table display
        on the welcome page of the index: */

        .elementbox {
        	position: relative;
        	height: 56px;
        	width: 56px;
        	padding: 0px;
        }

        .elementbox a:link { text-decoration: none; }
        .elementbox a:visited { text-decoration: none; }
        .elementbox a:active { text-decoration: none; }
        .elementbox a:hover { text-decoration: none; }
        .elementbox:hover {
        	opacity: 0.6;
        }

        /* The "small element boxes" look like those, but are smaller, and used on
        the headings of the content which those original boxes link to: */

        .smallelementbox {
        	position: relative;
        	height: 40px;
        	width: 40px;
        	padding: 0px;
        }

        .smallelementbox a:link { text-decoration: none; }
        .smallelementbox a:visited { text-decoration: none; }
        .smallelementbox a:active { text-decoration: none; }
        .smallelementbox a:hover { text-decoration: none; }
        .smallelementbox:hover {
        	opacity: 0.6;
        }

        /* This is a class for the links formed by the element boxes: */

        a.elementlink {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 0px 14px 1px;
        	text-align: center;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        div.elementnumber {
        	position: absolute;
        	top: 1px;
        	left: 3px;
        	text-align: left;
        }

        /* For the text of the element title, to the right of the element box: */

        div.elementtitle {
        	position: absolute;
        	top: 35px;
        	width: 100%;
        	text-align: center;
        }

        /* Used for the book-contents-page style leaders on the Contents element of
           the index: */

        ul.leaders {
        	padding: 0;
        	margin-top: 1px;
        	margin-bottom: 0;
        	overflow-x: hidden;
        	list-style: none}
        ul.leaders li.leaded:before {
        	float: left;
        	width: 0;
        	white-space: nowrap;
        	content:
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "}
        ul.leaders li.leaded span:first-child {
        	padding-right: 0.33em;
        }
        ul.leaders li.leaded span + span {
        	float: right;
        	padding-left: 0.33em;
        }
        li.indent1 span:first-child {
        	padding-left: 25px;
        }
        li.indent2 span:first-child {
        	padding-left: 50px;
        }
        li.indent3 span:first-child {
        	padding-left: 75px;
        }
        li.indent4 span:first-child {
        	padding-left: 100px;
        }
        li.indent5 span:first-child {
        	padding-left: 125px;
        }
        li.indent6 span:first-child {
        	padding-left: 150px;
        }
        li.indent7 span:first-child {
        	padding-left: 175px;
        }
        li.indent8 span:first-child {
        	padding-left: 200px;
        }
        li.indent9 span:first-child {
        	padding-left: 225px;
        }

        li.unleaded:before {
        	content: "";
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttons {
        	height: 20px;
        	padding: 2px 8px 2px 8px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 5px;
        }

        span.registryminibuttons {
        	height: 14px;
        	padding: 2px 5px 2px 5px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 4px;
        }

        /* Used to hide or display sections in the Registry pages: */

        div.registrysectionitemsopen {
        	display: block;
        }

        div.registrysectionitemsclosed {
        	display: none;
        }

        /* Hanging indentation for Registry item paragraphs: */

        p.registryitem {
        	padding-left: 80px;
        	text-indent: -40px;
        }

        p.registryaddition {
        	padding-left: 40px;
        	text-indent: -40px;
        }

        -->
    </style>
    <script type="text/javascript">
        function project() {
            return window.Project;
        }
        function showExtra(id, imid) {
        	if (document.getElementById(id).style.display == 'block') {
        		document.getElementById(id).style.display = 'none';
        		document.getElementById(imid).src = 'inform:/extra.png';
        	} else {
        		document.getElementById(id).style.display = 'block';
        		document.getElementById(imid).src = 'inform:/extraclose.png';
        	}
        }
        function openExtra(id, imid) {
        	document.getElementById(id).style.display = 'block';
        	document.getElementById(imid).src = 'inform:/extraclose.png';
        }
        function closeExtra(id, imid) {
        	document.getElementById(id).style.display = 'none';
        	document.getElementById(imid).src = 'inform:/extra.png';
        }
        function pasteCode(code) {
            var myProject = project();

            myProject.selectView('source');
            myProject.pasteCode(code);
        }

    </script>
</head>
<body>
    <!--CONTENT BEGINS-->
    <table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table>

    <p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Glimmr Canvas-Based Drawing<span class="extensionindexentry"> by </span>Erik Temple</b></p>
    <p><span class="smaller">(For Glulx Only)&nbsp; <img border=0 src=../../../doc_images/vm_glulx.png>&nbsp;Version 4.0.160626</span></p>
    <p>A framework for drawing graphics of various types--from sprite images to painted text--to a Glulx graphics window. Takes an object-oriented approach, with graphic elements represented as individual objects.</p>
    <p></p>
    <hr>
    <p><span class="indexblack"><b><a style="text-decoration: none" href=#docsec1>Chapter 1: </b></span>Concepts<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec2>Chapter 2: </b></span>Including Glimmr Canvas-Based Drawing in a project<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec3>Chapter 3: </b></span>Basic Usage<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec4>Section 3.1: </span>Define a graphics window<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec5>Section 3.2: </span>Define the canvas<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec6>Section 3.3: </span>Create elements and assign them to the canvas<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec7>Section 3.4: </span>Activate elements for display<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec8>Chapter 4: </b></span>Kinds of element<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec9>Section 4.1: </span>Sprites<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec10>Section 4.2: </span>Primitives<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec11>Section 4.3: </span>Bitmaps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec12>Section 4.4: </span>Image-maps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec13>Section 4.5: </span>Rendered strings<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec14>Chapter 5: </b></span>Settings and options for scaling<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec15>Section 5.1: </span>Asymmetrical scaling<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec16>Section 5.2: </span>Oversize scaling<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec17>Chapter 6: </b></span>Elements and mouse input<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec18>Chapter 7: </b></span>Intermediate and advanced topics<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec19>Section 7.1: </span>The default canvas-based drawing rule<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec20>Section 7.2: </span>Using canvases to manage display<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec21>Section 7.3: </span>Framing the canvas<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec22>Section 7.4: </span>Creating new kinds of elements<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec23>Section 7.5: </span>Customizing element display<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec24>Section 7.6: </span>Elements as objects in the world model<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec25>Chapter 8: </b></span>Debugging<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec26>Section 8.1: </span>Console log comments<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec27>Section 8.2: </span>Additional phrases for triggering debugging from source text<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec28>Chapter 9: </b></span>Troubleshooting<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec29>Chapter 10: </b></span>Producing images for use with Glimmr<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec30>Chapter 11: </b></span>A reference to elements and their properties<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec31>Section 11.1: </span>Summary of sprite properties<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec32>Section 11.2: </span>Summary of the primitive base class's properties<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec33>Section 11.3: </span>Summary of the properties of the box, stroked rectangle, line, and point primitives<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec34>Section 11.4: </span>Summary of the properties of the stroked rectangle primitive<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec35>Section 11.5: </span>Summary of the properties of bitmaps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec36>Section 11.6: </span>Summary of the properties of image-maps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec37>Section 11.7: </span>Summary of the properties of tileset image-maps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec38>Section 11.8: </span>Summary of the properties of direct image-maps<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec39>Section 11.9: </span>Summary of the properties of rendered strings<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec40>Section 11.10: </span>Summary of the properties of bitmap-rendered strings<br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href=#docsec41>Section 11.11: </span>Summary of the properties of image-rendered strings<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec42>Chapter 12: </b></span>Contact info<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec43>Chapter 13: </b></span>Change Log<br>
    <br>
    <span class="indexblack"><b><a style="text-decoration: none" href=#docsec44>Chapter 14: </b></span>Examples<br>
    <br>
    <b>Examples</b><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg1.html#eg1">A &mdash; Simple Buttons</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg2.html#eg2">B &mdash; Simpler Buttons</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg3.html#eg3">C &mdash; Basic Floorplan</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg4.html#eg4">D &mdash; Wandering Rhodes</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg5.html#eg5">E &mdash; Roguelike-like</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Glimmr Canvas-Based Drawing-eg6.html#eg6">F &mdash; Deal Me In</span><br>
    </p>
    <hr>
    <p></p>
    </p>

    <p><p><span class="indexdullred"><b><span id=docsec1>Chapter 1: Concepts</span></b></span></p>
    </p>

    <p> Glimmr Canvas-Based Drawing (GCBD) takes an object-oriented approach to drawing in graphics windows. The central concept is the &quot;canvas&quot; (called the &quot;g-canvas&quot; to avoid namespace conflicts). A canvas is similar to the HTML5 &lt;canvas&gt; element: it is a defined area within which graphic elements of various sorts can be displayed. The canvas is basically nothing more than a coordinate system, a blank page which is given certain dimensions. To display a canvas, we assign it to a graphics window (created using the Flexible Windows extension). When the window is opened, the composition we have defined will be displayed, and the canvas--along with all of the graphic elements displayed in it--will automatically be scaled to fit in the window.</p>

    <p> The graphic elements displayed in the canvas are called &quot;g-elements&quot; (again, to avoid namespace clashes with your code or with other extensions). These are declared as individual objects. GCBD provides four basic types of element:</p>

    <p><blockquote><span class="indexdullblue"> sprite - displays an image from a file (a &quot;figure&quot; in Inform's terminology).<br>
     primitive - a simple shape such as a filled rectangle, an outlined box, or an arbitrary line.<br>
     bitmap - a complex element declared by specifying a grid of on/off or colored &quot;bits&quot;; similar to programming an LED sign.<br>
     image-map - a complex element declared by specifying a grid of image tiles.<br>
     rendered string - a complex element in which either image files or bitmaps are used to render arbitrary text strings.</span></blockquote>

    <p> The element types are discussed in more detail below. Authors can also create their own g-element types if desired; some examples are given in this documentation.</p>

    <p> Elements are assigned to a canvas, and they can also be set either active or inactive; inactive elements will not be displayed. They can also be scaled relative to the canvas and given z-values (called &quot;display-layer&quot;) to control the way in which objects overlap each other. If we include the Glimmr Graphic Hyperlinks extension, elements can also be made to respond in various ways to mouse input from the player.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec2>Chapter 2: Including Glimmr Canvas-Based Drawing in a project</span></b></span></p>
    </p>

    <p> Inform remains fairly unsophisticated in its mechanisms for organizing included extensions. When we are dealing with a complex system of modular extensions such as Glimmr, it is very easy to trip it up, and the result is usually a list of unhelpful errors. For this reason, each Glimmr extension includes a section--such as this one--about how to include it, particularly in relation to other extensions.</p>

    <p> GCBD should be included before any font or tileset extensions, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Include Glimmr Canvas-Based Drawing by Erik Temple.<br>
     Include Glimmr Image Font by Erik Temple.</span></blockquote>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec3>Chapter 3: Basic Usage</span></b></span></p>
    </p>

    <p> Glimmr Canvas-Based Drawing is designed to be easy to use, but also both powerful and flexible. There are four basic steps to using it.</p>

    <p><blockquote><span class="indexdullblue"> 1) Define a graphics window;<br>
     2) Define a canvas to use with that window;<br>
     3) Create elements and assign them to the canvas.<br>
     4) Activate elements for display.</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec4>Section 3.1: Define a graphics window</span></b></span></p>
    </p>

    <p> Windows are managed by the Flexible Windows extension, and we can make use of any of the features available in that extension. It is important that the window be defined using the &quot;graphics g-window&quot; kind (or a descendant of this kind):</p>

    <p><blockquote><span class="indexdullblue"> The graphics-window is a graphics g-window spawned by the main-window.</span></blockquote>

    <p> You may find it useful to use the Glimmr Simple Graphics Window extension, which will do most of the configuration of the graphics window for you, including assigning a canvas (see the following section). See the Flexible Windows extension for more on creating windows.</p>

    <p> We also need to be sure that we open the window at some point, using the &quot;open up the &lt;g-window&gt;&quot; phrase, and that we have provided an indication of when the window should be redrawn. For most cases, doing the latter in an every turn rule will suffice:</p>

    <p><blockquote><span class="indexdullblue"> Every turn: follow the refresh windows rule.</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec5>Section 3.2: Define the canvas</span></b></span></p>
    </p>

    <p> Defining the canvas is also quite easy. We simply declare the canvas object and associate it with a g-window:</p>

    <p><blockquote><span class="indexdullblue"> The graphics-canvas is a g-canvas. The associated canvas of the graphics-window is the graphics-canvas.</span></blockquote>

    <p> We should also specify the dimensions of the canvas. There are two ways to do this. We can set the width and height directly:</p>

    <p><blockquote><span class="indexdullblue"> The canvas-width of the graphics-canvas is 600. The canvas-height of the graphics-canvas is 300.</span></blockquote>

    <p> Or we can supply a background image for the canvas. The background image will be drawn underneath (that is, before) any of the elements associated with the canvas are drawn. If we have not explicitly set the canvas dimensions as described above, the background image will itself define the dimensions of the canvas. We declare the background image like this:</p>

    <p><blockquote><span class="indexdullblue"> The background image of the graphics-canvas is Figure of Background.</span></blockquote>

    <p> Again, the background image will only define the canvas dimensions for us if we have not specified dimensions, or if we have specified either the width or the height at 0. If, on the other hand, we have specified dimensions in advance, the background image will be resized to fit the previously defined dimensions. It will even be stretched to fit if need be.</p>

    <p><p><span class="indexblack"><b><span id=docsec6>Section 3.3: Create elements and assign them to the canvas</span></b></span></p>
    </p>

    <p> Finally, we need to create some elements (called g-elements in Inform to avoid namespace issues) and assign these to our canvas.</p>

    <p> Elements are things, in Inform's sense of the term. The player cannot see or refer to them (they are given the &quot;privately-named&quot; and &quot;scenery&quot; properties by default), and we will generally create them off-stage, but authors can declare and manipulate them just like any other thing.</p>

    <p> Each type of element (sprite/image, primitive, bitmap, image-map, or text) needs to be declared with its own set of properties that define its behavior. This is generally a simple process; in fact, the Glimmr Canvas Editor extension allows you to arrange elements visually using a GUI interface and will output appropriate element definitions in I7 source code for you. Here is an example of definitions for a few different types of element:</p>

    <p><blockquote><span class="indexdullblue"> The Player Avatar is a sprite. The image-ID is Figure of Player. The origin is { 10, 10 }.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> The Violet Border is a rectangle primitive. The origin is { 100, 100 }. The endpoint is { 200, 200 }. The tint is g-Lavender.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> The Title Text is a bitmap-rendered string. The origin is { 120, 110 }. The text-string is &quot;My Great Game: An Interactive Pile of Awesome&quot;. The font is Glimmr C&amp;C. The tint is g-Red. The bit-size is 2.</span></blockquote>

    <p> (Please see the guide below for an explanation of the properties of elements.)</p>

    <p> By the far the best way to define a set of g-elements is with a table. This is much briefer and is legible at a glance. (The Glimmr Canvas Editor can also output its source code in a tabular format.) Here is an example of such a table (Inform unfortunately scrambles formatting in documentation, so not all formatted examples will look right):</p>

    <p><blockquote><span class="indexdullblue"> Table of Room Elements</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> sprite</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> origin</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> image-ID</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> display-layer</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> scaling factor
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Orthogonal_Room_Horizontal_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> { 63, 89 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Figure of Orthogonal Room Horizontal</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 3</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 1.0000
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Orthogonal_Room_Round_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> { 87, 112 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Figure of Orthogonal Room Round</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 3</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 1.0000
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Stair_Circular_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> { 95, 121 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Figure of Stair Circular</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 4</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 0.7000
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Orthogonal_Hall_Vertical_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> { 68, 131 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Figure of Orthogonal Hall Vertical</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 3</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> 1.0000</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> Each g-element must be assigned to a canvas. If we have only one canvas, we can simply assign all elements to that canvas at a stroke (this is what the Glimmr Simple Graphics Window extension does):</p>

    <p><blockquote><span class="indexdullblue"> The associated canvas of a g-element is the graphics-canvas.</span></blockquote>

    <p> If we have more than one canvas, we can assign each element individually:</p>

    <p><blockquote><span class="indexdullblue"> The Player Avatar is a sprite. The image-ID is Figure of Player. The origin is { 10, 10 }. The associated canvas is the graphics-canvas.</span></blockquote>

    <p> In general, however, the best way to organize elements--especially when we have a lot of them--is to organize them using sub-kinds. We can then assign any property, including the associated canvas, using the appropriate sub-kind. For example, if we are making a map where each room has its own sprite (image element), we could do something like this:</p>

    <p><blockquote><span class="indexdullblue"> A room-sprite is a kind of a sprite. The associated canvas of a room-sprite is the map-canvas. The display-layer of a room-sprite is 2.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Some room-sprites are defined by the Table of Room Elements.</span></blockquote>

    <p>... and now we can proceed to declare all of the room elements in a single table, and they will automatically be assigned to the appropriate canvas and display-layer.</p>

    <p><p><span class="indexblack"><b><span id=docsec7>Section 3.4: Activate elements for display</span></b></span></p>
    </p>

    <p> Each time a graphics window is redrawn, Glimmr iterates through the elements that are associated with that window's current canvas. If the element is marked for display, the element is drawn to the screen according to the parameters we have specified. If it is not marked for display, it is ignored. We set the display status to either g-active (marked for display) or g-inactive to initialize it.</p>

    <p> All elements are marked for display by default, so if we say nothing about the display status of an element when we define it, it will display as soon as the appropriate graphics window is opened.</p>

    <p> Very often, however, we do not want all of our elements on all of the time; a more dynamic approach is desired. For example, If we have designed a map in which each room is represented by a sprite, we want only the rooms that a player has visited to be displayed. We might begin by defining all of these as of the sub-kind room-sprite, and then mark all of them as initially not for display:</p>

    <p><blockquote><span class="indexdullblue"> A room-sprite is a kind of a sprite. The associated canvas of a room-sprite is the map-canvas. A room-sprite has a room called the associated room. The display status of a room-sprite is g-inactive.</span></blockquote>

    <p> Now, none of our rooms will show up when the map window is first opened. If we add a rule to the rules for the looking action, which are carried out each time we enter a room, we can cause rooms to display as we enter them (note that we have added a property here to room-sprites, the &quot;associated room,&quot; which represents the room that the sprite depicts):</p>

    <p><blockquote><span class="indexdullblue"> Carry out looking:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; Repeat with current-element running through room-sprites:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if the associated room of the current-element is the location:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if current-element is display-inactive:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; activate the current-element.</span></blockquote>

    <p> &quot;Activate &lt;a g-element&gt;&quot; is a shortened way of writing &quot;change the display status of &lt;g-element&gt; to g-active.&quot; (We can also use &quot;mark &lt;g-element&gt; for display&quot;.) To mark an element inactive, we use &quot;deactivate &lt;g-element&gt;&quot; or &quot;unmark &lt;g-element&gt; for display&quot;. Finally, we can test whether an element is currently active or inactive by using one of the following phrases:</p>

    <p><blockquote><span class="indexdullblue"> if &lt;g-element&gt; is display-active<br>
     if &lt;g-element&gt; is display-inactive</span></blockquote>

    <p> There are many appropriate ways to manage the display of elements. The examples below will provide more ideas.</p>

    <p> And those are the basic steps in using Glimmr Canvas-Based Drawing. The remainder of this documentation explores the element types and other options in more detail, and also explores intermediate and advanced usage of the extension. Finally, the examples illustrate basic usage as well as a number of techniques that are likely to be of interest.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec8>Chapter 4: Kinds of element</span></b></span></p>
    </p>

    <p><p><span class="indexblack"><b><span id=docsec9>Section 4.1: Sprites</span></b></span></p>
    </p>

    <p> In common computer-graphics usage, a sprite is an independent image that comprises part of a larger scene, most commonly a two-dimensional image such as the moving characters in a video game. This definition also holds true for GCBD. (Experienced graphics folk should note that there is no &quot;sprite sheet,&quot; however; each entity comes from a separate image file.) Sprites are likely to be the most common element used in GCBD games, being the most flexible elements and, at small to moderate sizes, also the fastest to draw.</p>

    <p> The image files used with sprites can be in PNG or JPEG format. (PNG is recommended, since you can use alpha channels to create transparency, allowing for irregular shapes.) To use an image file as a sprite element, we must first declare the external image file (can be in PNG or JPEG format) as a figure in Inform:</p>

    <p><blockquote><span class="indexdullblue"> Figure of Scroll is the file &quot;Scroll_background.png&quot;.</span></blockquote>

    <p> The figure must then be assigned to the sprite by setting the 'image-ID' property of the sprite object to the figure name, e.g. &quot;The image-ID of the scroll is Figure of Scroll&quot;. If you have more than a handful of sprites, it can be much faster to declare them using tables; see Chapter5 of the Inform manual.</p>

    <p> Like other g-elements, sprites have a coordinate pair, the &quot;origin&quot; property, that determines where in the canvas coordinate system the upper-left corner of the sprite will be displayed. Sprites can be scaled if desired, using the &quot;scaling factor&quot; property. This scaling factor is calculated before the canvas is scaled to fit the window; in other words, the scaling factor property of the sprite scales it in relation to the rest of the canvas. If the asymmetrical scaling use option is set, it will be necessary to set both the &quot;x-scaling factor&quot; and the &quot;y-scaling factor&quot; of the sprite; these can, of course, be set to different values to allow the sprite to be &quot;stretched&quot; to an aspect ratio other than the original aspect ratio.</p>

    <p> Note: When sprites are intended to fit together tightly on screen, as for example image tiles, we will have more flexibility if we design the tiles so that they overlap one another. In other words, where they will abut one another, we should include an extra margin of 1-3 pixels in each image. This will ensure that, if the sprites are scaled, the inaccuracies inherent in scaling do not create visible seams between sprites.</p>

    <p><p><span class="indexblack"><b><span id=docsec10>Section 4.2: Primitives</span></b></span></p>
    </p>

    <p> A primitive element is a simple shape that is generally intended to be used in concert with other shapes and images to build up a composition; for example, rectangles and lines. The meaning of a graphics primitive is somewhat stretched here, since the only primitive actually provided by Glulx is a simple rectangle, whereas all of the other &quot;primitives&quot; provided by Glimmr Canvas-Based Drawing are in fact built up out of rectangles. The most intensive of these, the line primitive, can be made up of many, many rectangles and may be quite slow to draw. The primitives included with GCBD are:</p>

    <p><blockquote><span class="indexdullblue"> Rectangle primitive - A simple rectangle of color.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Box primitive - An &quot;empty&quot; rectangle defined by a surrounding line of variable thickness.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Stroked rectangle primitive - A rectangle of color surrounded by a line of another color. Basically, a rectangle primitive with a box primitive drawn around it. (Not really a &quot;primitive&quot;, then, but the algorithm used draws this faster than using the two primitives, so it makes sense to provide it.)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Line primitive - A straight line drawn between any two points. Horizontal and vertical lines will be the fastest to draw. Diagonal lines, especially long lines or lines approaching a 45 degree angle, can be much slower.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Point primitive - A rectangle whose size is defined by its line-weight.</span></blockquote>

    <p> Primitives have an origin, as do all g-elements, and they also have a second coordinate pair, the &quot;endpoint&quot;. For most primitives, the origin describes the upper left corner, while the endpoint describes the lower right corner. The line primitive, however, is freer--the two points can in fact have any relationship. Because the size of primitive elements is defined by two points on the canvas, they cannot be scaled at the element level in the same way as sprite elements can (they will, of course, scale along with the canvas).</p>

    <p> Four primitives--the box, line, and stroked rectangle primitives--have a &quot;line-weight&quot; property that defines the thickness of the lines that make them up. This is the only property of primitives that responds to scaling. The response is coarse, however, because line-weight is measured in pixels. Fractional pixel measurements are not possible, and are rounded to the nearest integer. For example, if you define a line-weight of 2 pixels, the line will appear as two pixels wide when the canvas is scaled down to 75% of full size, but will appear as 1 pixel when scaled to 74% or less.</p>

    <p> The color of a primitive is specified using the &quot;tint&quot; property. This is a glulx color value (see the Glulx Text Effects extension). Some primitives (the stroked rectangle) also have a &quot;background tint&quot; property that supplies a second color value, in this case the color of the &quot;stroke&quot; that surrounds the central fill of the rectangle.</p>

    <p><p><span class="indexblack"><b><span id=docsec11>Section 4.3: Bitmaps</span></b></span></p>
    </p>

    <p> A bitmap element draws a rectangular image composed of individual &quot;bits&quot; that are specified by the author in the form of a list of lists (the &quot;bitmap-array&quot;) that defines the status of each bit. For example, a cross might be specified like so:</p>

    <p><blockquote><span class="indexdullblue"> {<br>
    &nbsp;&nbsp;&nbsp;&nbsp; { 0, 0, 1, 0, 0 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp; { 0, 0, 1, 0, 0 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp; { 1, 1, 1, 1, 1 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp; { 0, 0, 1, 0, 0 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp; { 0, 0, 1, 0, 0 }<br>
     }.</span></blockquote>

    <p> The ones represent bits that are turned on, while the zeros represent bits that are off. Each row is given as a list of numbers with its own set of braces.</p>

    <p> Remember that the bitmap-array is a list of lists of numbers. We supply the standard set of list braces, and then we supply one list for each row within those braces, each row's list also having its own braces, e.g. here's a simple map with 4 rows:</p>

    <p><blockquote><span class="indexdullblue"> { { 1, 0, 1 }, { 0, 1, 0 }, { 1, 0, 1 }, { 0, 1, 0 } }.</span></blockquote>

    <p> It is very important that all rows have the same number of entries (i.e., columns).</p>

    <p> When image files such as PNGs or JPEGs are scaled, pixels can be interpolated so that the image file can be presented at virtually any scaling factor. However, the pixels of a bitmap element are set directly, and so the individual pixel is the primary unit of measurement (a bitmap displayed with a bit-size of 2 will be twice as wide and twice as high as the same bitmap displayed with a bit-size of 1). Fractional pixel measurements are not possible, and the bit-size is rounded to the nearest integer. So, if you define a bit-size of 2 pixels, the bit will be 2 pixels from 75% to 100% of full size, but will appear as 1 pixel when scaled to 74% or less. The screen size of the bitmap is determined by the bit-size and the dimensions of its grid: a 10 x 10 bitmap with a scaled bit-size of 2 will occupy 20 x 20 pixels on the screen.</p>

    <p> The &quot;on&quot; bit of a bitmap is rendered using the color provided by the &quot;tint&quot; property (defaults to black). The &quot;off&quot; bit can be implemented in one of two ways. If the &quot;background tint&quot; property is specified, the &quot;off&quot; bit will be rendered using the background color. If the &quot;background tint&quot; property is not set, the &quot;off&quot; bit will do nothing (anything drawn beneath the bitmap will show through the off bits). Both the tint and background tint properties are specified using the glulx color value kind of value (see the Glulx Text Effects extension).</p>

    <p> There are two types of bitmaps:</p>

    <p><blockquote><span class="indexdullblue"> Monochrome bitmap - Each bit is either on or off. The &quot;on&quot; bit is specified using 1, the &quot;off&quot; bit using 0.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Polychrome bitmap - RGB color are provided directly in the bitmap-array. RGB colors must be specified using a decimal version of the hexadecimal representation of the color (see Glulx Text Effects for more information). In a polychrome bitmap, the &quot;off&quot; bit is specified using a negative number (rather than 0 as with a monochrome bitmap).</span></blockquote>

    <p> Polychrome bitmaps are not as human-readable as monochrome ones (white, for example, will be listed in the bitmap-array as 16777215), but they are a bit more flexible.</p>

    <p><p><span class="indexblack"><b><span id=docsec12>Section 4.4: Image-maps</span></b></span></p>
    </p>

    <p> An image-map is similar to a bitmap in that the author defines a regular grid for graphical display. However, rather than each cell of the grid displaying a rectangular area of color, it draws an image from a PNG or JPEG file. This could be used for drawing tile-based maps (as in RPG games), sliding-block puzzles, graphical user interfaces, or a number of other things.</p>

    <p> There are two types of image-maps:</p>

    <p><blockquote><span class="indexdullblue"> Tileset image-map - Specified using a list of lists of numbers called the &quot;tile-array&quot;, where each row is given as a list of numbers. These numbers are keyed to an &quot;associated tileset&quot;, basically a translation-table that converts the digits to figure names. The tileset allows for one set of images to be changed out for another with a single line; for example, a map could change from day to night simply by changing the image-map's associated tileset. Tilesets also allow image-map lists to be relatively human-readable. For example, the following might represent a long hallway with a door on the left:</span></blockquote>

    <p><blockquote><span class="indexdullblue"> {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 11, 11, 11, 11, 11, 11, 11 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 05, 00, 00, 00, 00, 00, 00 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 05, 00, 00, 00, 00, 00, 00 },<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 11, 11, 11, 11, 11, 11, 11 }<br>
    &nbsp;&nbsp;&nbsp;&nbsp; }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Direct image-map - Specified using a list of lists of figure names called the &quot;figure-array&quot;, where each row is given as a list of numbers. When typed out, the figure-array will be more difficult to read than a tileset-array, at least when there are more than a few cells in the grid. The figure-array of a simple six-cell grid might read like this:</span></blockquote>

    <p><blockquote><span class="indexdullblue"> {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { Figure of Red, Figure of Blue },<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { Figure of Blue, Figure of Red },<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { Figure of Red, Figure of Blue }<br>
    &nbsp;&nbsp;&nbsp;&nbsp; }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> When adding graphic hyperlinks to individual cells, we will need to include a separate tile that keys commands to figure names (in a tileset image-map, this is handled by the tileset's translation-table).</span></blockquote>

    <p> There are times when we may not want to include any graphic in a given cell. For a tileset image-map, we can simply provide 0 as the value for that cell, while for a direct image-map, we specify Figure of Null. If we specify a &quot;background tint&quot; (a glulx color value) for the image-map element, a rectangular zone of this color will be drawn behind the image-map, and will &quot;show through&quot; any empty cells, as well as through the transparent areas of PNG graphics included in the image-map.</p>

    <p> Remember that the tile- or figure-array is a list of lists. We supply the standard set of list braces, and then we supply one list for each row within those braces, each row's list also having its own braces, e.g. here's a simple tile-array with 4 rows:</p>

    <p><blockquote><span class="indexdullblue"> { { 1, 0, 1 }, { 0, 1, 0 }, { 1, 0, 1 }, { 0, 1, 0 } }.</span></blockquote>

    <p> We must also specify the width and height of the tiles in an image-map. For a direct image-map, we set the &quot;tile-width&quot; and &quot;tile-height&quot; properties to specify these dimensions. The associated tileset should define these for tileset image-maps, but we can also override the tileset settings by specifying the &quot;tile-width-override&quot; and &quot;tile-height-override&quot; properties of the image-map element.</p>

    <p> If we know the total width or total height we want an image-map to fit into, we can also automate the specification of these properties using these phrases:</p>

    <p><blockquote><span class="indexdullblue"> fit my image-map to a total width of 120 canvas units;<br>
     fit my image-map to a total height of 150 canvas units;</span></blockquote>

    <p> Be sure to invoke these before drawing the image-map for the first time. The extension will attempt to get as close as possible to these measurements, but may not be able to match exactly; for best results, make your final measurement evenly divisible by the number of tiles in the row or column (120 canvas units divided by 10 cells = 12 units each). Use Glimmr debugging (see below) to see the final dimension selected.</p>

    <p> Like other graphic elements, image-maps can be &quot;hyperlinked&quot; to respond to mouse input. However, unlike other elements, there are two ways in which they can be so linked. As with other elements, the entire rectangular area of the image-map can be given a single link, by assigning the &quot;linked replacement-command&quot; property and changing the &quot;graphlink status&quot; to g-active.</p>

    <p> But we can also link each tile individually. This is done by making the &quot;tiled graphlink status&quot; of the image-map g-active. We must also specify an array of commands the same size and shape as our image array, the &quot;linked command array&quot; (again, this is a list of lists, this time a list of lists of texts). Luckily, this can be done automatically if we first assign a command to each tile or figure used in the image-map. With a tileset image-map, we can do this by adding a text column called &quot;linked command&quot; to the tileset's translation-table, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> Table of My Tileset</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Char</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Tile</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Linked Command
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> number</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> figure-name</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> text</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> For direct image-maps, which do not have a translation table, we will need to supply a new table, with figure names in one column and commands in a second column. For example:</p>

    <p><blockquote><span class="indexdullblue"> Table of My Image Maps Commands</span><br>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> Figure</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> Linked Command
            </td>
        </tr>
        <tr>
            <td align="left" valign="top">
                <span class="indexdullblue"> figure name</span>&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
            <td align="left" valign="top">
                <span class="indexdullblue"> text</span>
            </td>
        </tr>
    </table>
    </blockquote>

    <p> After we have set up these correspondences between image tiles and commands, we can use one of the following phrases to build the hyperlink list:</p>

    <p><blockquote><span class="indexdullblue"> For tileset image-maps:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; construct graphic hyperlinks array for my image-map.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> For direct image-maps:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; construct graphic hyperlinks array for my image-map using the Table of My Image Maps Commands.</span></blockquote>

    <p> These phrases should be deployed immediately after changing the image array of an image-map, but before drawing it. This will guarantee that the hyperlink zones applied to the screen correspond to the figures shown in the image-map. (We can also write our own routines to populate the linked command array.)</p>

    <p> Individual links can work alongside the global hyperlink for the entire image-map: wherever an individual tile is not linked--that is, where no tile is drawn to the screen, or when the linked command specified is empty (&quot;&quot;) --the image-map's global hyperlink will be triggered. Otherwise, the individual links override the global link.</p>

    <p> We can refer to image-maps by their internal coordinates in limited ways. The internal coordinates are expressed using curly braces like canvas coordinates, but they refer to the column and row of a cell in the map. For example, refer back to our &quot;hallway&quot; map:</p>

    <p><blockquote><span class="indexdullblue"> { 11, 11, 11, 11, 11, 11, 11,<br>
     05, 00, 00, 00, 00, 00, 00,<br>
     05, 00, 00, 00, 00, 00, 00,<br>
     11, 11, 11, 11, 11, 11, 11 }</span></blockquote>

    <p> If we want to refer to the 05 on the left side of the second row, we would point to { 1, 2 }. We can change the image array of an image-map using internal coordinates like so:</p>

    <p><blockquote><span class="indexdullblue"> place tile 17 at coordinate { 1, 2 } of my image-map;<br>
     place Figure of Open Door at coordinate { 1, 2 } of my image-map;</span></blockquote>

    <p> (The former is for tileset image-maps, the latter for direct image-maps.) Changes, of course, are not visible until the next time we update the window.</p>

    <p> We can also convert between the internal coordinates of an image-map and the coordinates of the canvas. This allows us to find out where on the canvas a given cell of an image-map is located (the coordinate returned represents the upper left corner of the tile). To get the canvas coordinates of an internal coordinate pair, we refer to:</p>

    <p><blockquote><span class="indexdullblue"> the canvas coordinate equivalent of { 5, 5 } in the internal coordinates of my image-map;</span></blockquote>

    <p> To get the internal coordinates corresponding to a given canvas coordinate:</p>

    <p><blockquote><span class="indexdullblue"> the equivalent of canvas coordinates { 150, 200 } in the internal coordinates of my image-map;</span></blockquote>

    <p> So, for example, we can place other graphic elements (e.g. sprites) as if they were part of the image-map:</p>

    <p><blockquote><span class="indexdullblue"> Element display rule for Mario:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; now the origin of the Mario is the canvas coordinate equivalent of { 5, 5 } in the internal coordinates of my image-map;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; continue.</span></blockquote>

    <p> We can also convert between the internal coordinates of an image-map and screen coordinates. This can only be done after the element scaling rules for the image-map have been followed (otherwise the extension will not know what the conversion factor should be). We use the following phrases:</p>

    <p><blockquote><span class="indexdullblue"> screen coordinate equivalent of { 5, 5 } in the internal coordinates of my image-map;<br>
     equivalent of screen coordinates { 150, 200 } in the coordinates of my image-map;</span></blockquote>

    <p> There are a few special debugging capabilities available for image-maps. To see which tiles of an image-map have individual graphic hyperlinks, declare this use option:</p>

    <p><blockquote><span class="indexdullblue"> Use image-map graphlink preview.</span></blockquote>

    <p> Now any image-map tile that has an individual hyperlink (see above) will be outlined in gray. The preview color can be changed like so:</p>

    <p><blockquote><span class="indexdullblue"> The graphlink preview color is g-Blue.</span></blockquote>

    <p> If the graphlink preview color is set to null (that is, g-PlaceNullCol), no box will be visible.</p>

    <p> We can &quot;dump&quot; the data in an image-map to the screen by typing &quot;image-map &lt;the name of the image-map to dump&gt;&quot; in-game. If we are running the game in the IDE, this will print the tile-array or figure-array of the image-map to the main window. Note that if the command indicates that there is no such thing as the image-map you're trying to dump, you will need to declare your image-map to be &quot;publically-named&quot;. (GCD automatically tries to mark all g-elements as publically-named for a debugging build, but it is possible to evade this control.) Example:</p>

    <p><blockquote><span class="indexdullblue"> My image-map is a tileset image-map. The origin is { 10, 10 }. The tile-array is { 1, 2, 1, 2 }.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Section - Debugging (not for release)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> My image-map is publically-named.</span></blockquote>

    <p> Note that image-maps may run particularly slowly in the IDE. Test them in an outside interpreter to gauge true performance.</p>

    <p><p><span class="indexblack"><b><span id=docsec13>Section 4.5: Rendered strings</span></b></span></p>
    </p>

    <p> A rendered string is a graphic element that renders an indexed text string graphically. The string is read character by character from the element's &quot;text string&quot; property, and each character is drawn to the screen using either an image file or a bitmap. Note that rendered strings are not accessible to screen readers.</p>

    <p> Rendered strings need to have a font specified in their &quot;associated font&quot; property in order to function. A font in this sense is a special kind of object; its major task is to link letterforms (images or bitmaps), via a lookup table, with the characters they are meant to represent. Two fonts are available with Glimmr (Glimmr Image Font and Glimmr Bitmap Font), and authors are of course free to create their own fonts (see the documentation for Glimmr Drawing Commands).</p>

    <p> Rendered strings can be left-aligned (the default), center-aligned, or right-aligned; the alignment determines whether the origin coordinate will represent the upper left, the upper center point, or the upper right of the rendered text.</p>

    <p> Rendered strings can manage the display of a cursor, which is drawn as a simple vertical line whose color is determined by the &quot;tint&quot; property of the rendered string (see below). This functionality is not likely to be useful except when paired with something like the Glimmr Canvas Text Input Fields extension, which handles mouse and keyboard input to allow for input to be accepted and understood via a graphics window. To display a cursor, provide a number 0 or greater via a rendered string's &quot;cursor&quot; property. This represents the position after which the cursor will be placed; e.g. with a cursor value of 0, the cursor will appear immediately before the first character in the string. To suppress display of the cursor (the default), provide a negative number for the cursor property.</p>

    <p> As has been alluded to, there are two types of rendered string:</p>

    <p><blockquote><span class="indexdullblue"> Bitmap-rendered string - Each glyph is drawn as a bitmap; that is, with individual pixels or 'bits' drawn directly to the screen by Glimmr.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Image-rendered string - Each glyph is drawn using a separate, external image file, preferably in PNG format.</span></blockquote>

    <p> A bitmap-rendered string does not require any external image files, only that a valid bitmap font (such as that provided by the Glimmr Bitmap Font extension) be specified as the &quot;associated font&quot;. As with bitmaps, we can set the &quot;bit-size&quot; property to set the size of each bit, and it has the same coarseness in scaling. And as with bitmaps, the &quot;tint&quot; and &quot;background tint&quot; properties define the colors of a bitmap-rendered string, with &quot;tint&quot; providing the color of the letterforms. When a background tint is provided, a single rectangle is drawn encompassing the entire text area of the rendered string.</p>

    <p> A rendered string, like a sprite, can be provided its own &quot;scaling factor&quot; property to adjust the size of its glyphs relative to the canvas, and it scales with an accuracy comparable to that of sprite elements. If the &quot;background tint&quot; property is supplied (as always, a glulx color value), a rectangle of that color will be drawn behind the rendered string. The &quot;tint&quot; property of an image-rendered string controls only the color of the cursor; the color of the letterforms is set in the image files.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec14>Chapter 5: Settings and options for scaling</span></b></span></p>
    </p>

    <p><p><span class="indexblack"><b><span id=docsec15>Section 5.1: Asymmetrical scaling</span></b></span></p>
    </p>

    <p> Up to this point, we have talked about element scaling factors as if they were unitary; that is, as if both the x and y axes are always scaled by the same amount. And this is in fact true, unless we set the asymmetrical scaling use option:</p>

    <p><blockquote><span class="indexdullblue"> Use asymmetrical scaling</span></blockquote>

    <p> Now we can scale elements-most usefully, sprites-asymmetrically, meaning we can stretch or squeeze the element along one axis more than along the other. This will often be less than pleasing aesthetically, but in some cases it can be quite useful.</p>

    <p> Note that when this option is set, we can no longer use the &quot;scaling factor&quot; property for elements. Instead, we must now specify the &quot;x-scaling factor&quot; and the &quot;y-scaling factor&quot; separately. We must do this for all elements:</p>

    <p><blockquote><span class="indexdullblue"> The gas mask is a sprite. The x-scaling factor is 0.9800. The y-scaling factor is 0.5000.</span></blockquote>

    <p> Note that by default, both scaling factors are set to 1.0000, so we really only need to set the scaling factors if we wish to scale to some other factor.</p>

    <p><p><span class="indexblack"><b><span id=docsec16>Section 5.2: Oversize scaling</span></b></span></p>
    </p>

    <p> By default, Glimmr Canvas-Based Drawing will only scale a canvas up to its original size, so that 1 unit in the canvas coordinate system equates to 1 pixel on the screen (i.e., a window scaling factor of 1.0000). This ensures high-quality display of image files, which generally do not look good when enlarged. However, if we do want the canvas to be scaled beyond its original size, we can set the &quot;oversize scaling&quot; property of the window to true:</p>

    <p><blockquote><span class="indexdullblue"> The graphics-window is a graphics g-window spawned by the main-window. Oversize scaling is true.</span></blockquote>

    <p> This option can, of course, be changed during play if we want to temporarily upscale our canvas for some special effect.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec17>Chapter 6: Elements and mouse input</span></b></span></p>
    </p>

    <p> When the Glimmr Graphic Hyperlinks extension is included, graphic elements can be hyperlinked to issue a command or try a stored action when the player clicks on the element onscreen. Glimmr will perform all of the required bookkeeping automatically; we need only define the behavior we want. In most cases, this is as simple as indicating what command should be entered at the command line when a given element is clicked.</p>

    <p> Before a window can receive mouse input, it must be made capable of doing so. We can do this by setting the g-graphlinked property for the window:</p>

    <p><blockquote><span class="indexdullblue"> The graphics-window is a graphics g-window. It is g-graphlinked.</span></blockquote>

    <p> Alternatively, we can simply declare the window to be of the kind &quot;graphlink g-window,&quot; which will set this property automatically. Note that while the property can be changed during play, this is not recommended--the window must be closed and reopened for the change to take effect.</p>

    <p> Elements must also be set to receive graphlinks. We can do this when the element is declared by setting its &quot;graphlink status&quot; property to active:</p>

    <p><blockquote><span class="indexdullblue"> Mario is a sprite. The graphlink status is g-active.</span></blockquote>

    <p> To change the graphlink status during the course of the game, we can use these phrases:</p>

    <p><blockquote><span class="indexdullblue"> Activate graphlink for Mario.<br>
     Deactivate graphlink for Mario.</span></blockquote>

    <p> And we can test whether an element is accepting mouse input by asking whether or not the element is graphlinked:</p>

    <p><blockquote><span class="indexdullblue"> if Mario is not graphlinked:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; activate graphlink for Mario.</span></blockquote>

    <p> We now know how to ensure that our element is accepting mouse input, but we haven't yet told it to do anything in response. The easiest way to program a response is simply to provide the text of the command in the &quot;linked replacement-command&quot; property (see Glimmr Graphic Hyperlinks for other approaches). This indexed text is simply the command we wish to fire when the sprite is clicked. (A linked replacement-command of &quot;&quot; (the default) will be perceived by the player as having had no effect.) Here's a complete definition for a hyperlinked element:</p>

    <p><blockquote><span class="indexdullblue"> Mario is a sprite. The image-ID is Figure of Mario. The origin is { 58, 45 }. The display-layer is 4. The graphlink status is g-active. The linked replacement-command is &quot;JUMP&quot;.</span></blockquote>

    <p> And now, as long as the Mario sprite appears in the window, clicking on it with our mouse will result in the command &quot;JUMP&quot; being entered at the command prompt. All of the types of graphic element can be hyperlinked in this way. The entire area of the element, including transparent zones, is hyperlinked, and the hyperlink zone for any element is a single rectangle. This is most notable in the case of line primitives, because the hyperlink zone will be the smallest rectangular area that can completely enclose the line; a 45-degree line will therefore have a square hyperlinked area with the line running from one corner to its opposite.</p>

    <p> A graphlink-active element that overlaps another in the display layering system will supercede the lower element. That is, if Mario, on display-layer 4, partially overlaps a hyperlinked mushroom sprite on display-layer 3, clicking within the boundaries of the rectangle that defines Mario will cause Mario's, rather than the mushroom's, linked replacement-command to be invoked.</p>

    <p> The background of a canvas cannot be hyperlinked. We can, however, imitate a clickable background by including a fully transparent sprite image of the same dimensions as the background and placing it on the lowest display-layer (usually display-layer 1).</p>

    <p> A final note: if we will need to have more than 120 hyperlinked elements active at a single moment, we need to extend the number of blank rows in the Table of Graphlink Glulx Replacement Commands. Graphic Window Sprites manages this table automatically, and we should not attempt to set entries in it directly--the table is rebuilt each time the sprite drawing rules are updated, so direct edits will be disregarded in any case.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec18>Chapter 7: Intermediate and advanced topics</span></b></span></p>
    </p>

    <p><p><span class="indexblack"><b><span id=docsec19>Section 7.1: The default canvas-based drawing rule</span></b></span></p>
    </p>

    <p> GCBD is constructed around a single, rather complex window-drawing rule. This drawing rule is automatically used for any g-window of the kind &quot;graphics g-window&quot; (defined by the Flexible Windows extension). Here are the basic steps in the processing of this rule, along with what happens at each stage. For more information on details, of course, please see the code.</p>

    <p><blockquote><span class="indexdullblue"> 1. Calculate the scaling factor for the window: Check the canvas dimensions against the window dimensions and calculate the scaling factor needed to best fit the canvas in the window. This is handled by the &quot;carry out scaling activity&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 2. Calculate window offsets: Unless the aspect ratio of the canvas is exactly the same as the window, the scaled canvas will fall short of the window dimension along one or both axes. In this stage, we calculate the offsets necessary to center the canvas in the window. This is handled by the &quot;offset calculation activity&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 3. Window-framing adjustment: This phase only occurs if we have specified an origin other than { 0, 0 } for the window. If we have, the offsets are again adjusted to account for the fact that we have changed the window framing (see the &quot;Framing the Window&quot; section below). This is handled by the &quot;window-framing adjustment activity&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 4. Clear the window to prepare for drawing.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 5. Draw the canvas background: If the canvas has a background image, we draw it now. This is handled by the &quot;drawing the canvas background activity&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 6. Draw active graphic elements: Repeat through the display-active elements assigned to the window. For each element, we will first follow the element scaling rules for the element, and then follow the element display rules. This is handled by the &quot;drawing the active elements activity&quot;.</span></blockquote>

    <p> These steps (except for the clearing of the window) are implemented as activities, so we can add before or after rules to any of them, making the whole system very accessible to modification. Some of the topics and examples which follow illustrate ways to &quot;hack&quot; the process.</p>

    <p><p><span class="indexblack"><b><span id=docsec20>Section 7.2: Using canvases to manage display</span></b></span></p>
    </p>

    <p> At first glance, the canvas may almost look unnecessary: elements will be displayed in a graphics window, so why not assign the element directly to the window? Why do we need the canvas to mediate?</p>

    <p> There are really two answers. First, canvases provide an easy way to change the display content of a graphics window at a stroke. We can, for example, set up two canvases with different elements. We first show Canvas A in our graphics window, and then, when we want to change the content of the window, we simply change the associated canvas of the window to Canvas B. The next time the window refreshes, it will display our second composition. Canvases can thus be used as discrete &quot;pages&quot; to be shown in a graphics window. See the &quot;Two Canvases, One Window&quot; example.</p>

    <p> We can also display the same canvas in two or more windows at the same time, using different display parameters. So, if we have a detailed map that would benefit from being seen both in close-up and at long-range, we could show the map at one scale in one window, and at another in the other. See the &quot;One Canvas, Two Windows&quot; example.</p>

    <p><p><span class="indexblack"><b><span id=docsec21>Section 7.3: Framing the canvas</span></b></span></p>
    </p>

    <p> In normal usage, if the canvas is too large to fit in its associated graphics window, it will be scaled down to fit. Whether the canvas needs to be down-scaled or not, it will also be centered in the window, with offsets on two to four sides (two sides if the canvas has been scaled to fit, four if it is smaller than the window.) There are many ways that we can alter this behavior.</p>

    <p> First, we can specify our own scaling factor for the window, the &quot;arbitrary scaling factor.&quot; If we set this value, then the canvas will not be automatically scaled to fit the window. Instead it will simply be scaled to our specification:</p>

    <p><blockquote><span class="indexdullblue"> The arbitrary scaling factor of the graphics-window is 1.0000.</span></blockquote>

    <p> A ratio of 1.0000 will present the canvas without scaling it, so that one pixel onscreen will be equivalent to one coordinate unit of the canvas. The canvas may or may not fit within the window as the player has sized it, but it will still be centered within the window.</p>

    <p> Second, a graphics window has an origin coordinate, similar to that of elements. Normally, the origin is { 0, 0 }, which means that the upper left corner of the canvas will be displayed in the upper left corner of the window. (In practice, this placement is usually modified by an offset that centers the canvas within the window, so that the canvas is actually displayed at the origin of the window plus the x and y, or top and left, offsets.) If we change the origin of the window, then the canvas will be framed differently. Setting the window's origin to { 100, 100 }, for example, will place the upper left corner of the window at canvas coordinates { 100, 100 }. Again, this does not account for the offsets, which we may prefer to suppress. Here is one way to suppress the calculation of offsets:</p>

    <p><blockquote><span class="indexdullblue"> For offset calculation of the graphics-window:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; change x-offset of the graphics-window to 0;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; change y-offset of the graphics-window to 0.</span></blockquote>

    <p> This will replace the standard behavior of the window offset calculation activity in the case of the graphics-window (only--other graphics windows would not be affected) and make sure that no offsets are used in the framing of the window. Note that origins (and any coordinates, really) can be set to negative numbers, or to numbers larger than the canvas dimensions, and they will still display. The elements may not appear in the visible part of the window, but they are there &quot;virtually&quot;.</p>

    <p> Third, we can center the window frame on a specific point on the canvas. This must be done after the scaling and offset calculation phases of the canvas-based drawing rule; usually it will occur during the window-framing adjustment activity (step 3 of the default canvas-based drawing rule; see above). Here's how to do it:</p>

    <p><blockquote><span class="indexdullblue"> Before window-framing adjustment of the graphics-window:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; center the frame of the graphics-window on canvas coordinates { 100, 100 };<br>
    &nbsp;&nbsp;&nbsp;&nbsp; continue the action.</span></blockquote>

    <p> This works by changing the origin coordinates of the window. In addition to specifying a coordinate (or a variable containing a coordinate pair), we can also use the special phrase &quot;center-point&quot; of an element, in this case the sprite &quot;Mario&quot;:</p>

    <p><blockquote><span class="indexdullblue"> Before window-framing adjustment of the graphics-window:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; center the frame of the graphics-window on the center-point of Mario;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; continue the action.</span></blockquote>

    <p> Or, more concisely, we can simply say &quot;center the frame of the graphics-window on Mario,&quot; which will have the same effect.</p>

    <p> One note: if we have changed the alignment of a graphic element from left-aligned to center-aligned (see the property reference), we will need to specify this differently. Since the origin coordinate of a center-aligned element actually refers to the center-point of the element, we need to say &quot;center the frame of the graphics-window on the origin of Mario&quot;. Centering the window on a right-aligned element will not have the desired effect.</p>

    <p><p><span class="indexblack"><b><span id=docsec22>Section 7.4: Creating new kinds of elements</span></b></span></p>
    </p>

    <p> The types of element defined in Glimmr Canvas-Based Drawing are, in most cases, pretty simple. They draw just one entity. But elements need not be so simple. The bitmap and rendered string elements, for example, actually draw many rectangles or images to the screen each time the element is called upon.</p>

    <p> We can write our own custom rules for drawing elements. The Glimmr Automap extension, for example, creates a new g-element called the map-renderer. This works similarly to a tileset grid: the map-renderer iterates through grid-based map data produced by Mark Tilford's Automap extension, and for each space in the grid, it selects an appropriate tile from a tileset (the tileset is basically a table that relates each bit of map data to a given image). We use the element display rules to write behavior for new elements and element-kinds:</p>

    <p><blockquote><span class="indexdullblue"> An element display rule for the map-renderer (this is the map-renderer display rule):<br>
    &nbsp;&nbsp;&nbsp;&nbsp;...<br>
    &nbsp;&nbsp;&nbsp;&nbsp; repeat with count running from 1 to (map height * map width):<br>
    &nbsp;&nbsp;&nbsp;&nbsp;...</span></blockquote>

    <p> Element display rules also typically set a graphic hyperlink for the element being drawn. For all of the types of elements included in the extension, the shape of the hyperlinked area is a simple rectangle. Here, for example, is the element display rule for the rectangle primitive type:</p>

    <p><blockquote><span class="indexdullblue"> An element display rule for a rectangle primitive (called the rectangle):<br>
    &nbsp;&nbsp;&nbsp;&nbsp; draw a rectangle (color tint of the rectangle) in (current window) from (win-x) by (win-y) to (end-x) by (end-y);<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if the rectangle is graphlinked:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set a graphlink in the current window identified as the rectangle from win-x by win-y to end-x by end-y as the linked replacement-command of the rectangle.</span></blockquote>

    <p> The first line draws the rectangle (see Glimmr Drawing Commands for the syntax of direct drawing commands). If the rectangle has a graphic hyperlink attached, the final line sets a rectangular hyperlink using the same coordinates as the rectangle itself occupies (see Glimmr Graphic Hyperlinks for more on hyperlinks).</p>

    <p> There is no limit on how many entities we can draw in a single element display rule. If we wanted, for example, to have an element that displayed a sprite with a box drawn around it, we could do so:</p>

    <p><blockquote><span class="indexdullblue"> An element display rule for an emphasized sprite (called the highlighted item):<br>
    &nbsp;&nbsp;&nbsp;&nbsp; draw a sprite...<br>
    &nbsp;&nbsp;&nbsp;&nbsp; draw a box...<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if the highlighted item is graphlinked:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set a graphlink in the current window...</span></blockquote>

    <p> We can also set multiple hyperlinks in the same element display rule. If, for example, our g-element is L-shaped, we can set two rectangular hyperlink zones (graphic hyperlink zones are always rectangular) at right angles to one another.</p>

    <p><p><span class="indexblack"><b><span id=docsec23>Section 7.5: Customizing element display</span></b></span></p>
    </p>

    <p> We can also use the element display rules to specialize behavior for one element, or for a class of elements, by prefacing or replacing the standard element display rule with another. For example, if we want to create a debugging command to print the name and origin coordinates of each g-element to the main window as it is drawn to our graphics window, we could do something like this:</p>

    <p><blockquote><span class="indexdullblue"> First element display rule for a g-element (called the item):<br>
    &nbsp;&nbsp;&nbsp;&nbsp; say &quot;Element [item] drawn at [origin of the item in brace notation].&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; continue.</span></blockquote>

    <p> The &quot;continue&quot; is important, because by default the element display rulebook will terminate once a rule completes. The continue directive allows Inform to look for subsequent rules in the rulebook. (We can also use &quot;continue the action,&quot; Inform's standard phrasing, but the element display rules provide &quot;continue&quot; as a shortened form; &quot;exit&quot; similarly serves as a shortened form of &quot;rule succeeds.&quot;)</p>

    <p><p><span class="indexblack"><b><span id=docsec24>Section 7.6: Elements as objects in the world model</span></b></span></p>
    </p>

    <p> Since elements are objects, like any other entity of Inform's &quot;thing&quot; kind, we can use their location in space to manage display. If we want an image (or images) to display only when the player is in a certain room, we could put the element object in that room and indicate that elements should only be depicted when the element object is in scope (in most cases, this will be when the player is also in the room). For example, this rule would run before the default canvas-based drawing rule and activate the appropriate elements for display:</p>

    <p><blockquote><span class="indexdullblue"> First window-drawing rule for a graphics g-window (called the present window):<br>
    &nbsp;&nbsp;&nbsp;&nbsp; repeat with item running through g-elements assigned to the present window:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if the item can be seen by the player:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; activate item;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; deactivate item;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; continue the action.</span></blockquote>

    <p> We could also potentially use other aspects of g-elements--particularly their relationships with one another--as means of organizing their display. I leave users to think about whether this kind of thing might have advantages for them.</p>

    <p> If for some reason we actually want players to be able to see, pick up, and refer to some elements as if they were objects in the game world, we can declare those elements to be &quot;publically-named&quot;:</p>

    <p><blockquote><span class="indexdullblue"> Mario is publically-named.</span></blockquote>

    <p> If we want elements to be publically-named by default, we can replace the section of the extension's code that conceals them from the player, like this:</p>

    <p><blockquote><span class="indexdullblue"> Chapter - Revealing elements (in place of Chapter - Concealing elements in Glimmr Canvas-Based Drawing by Erik Temple)</span></blockquote>

    <p> With the body of this section left blank, the privately-named and scenery properties are not set for g-elements, and we can now treat g-elements like any other kind of object: the player will be now able to see and interact with them. Note that g-elements, just like other objects, will be created &quot;off-stage&quot; unless we actively place them in specific rooms.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec25>Chapter 8: Debugging</span></b></span></p>
    </p>

    <p> Like all Glimmr extensions, Glimmr Canvas-Based Drawing can utilize the Glimmr debugging log. To use the log, enable this use option:</p>

    <p><blockquote><span class="indexdullblue"> Use Glimmr debugging.</span></blockquote>

    <p> Now Glimmr functions will announce themselves, as well as the particular extension that generated them (e.g., Glimmr Canvas-Based Drawing, Glimmr Drawing Commands, etc.) in the main window as they fire. Be warned that, under normal usage, Glimmr generates a lot of debugging information, and can quite thoroughly gum up a game's output. There are a few things we can do to mitigate this:</p>

    <p><blockquote><span class="indexdullblue"> 1) The Glimmr Debugging Console extension can be included to segregate Glimmr logging output into its own window.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 2) We can set up our own alternate text-buffer window and direct log output there by setting the &quot;console output window&quot; variable, e.g.:</span></blockquote>

    <p><blockquote><span class="indexdullblue"> The console output window is my-text-window.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> 3) We can also send console log output to the transcript, while not printing it anywhere else. To do this, we include this code in our story file:</span></blockquote>

    <p><blockquote><span class="indexdullblue"> To say &gt;console:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say echo stream of main-window.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> To say &lt;:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say stream of main-window;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say run paragraph on.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> This will only work when a transcript is actually being written. To ensure that we do not forget to initiate one, we can include this:</span></blockquote>

    <p><blockquote><span class="indexdullblue"> When play begins:<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try switching the story transcript on.</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec26>Section 8.1: Console log comments</span></b></span></p>
    </p>

    <p> When we are sending the debugging info somewhere other than the main window, it can be useful to add notes to the console log to help us interpret it later. We can do this by typing &quot;&gt; &quot; and any text we want to add to the log at the command prompt, e.g.:</p>

    <p><blockquote><span class="indexdullblue"> &gt; Going west from the Kitchen</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec27>Section 8.2: Additional phrases for triggering debugging from source text</span></b></span></p>
    </p>

    <p> It can often be useful to control debugging commands from source text, rather than from the command line. For example, we may want to debug the startup sequence, which occurs before the command prompt appears, and thus before we can enter any debugging commands. Glimmr provides the following phrases for controlling the ACTIONS, RULES, RULES ALL, and GLKLIST commands:</p>

    <p><blockquote><span class="indexdullblue"> ACTIONS<br>
    &nbsp;&nbsp;&nbsp;&nbsp; activate actions tracing<br>
    &nbsp;&nbsp;&nbsp;&nbsp; suspend actions tracing</span></blockquote>

    <p><blockquote><span class="indexdullblue"> RULES<br>
    &nbsp;&nbsp;&nbsp;&nbsp; activate rules tracing<br>
    &nbsp;&nbsp;&nbsp;&nbsp; suspend rules tracing<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if rules tracing is active</span></blockquote>

    <p><blockquote><span class="indexdullblue"> RULES ALL<br>
    &nbsp;&nbsp;&nbsp;&nbsp; activate intensive rules tracing<br>
    &nbsp;&nbsp;&nbsp;&nbsp; suspend rules tracing<br>
    &nbsp;&nbsp;&nbsp;&nbsp; if intensive rules tracing is active</span></blockquote>

    <p><blockquote><span class="indexdullblue"> GLKLIST<br>
    &nbsp;&nbsp;&nbsp;&nbsp; show glk list</span></blockquote>

    <p> The Extended Debugging extension provides further phrases, as well as other useful features. (Note: Extended Debugging is not part of Glimmr, but works well with it.) See the template layer (Appendix B of Writing with Inform: http://inform7.com/sources/src/i6template/Woven/index.html) for more on these debugging commands.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec28>Chapter 9: Troubleshooting</span></b></span></p>
    </p>

    <p> Runtime error &quot;cannot divide by zero&quot; (or similar):</p>

    <p><blockquote><span class="indexdullblue"> The canvas dimensions have probably not been defined. Be sure you define the canvas before the window-drawing rules are run.</span></blockquote>

    <p> Inform doesn't recognize the &quot;image-ID&quot; property, or a table in which it is used:</p>

    <p><blockquote><span class="indexdullblue"> Inform requires a figure to be defined in the source before it can be referred to. Be sure that your figures are defined in the source *above* the text in which you are attempting to define the associated sprites.</span></blockquote>

    <p> When I click on a hyperlinked element, the game prints a blank line at the command prompt, and then prints my replacement command:</p>

    <p><blockquote><span class="indexdullblue"> This is how Glk is designed; the line space is unavoidable on most interpreters. A new version of the Glk standard will change this, and Glimmr will be updated when this happens. As of this writing, all major Glulx interpreters will respond in this way except for Zoom, which does not insert the extra line. If the line break bothers you, you may want to recommend Zoom to your OS X and Linux players.</span></blockquote>

    <p> Performance issues:</p>

    <p><blockquote><span class="indexdullblue"> Be sure that your images are not too large. Images should be sized no larger than you want them to appear onscreen.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> Note that games played within the Inform IDE will be slower than games played in an external interpreter. The Mac IDE may sometimes show minor scaling artifacts that are not seen with external interpreters. Try pressing the Release button to produce a blorb file, and play that file in the latest version of a fast, modern interpreter.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> If you are using Glimmr debugging, the debugging statements in the routines will slow things down. Turn off Glimmr debugging whenever possible.</span></blockquote>

    <p> Testing:</p>

    <p> Test your game in all the interpreters you can get your hands on, and recommend the best interpreter (s) to your players. At the time of this writing, Gargoyle and Zoom are both well optimized for graphics and other multimedia effects. Spatterlight on OS X is not, and also has a poor UI for mouse input. Windows Glulxe and Windows Git have a low-resolution timer, and neither is quite as fast with graphic display as Gargoyle, but they should be adequate for most purposes.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec29>Chapter 10: Producing images for use with Glimmr</span></b></span></p>
    </p>

    <p> Full instructions for producing images are well beyond the scope of this documentation, but a few notes and links will be useful. For almost all purposes, you will want to produce your images in PNG (Portable Networks Graphics) format. PNG graphics (file extension. png) can contain an &quot;alpha channel&quot; that defines transparent areas of the image, allowing for shapes that are not rectangular. They can be produced with Photoshop, of course, but also with many other programs, including the free, cross-platform GIMP software (http://www.gimp.org). Here are some sites that might be of use to you if you are unfamiliar with PNG graphics (Inform tends to mangle URL spacing in documentation, so you may need to edit these by hand or open the extension itself and copy the links from there into your browser):</p>

    <p><blockquote><span class="indexdullblue"> http://en.wikipedia.org/wiki/Portable_Network_Graphics<br>
     http://www.libpng.org/pub/png/pngintro.html<br>
     http://www.axialis.com/tutorials/tutorial-misc001.html (Photoshop tutorial)<br>
     http://www.libpng.org/pub/png/book/chapter04.html#png.ch04.div.5 (GIMP tutorial)</span></blockquote>

    <p> Avoid making your images too large. Images should be sized no larger than you want them to appear onscreen.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec30>Chapter 11: A reference to elements and their properties</span></b></span></p>
    </p>

    <p> Here is a list of properties common to all graphic elements (g-elements). Separate sections for each of the element types follows. Properties which the extension uses internally and should not be referred to by the author are also included. These are marked with a double asterisk (**).</p>

    <p><blockquote><span class="indexdullblue"> associated canvas - the g-canvas with which the element is currently associated. The element will be considered for drawing to the screen when this canvas is drawn.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> display status - indicates whether or not the element is marked for display (i.e., whether or not it will be drawn to the associated canvas of the element when the window displaying that canvas is updated). Can be g-active (marked for display) or g-inactive. Default value: g-active</span></blockquote>

    <p><blockquote><span class="indexdullblue"> origin - the x and y coordinates where the element's drawing will be commenced. These coordinates refer to the coordinate system of the canvas and indicate where the upper-left corner of the element will be drawn (usually; see alignment properties below). The origin coordinates are expressed as a list of exactly two numbers in brace notation. Negative numbers are legal. Default value: { 0, 0 }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> display-layer - a number that defines the &quot;layer&quot; the element will be drawn to, comparable to the z-index in CSS/HTML. Elements with a display-layer of 1 are drawn first, then those with display-layer 2, etc. Lower numbers are thus lower in the stack order. Default value: 1</span></blockquote>

    <p><blockquote><span class="indexdullblue"> scaling factor - a ratio for scaling the element in relation to its associated canvas. A decimal quantity with four-digit precision, e.g. 0.5000 would scale a sprite image to 50% of its original size (different element types are differentially affected by the scale property; see the discussion of element types above for more information). Actual size is expressed as 1.0000; ratios greater than 1.0000 are allowed (e.g., 2.0000 is equivalent to 200% of actual size). An element's actual displayed size is also subject to adjustment by the window-scaling factor. Default value: 1.0000</span></blockquote>

    <p><blockquote><span class="indexdullblue"> x-scaling factor - only available when the asymmetrical scaling use option is in force (the scaling factor property is disabled by this same use option). Like the scaling factor property, a decimal quantity with four-digit precision. Scales only the x-axis of an element; most useful for sprites. Default value: 1.0000</span></blockquote>

    <p><blockquote><span class="indexdullblue"> y-scaling factor - only available when the asymmetrical scaling use option is in force (the scaling factor property is disabled by this same use option). Like the scaling factor property, a decimal quantity with four-digit precision. Scales only the y-axis of an element; most useful for sprites. Default value: 1.0000</span></blockquote>

    <p><blockquote><span class="indexdullblue"> alignment - defines how an element is drawn in relation to its origin property. When left-aligned, the origin will describe the upper left corner of the element. When center-aligned, the origin will describe the center of the x and y axes of the element. When right-aligned, the origin will describe the lower right corner. It is probably best to declare an element left-aligned whenever possible. Default value: left-aligned</span></blockquote>

    <p><blockquote><span class="indexdullblue"> graphlink status - indicates whether or not the element is accepting mouse input. Can be g-active (accepting input) or g-inactive. Default value: g-inactive</span></blockquote>

    <p><blockquote><span class="indexdullblue"> linked replacement-command - an indexed text containing a command that should be entered on the player's behalf when an element has received a mouse-click. The command will be automatically printed to the command line and parsed after clicking. Default value: &quot;&quot; (empty string, will have no visible effect)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> win-x** - represents the x-coordinate of the element's origin AFTER it has been scaled according to the window's scaling factor; i.e., it refers to the position of the element in the window's coordinate system, not the canvas's. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> win-y** - represents the y-coordinate of the element's origin AFTER it has been scaled according to the window's scaling factor; i.e., it refers to the position of the element in the window's coordinate system, not the canvas's. Default value: 0</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec31>Section 11.1: Summary of sprite properties</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with sprites, including those that we should not try to set directly. Properties of the latter sort--those which the extension uses internally and should not be referred to by the author--are marked with a double asterisk (**). All sprites also inherit the properties common to the g-element kind (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> image-ID: the figure name of the sprite's associated image file. The default value is null, which can be tested against the special value &quot;Figure of Null&quot;.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> sprite-x**: A number that refers to the width of the sprite image after scaling calculations--the final size of the sprite as displayed on screen. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> sprite-y**: A number that refers to the height of the sprite image after scaling calculations--the final size of the sprite as displayed on screen. Default value: 0</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec32>Section 11.2: Summary of the primitive base class's properties</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with all primitive elements, including rectangle, box, stroked rectangle, line, and point primitives. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All primitives also inherit the properties common to the g-element kind (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> endpoint - the x and y coordinates where the element's drawing will be completed. These coordinates refer to the coordinate system of the canvas and usually indicate where the lower right corner of the element will be drawn. In the case of line primitives, the origin and endpoint are more or less interchangeable, neither has priority. The endpoint coordinates are expressed as a list of exactly two numbers in brace notation. Default value: { 0, 0 }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the primitive; in the case of the stroked rectangle primitive, this represents the color of the fill fo the rectangle. Default value: g-White</span></blockquote>

    <p><blockquote><span class="indexdullblue"> end-x** - represents the x-coordinate of the primitive's origin AFTER it has been scaled according to the window's scaling factor; i.e., it refers to the position of the endpoint in the window's coordinate system, not the canvas's. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> end-y** - represents the y-coordinate of the primitive's origin AFTER it has been scaled according to the window's scaling factor; i.e., it refers to the position of the endpoint in the window's coordinate system, not the canvas's. Default value: 0</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec33>Section 11.3: Summary of the properties of the box, stroked rectangle, line, and point primitives</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with the box, stroked rectangle, line, and point primitives; i.e., those primitives that have a line of variable thickness. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). These primitives also inherit the properties common to the primitive kind, and to the g-element kind (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> line-weight - the width, in pixels, of either (1) the outline of the box or stroked rectangle primitive; (2) the line of the line primitive; or (3) the square of the point primitive. Default value: 1</span></blockquote>

    <p><blockquote><span class="indexdullblue"> stroke** - represents the line-weight of the primitive as scaled into the window's coordinate system (i.e., the final thickness of the line as displayed on the screen, in pixels. Default value: 1</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec34>Section 11.4: Summary of the properties of the stroked rectangle primitive</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with the stroked rectangle primitive. Since the stroked rectangle is the only primitive that can incorporate two colors, we use the background tint property to supply the second color (the color of the line). Stroked rectangle primitives also inherit the properties common to the primitive and the g-element kinds (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> background tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the outline surrounding the central rectangle of the stroked rectangle primitive; i.e., the color of the &quot;stroke&quot; as opposed to the &quot;fill.&quot; Default value: g-White</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec35>Section 11.5: Summary of the properties of bitmaps</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with both monochrome and polychrome bitmaps. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All bitmap elements also inherit the properties common to the g-element kind (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> bitmap-array - a list of lists of numbers, written in brace notation, that defines the on and off bits of a bitmap element. Monochrome bitmaps can include only 0 (&quot;off&quot;) or 1 (&quot;on&quot;). Polychrome bitmaps may include any number from 0 to 16777215, defining a decimally packed 16-bit RGB number; in a polychrome bitmap, the &quot;off&quot; bit can be represented by any negative number. Default value: { }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the &quot;on&quot; bit of a bitmap. (The &quot;on&quot; bit is given by a 1 in the bitmap-array for monochrome bitmaps; it has no effect for polychrome bitmaps.) Default value: g-White</span></blockquote>

    <p><blockquote><span class="indexdullblue"> background tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the background of the bitmap. This color will appear wherever an &quot;off&quot; bit has been specified. (The &quot;off&quot; bit is given by 0 for monochrome bitmaps, and by any negative number for polychrome bitmaps.) Default value: g-PlaceNullCol (the null color value, meaning no background will be drawn)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> bit-size - the size, relative to the canvas, of each bit in the bitmap. A bit-size of 2 will be two units wide and two units high. The bit-size is subject to scaling both by the scaling factor (or x-scaling factor) of the bitmap element, and by the window scaling factor. Default value: 1</span></blockquote>

    <p><blockquote><span class="indexdullblue"> dot-size** - the final display size of each bit in the bitmap, measured in pixels as output on-screen. Default value: 1</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec36>Section 11.6: Summary of the properties of image-maps</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with both tileset and direct image-maps. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All bitmap elements also inherit the properties common to the g-element kind (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> background tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the background of the image-map. This color will appear wherever a tile is absent, and will also &quot;show through&quot; transparent PNG images. Default value: g-PlaceNullCol (the null color value, meaning no background will be drawn)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tiled graphlink status - Whether or not some or all of an image-map's tiles have individual graphic hyperlinks (graphlinks). Can be g-active (accepting input) or g-inactive. Default value: g-inactive</span></blockquote>

    <p><blockquote><span class="indexdullblue"> linked command array - A list of lists of texts describing the default commands associated with each of the cells in the image-map. Will not be consulted unless tiled graphlink status is g-active. The length and shape of the list should be the same as the length of the image-map's tile-array or figure-array. Default value: { }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> scaled tile-width** - The width of each tile in screen coordinates, as determined after scaling the canvas and the image-map. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> scaled tile-height** - The height of each tile in screen coordinates, as determined after scaling the canvas and the image-map. Default value: 0</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec37>Section 11.7: Summary of the properties of tileset image-maps</span></b></span></p>
    </p>

    <p> This section lists the properties of the tileset image-map that are not shared by other image-map kinds. Tileset image-maps also inherit the properties common to the image-map and the g-element kinds (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> tile-array - A list of lists of numbers, written in brace notation, that defines, in the form of a matrix, the individual images to be used in the image-map. The numbers refer to the translation-table of the associated tileset object. Default value: { }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> associated tileset - The name of a tileset object. This tileset will be used to render the tile-array. Default value: null tileset</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tile-width-override - A number that will be used to determine the width (before scaling) of the tiles in the image-map. Overrides any value provided by the associated tileset object. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tile-height-override - A number that will be used to determine the height (before scaling) of the tiles in the image-map. Overrides any value provided by the associated tileset object. Default value: 0</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec38>Section 11.8: Summary of the properties of direct image-maps</span></b></span></p>
    </p>

    <p> This section lists the properties of the direct image-map that are not shared by other image-map kinds. Direct image-maps also inherit the properties common to the image-map and the g-element kinds (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> figure-array - A list of lists of figure names, written in brace notation, that defines, in the form of a matrix, the individual images to be used in the image-map. Default value: { }</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tile-width - A number defining the width (before scaling) of each tile in the image-map. Default value: 1</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tile-height - A number defining the height (before scaling) of each tile in the image-map. Default value: 1</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec39>Section 11.9: Summary of the properties of rendered strings</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with rendered strings. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All rendered strings also inherit the properties common to the g-element kind (see above for those properties).</p>

    <p> Note that the alignment property functions differently for rendered strings than for other g-elements. For center-aligned and right-aligned rendered strings, the origin is always located along the upper edge of the element; not at the center or the bottom edge.</p>

    <p><blockquote><span class="indexdullblue"> associated font - a font object, which is the font that should be used to draw the rendered text element. A bitmap-rendered text must use a bitmap font, and an image-rendered font an image font.</span></blockquote>

    <p><blockquote><span class="indexdullblue"> text-string - an indexed text containing the string to be rendered by the element. Default value: &quot;&quot; (empty string, no output)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the letterforms and cursor of a bitmap-rendered string; defines only the cursor color of an image-rendered string. Default value: g-White</span></blockquote>

    <p><blockquote><span class="indexdullblue"> background tint - a glulx color value (see the Glulx Text Effects extension) that defines the color of the background of the rendered string element. Will be drawn as a single block of color behind the letterforms. Default value: g-PlaceNullCol (null, no background will appear)</span></blockquote>

    <p><blockquote><span class="indexdullblue"> text-animation delay - a number defining the number of milliseconds that will be delayed after the drawing of each character of the text-string. Default value: 0</span></blockquote>

    <p><blockquote><span class="indexdullblue"> cursor - a number defining the position of the cursor in the display of the rendered string. The cursor is only displayed when this property is 0 or higher. The cursor wil placed immediately after the string position; i.e., when cursor is 1, the cursor will be positioned immediately after the first character in the string. Default value: -99 (no cursor displayed)</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec40>Section 11.10: Summary of the properties of bitmap-rendered strings</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with bitmap-rendered strings. These are more or less equivalent to the properties of bitmap elements. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All bitmap-rendered strings also inherit the properties common to the g-element and rendered string kinds (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> bit-size - the size, relative to the canvas, of each bit in the bitmaps of the associated font's letterforms. For example, a bit-size of 2 will be two units wide and two units high. The bit-size is subject to scaling both by the scaling factor (or x-scaling factor) of the rendered-string, and by the window scaling factor. Default value: 1</span></blockquote>

    <p><blockquote><span class="indexdullblue"> dot-size** - the final display size of each bit in the bitmaps of the associated font's letterforms, measured in pixels as output on-screen. Default value: 1</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec41>Section 11.11: Summary of the properties of image-rendered strings</span></b></span></p>
    </p>

    <p> This section presents a list of the properties associated with image-rendered strings. Properties which the extension uses internally, and should not be referred to by the author, are marked with a double asterisk (**). All image-rendered strings also inherit the properties common to the g-element and rendered string kinds (see above for those properties).</p>

    <p><blockquote><span class="indexdullblue"> calculated scaling factor** - a real number (decimal with four-digit precision) that represents the scaling factor of both the window and the rendered string element.</span></blockquote>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec42>Chapter 12: Contact info</span></b></span></p>
    </p>

    <p> This extension is released under the Creative Commons Attribution licence. Bug reports, feature requests or questions should be made at &lt;https://github.com/i7/extensions/issues&gt;.</p>

    <p> For questions about Glimmr, please consider posting to either the rec.arts.int-fiction newsgroup or at the intfiction forum (http://www.intfiction.org/forum/). This allows questions to be public, where the answers can also benefit others.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec43>Chapter 13: Change Log</span></b></span></p>
    </p>

    <p> Version 4: Updated for 6M62 by Dannii Willis</p>

    <p> Version 3: Fixed minor bug in the buttons examples.</p>

    <p> Version 2: Updated for 6F95 (thanks to Harold Gates for his help!). Now uses no deprecated features.</p>

    <p> Version 1: Initial release.</p>

    <p><hr>
    <p><span class="indexdullred"><b><span id=docsec44>Chapter 14: Examples</span></b></span></p>
    </p>

    <p> A number of examples are included here, showcasing just some of the capabilities of Glimmr. Many of these require external resources (image files), which can be downloaded from http://code.google.com/p/glimmr-i7x/downloads/list. Compiled versions of the examples can also be downloaded, if you prefer to see the final result without compiling yourself.</p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg1><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">A</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Simple Buttons</span></b><br>
                <p>In this example, we show how to create a simple set of buttons that the player can press to issue commands. (We use the most important meta-commands: undo, save, restore, and transcript.) The example requires the Glimmr Image Font extension, and you will need to copy the images associated with that extension to your project's Materials folder before building this example. The example also requires Glimmr Graphic Hyperlinks, which enables the buttons to accept mouse input.</p>

            </td>
        </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0" class="extensionexample" width=100%>
        <tr>
            <td align="left" valign="top">
                <p></p>

                <p> We make each button out of two g-elements: a stroked rectangle primitive creates the button's outline and color, while an image-rendered string provides the text of the button. This is convenient, since it doesn't require us to create our own images for each button. (Though using a single image for each button is in fact the most resource-efficient method.)</p>

                <p> Before we get to the buttons, we need to set up the window and canvas. For an example like this, Glimmr Simple Graphics Window would be an even easier way to set things up, but it's better if we show everything here.</p>

                <p><blockquote><span class="indexdullblue"><img border=0 src=../../../doc_images/paste.png> &quot;Simple Buttons&quot;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Include Glimmr Canvas-Based Drawing by Erik Temple.<br>
                 Include Glimmr Graphic Hyperlinks by Erik Temple.<br>
                 Include Glimmr Image Font by Erik Temple.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Hello is a room.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The graphics-window is a graphlink g-window spawned by the main-window. The position is g-placebelow. The scale method is g-fixed-size. The measurement is 35. The back-colour is g-White.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The back-colour of the main-window is g-White.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The graphics-canvas is a g-canvas. The canvas-width is 248. The canvas-height is 35.<br>
                 The associated canvas of the graphics-window is the graphics-canvas.<br>
                 The associated canvas of a g-element is the graphics-canvas.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> When play begins:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; open up the graphics-window.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> After printing the banner text:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[line break]This is one of two very similar examples for the Glimmr Canvas-Based Drawing extension. It demonstrates a simple set of UI buttons. The buttons are not sprites. In other words, they are created without the need to make external PNG or JPEG images. Instead, we use Glimmr's functions for easily drawing rectangles and more complex elements. An image-rendered string provides the button's text, and this is superimposed on a stroked rectangle primitive that creates the body of the button. A simple animation allows the button to change color briefly when pressed, to provide visual feedback.[paragraph break]&quot;.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Table of Common Color Values (continued)</span><br>
                <table border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> glulx color value</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> assigned number
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> g-LightGray</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> 15066597
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> g-MidGray</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> 12829635</span>
                        </td>
                    </tr>
                </table>
                </blockquote>

                <p> Now we create the buttons. We begin by setting up most of properties using subclasses of the stroked rectangle primitive and image-based string kinds--these are the &quot;button&quot; and &quot;label&quot; kinds. The buttons are primed to accept mouse input by making them graphlink-active. The labels merely float over the button; it is the latter which does all the work.</p>

                <p> Note that the image-based font is rather large, and we need to scale it down to a quarter of its actual size. Also note that the labels are center-aligned. This isn't necessary, but it does mean that if we change the text of the label slightly, we may be able to avoid changing the origin coordinate, since it will still attempt to center itself over the button background. Finally, we use display-layers to keep the label text, on layer 2, above the button background, on layer 1 (the default layer).</p>

                <p><blockquote><span class="indexdullblue"><img border=0 src=../../../doc_images/paste.png> A button is a kind of stroked rectangle primitive. The associated canvas of a button is the graphics-canvas. The tint of a button is g-LightGray. The background tint of a button is g-MidGray. The graphlink status of a button is g-active.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> A label is a kind of image-rendered string. The associated canvas of a label is the graphics-canvas. The scaling factor of a label is 0.2500. The display-layer of a label is 2. The alignment of a label is center-aligned.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> A button has a label called the associated label.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Some labels are defined by the Table of Button Labels.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Table of Button Labels</span><br>
                <table border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> label</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> origin</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> text-string
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 30, 10 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;Undo&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_2</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 81, 10 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;Save&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_3</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 138, 10 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;Restore&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_4</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 204, 10 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;Transcript&quot;</span>
                        </td>
                    </tr>
                </table>
                </blockquote>

                <p><blockquote><span class="indexdullblue"> Some buttons are defined by the Table of Glimmr Buttons.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Table of Glimmr Buttons</span><br>
                <table border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> button</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> origin</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> endpoint</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> associated label</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> linked replacement-command
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Button_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 10, 7 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 52, 28 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_1</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;UNDO&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Button_2</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 61, 7 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 103, 28 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_2</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;SAVE&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Button_3</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 111, 7 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 165, 28 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_3</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;RESTORE&quot;
                        </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Button_4</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 173, 7 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> { 238, 28 }</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> Label_4</span>&nbsp;&nbsp;&nbsp;&nbsp;
                        </td>
                        <td align="left" valign="top">
                            <span class="indexdullblue"> &quot;TRANSCRIPT&quot;</span>
                        </td>
                    </tr>
                </table>
                </blockquote>

                <p> We can include a little optional code to change the color of the button momentarily when it is pressed, then reverting back to the original color. We do this using Glulx's real-time capability: when the button is pressed, we change the button's color, and start a short timer (85 milliseconds). When the timer runs out, we stop the timer and change the button back to the original color. Note that the window must be redrawn after each of these to show the state change to the player.</p>

                <p> The final line in the block intializes the current graphlink variable to Button_1 (the &quot;undo&quot; button). This is done so that, in the case where the first button pressed by the player is UNDO, the &quot;current graphlink&quot; value will hold a valid g-element (rather than null) after undoing; if the current graphlink doesn't store a button, the timer will go off after the action is undone and try to check the &quot;tint&quot; property of nothing (since the game state will have reverted to before the player pressed the button), resulting in an error.</p>

                <p><blockquote><span class="indexdullblue"><img border=0 src=../../../doc_images/paste.png> To revert the/-- button/-- after (T - a number) millisecond/milliseconds:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; (-  glk_request_timer_events({T});   -)</span></blockquote>

                <p><blockquote><span class="indexdullblue"> To stop the/-- timer:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; (-  glk_request_timer_events(0);  -)</span></blockquote>

                <p><blockquote><span class="indexdullblue"> First graphlink processing rule for a button (called the depressed):<br>
                &nbsp;&nbsp;&nbsp;&nbsp; change the tint of the depressed to g-MidGray;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; follow the window-drawing rules for the graphics-window;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; revert the button after 85 milliseconds.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> A glulx timed activity rule (this is the redraw button from timer rule):<br>
                &nbsp;&nbsp;&nbsp;&nbsp; stop the timer;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; now the tint of the current graphlink is g-LightGray;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; follow the window-drawing rules for the graphics-window.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The current graphlink is Button_1.</span></blockquote>

                <p> This last part is even more optional, but it will ensure that the button acts correctly after UNDO. We set the timer to revert immediately after undoing the state of the last turn, to be sure that the buttons end in their resting state. To act after undoing, we either have to directly hack the template layer, or use an extension such as Undo Output Control, which is how we handle it here.</p>

                <p><blockquote><span class="indexdullblue"><img border=0 src=../../../doc_images/paste.png> Include Undo Output Control by Erik Temple.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> After undoing an action:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; revert the button after 0 milliseconds.</span></blockquote>

                <p></p>

            </td>
        </tr>
    </table>
    <hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg2><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">B</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Simpler Buttons</span></b><br>
                <p>This example is a simple refinement of the previous example (Simple Buttons). In Simple Buttons, we had to supply what really was redundant information: the text of the label was the same as the linked replacement-command of its button, while the origin coordinate of the label is easily deducible from the placement and size of the button outline (the label is centered on the button). This example lets us define the labels minimally and auto-generate their text-strings and origin coordinates from their associated buttons. (One could go even farther with this approach, really, but this should be enough to suggest possibilities.)</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg3><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">C</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Basic Floorplan</span></b><br>
                <p>Given IF's overwhelming focus on movement through physical space, one of the most likely uses for graphics is maps. At the same time, it is not often that we want to include a static map in the game, since getting the complete map all at once will usually spoil things for the player.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg4><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">D</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Wandering Rhodes</span></b><br>
                <p>We want to show the player's location on a map, but the full map is so large that it leaves us unable to see details. This example explores one solution to this problem, displaying the full map in one graphics window, and showing a detail view, an inset, in a second window.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg5><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">E</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Roguelike-like</span></b><br>
                <p>This example uses image-maps and some sprites to create something that looks a lot like a roguelike dungeon-crawler. None of the actual game mechanics one would want in such a game are included, of course, but the basic techniques for display are provided.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg6><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">F</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Deal Me In</span></b><br>
                <p>This example illustrates a number of different techniques. We show how to change the contents of a graphics window at a stroke by changing canvases. We also construct a custom graphic element with rather complex behavior: rather than simply drawing a single entity, the element acts as a manager, interpreting and drawing game information using varied techniques, as needed.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p>
    <!--CONTENT ENDS-->
</body>
</html>
