<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Extension</title>
    <style type="text/css">
        <!--
        :root {
            color-scheme: light dark;
            --element-banner-background-colour: #eeeeee;
            --heading-panel-background-colour: #eeeeee;
            --heading-panel-text-colour: #222222;
            --heading-panel-succeeded-background-colour: #E6FFE6;
            --heading-panel-failed-background-colour: #f69Ca6;

            --heading-row-background-colour: #e0e0e0;
            --stripe-one-background-colour: #ffffff;
            --stripe-two-background-colour: #f3f6fa;

            --index-dull-red-colour: #800000;
            --periodic-table-sidebar-colour: #888;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: white;
            --library-card-title-colour: #803030;
            --library-card-other-colour: #303030;
            --index-more-box-background-colour: #e0e0e0;
            --index-activity-contents-background-colour: #e8e0c0;
            --registry-contents-link-colour: #202020;

        }

        @media (prefers-color-scheme: dark) {
          :root {
            --element-banner-background-colour: #444444;
            --heading-panel-background-colour: #444444;
            --heading-panel-text-colour: #ffffff;
            --heading-panel-succeeded-background-colour: #738073;
            --heading-panel-failed-background-colour: #7b4e53;

            --heading-row-background-colour: #707070;
            --stripe-one-background-colour: #7f7f7f;
            --stripe-two-background-colour: #797b7d;

            --index-dull-red-colour: #c00000;
            --periodic-table-sidebar-colour: #555;
            --periodic-table-sidebar-hover-colour: #222;
            --leaders-background-colour: black;
            --library-card-title-colour: #a05050;
            --library-card-other-colour: #505050;
            --index-more-box-background-colour: #444444;
            --index-activity-contents-background-colour: #727060;
            --registry-contents-link-colour: #ffffff;
            }
        }

        /* The default font (family) and size */

        body, p, td {
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 12px;
        }

        /* For fixed-point material within text, such as the typing on the Library Card index page */

        span.typewritten {
            font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;
            font-size: 13px;
        }

        /* For less important material: the small print */

        span.smaller {
            font-size: 80%;
        }

        /* The "heading panel" is the coloured box, high up on the page. The colours
        vary depending on the page: for example, the style on a report of a translation
        with no problems is "headingpanelsucceeded", usually green, but if there were
        problems then "headingpanelfailed" is used, which is usually red. "headingpanel"
        itself is a more neutral grey by default. "headingpanelDark" is an alternative
        look to make the extensions index pages have some visual contrast with the others;
        by default they are a darker grey. */

        .headingpanel {
            background: var(--heading-panel-background-colour);
        }
        .headingpanelsucceeded {
            background: var(--heading-panel-succeeded-background-colour);
        }
        .headingpanelfailed {
            background: var(--heading-panel-failed-background-colour);
        }
        .headingpanelalt {
            background: #808080;
        }

        /* Heading panels have two lines of text: an upper one in a larger size, and a
        lower one in a smaller. Again, the alt versions are meant to contrast.

            Report on Translation: Succeeded                <-- headingpaneltext
            Produced by Inform 10.1.0 (build 6U97)          <-- headingpanelrubric

            Installed Extensions                            <-- headingpaneltextalt
            Bundles of extra rules or phrases to...         <-- headingpanelrubricalt

        */

        span.headingpaneltext {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }
        span.headingpaneltextalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 20px;
            font-weight: bold;
        }

        span.headingpanelrubric {
            color: var(--heading-panel-text-colour);
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }
        span.headingpanelrubricalt {
            color: #ffffff;
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            font-size: 11px;
            font-weight: bold;
        }

        /* Horizontal rule styling */

        div.hr {
            border: 0;
            width: 100%;
            color: #707070;
            background-color: #707070;
            height: 5px;
        }

        /* This styles the (usually white) text of the example numbers written inside
        oval blobs in the extension documentation, which mimic the look of the in-app
        documentation. */

        .oval, .oval td {
            background-image:url('../../../doc_images/ovoid.png');
            color:white;
        }

        /* Styling used in the extension documentation indexes: */

        /* Used for extension names in the extensions pane of the app */

        span.extensioncensusentry {
            color: #ffffff;
        }

        span.extensionindexentry {
            color: #404040;
        }

        span.extensionindexerror {
            color: #ff8080;
        }

        /* This is used in extension documentation, where an example is presented
        in a slightly tinted box: */

        table.extensionexample {
        	background-color: #f0f0f0;
        }

        span.extensionexampleletter {
        	color: #202020;
        	font-size: 14px;
        	font-weight: bold;
        }

        /* Seen in problem messages: */

        span.problemred {
            color: #800000;
        }

        span.problemgreen {
            color: #008000;
        }

        span.phraseword {
            color: #808080;
        }

        span.phrasetokentext {
            color: #e00060;
        }

        span.phrasetokendesctext {
            color: #4040ff;
        }

        span.phrasetokenvaluetext {
            color: #ff4040;
        }

        /* Now we move on to styling used in the Index pages only: */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebarcolour {
            background: var(--periodic-table-sidebar-colour);
        }
        div.periodictablesidebar:hover {
            background: var(--periodic-table-sidebar-hover-colour);
        }

        /* The text of the element-abbreviation, such as "Lx" or "Ph", uses: */

        span.elementtext {
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        span.elementnumbertext {
            color: #ffffff;
            font-size: 7pt;
        }

        /* For the text of the element title, to the right of the element box: */

        span.elementtitletext {
            color: #ffffff;
            font-size: 9px;
            font-weight: bold;
        }

        /* The banner at the top of each element: */

        table.elementbanner {
            background: var(--element-banner-background-colour);
        }

        /* For the typewriting on the Library Card: */

        span.librarycardtitle {
            color: var(--library-card-title-colour);
        }

        span.librarycardother {
            color: var(--library-card-other-colour);
        }

        /* Generically used for "more details" boxes in the index: */

        table.indexmorebox {
        	background-color: var(--index-more-box-background-colour);
            border-radius: 8px;
        }

        /* But not for activity contents: */

        table.indexactivitycontents {
        	background-color: var(--index-activity-contents-background-colour);
            border-radius: 8px;
        }

        /* For responses in index entries about rules: */

        span.indexresponseletter {
            color: #ffffff;
            font-family: 'Courier New', Courier, monospace;
            background-color: #8080ff;
        }

        span.indexresponsetext {
            color: #000066;
        }

        /* Used ubiquitously throughout the index for unemphasised text: */

        span.indexblack {
        	color: #000000;
        }

        span.indexgrey {
        	color: #808080;
        }

        span.indexdarkgrey {
            color: #505050;
        }

        span.indexdullred {
            color: var(--index-dull-red-colour);
        }

        span.indexdullgreen {
            color: #008000;
        }

        span.indexdullblue {
            color: #000080;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used for the room squares in the World map in the Index (which is currently
        a table with one row of one column) */

        table.indexmaproom {
        	border-color: #000000;
        }

        /* Used in the numbering of levels of the World map in the Index */

        span.indexmaplevelnumbers {
        	color: #c0c0c0;
        }

        /* Used e.g. for title rows in the Chart of basic kinds in the Index */

        tr.headingrow {
        	background-color: var(--heading-row-background-colour);
        }

        /* Standard rows have black text on striped background colours, these being
        the usual ones seen in Mac OS X applications such as iTunes. */

        tr.stripeone {
        	background-color: var(--stripe-one-background-colour);
        }

        tr.stripetwo {
        	background-color: var(--stripe-two-background-colour);
        }

        tr.tintedrow {
        	background-color: #808080;
        }

        /* In the Figures index, this is the background colour used behind images
        (though in fact it will only be visible if the image fails to load, or uses
        transparency): */

        div.figureindexbox {
        	background-color: #6495ed;
        }

        /* To get the book-contents-page style leaders on the Contents element of
           the index to work, these must use the background colour of the body of
           the page, whatever that is: */

        ul.leaders li.leaded span:first-child {
            background: var(--leaders-background-colour);
        }
        ul.leaders li.leaded span + span {
            background: var(--leaders-background-colour);
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttontext {
        	font-size: 11px;
        	border-color: #000000;
        }

        span.registryminibuttontext {
        	font-size: 10px;
        	border-color: #000000;
        }

        span.registrybuttonuninstalled {
        	color: #000000;
        	background: #ffffdd;
        }

        span.registrybuttoninstalled {
        	color: #000000;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonbuiltin {
        	color: #888888;
        	background: #ffffff;
        	pointer-events: none;
        }

        span.registrybuttonupdate {
        	color: #000000;
        	background: #aaddff;
        }

        span.registrybuttonrevert {
        	color: #000000;
        	background: #ddaaff;
        }

        span.registrybuttonrevealer {
        	color: #ffffff;
        	background: #444444;
        }

        /* Registry index section headings: */

        span.registrysectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        }
        span.registrysubsectionname {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        }

        /* These are for the "mark" for a section, usually a section-symbol and number */

        span.registrysectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 16px;
        	line-height: 18px;
        	color: #666;
        }
        span.registrysubsectionmark {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 14px;
        	line-height: 16px;
        	color: #666;
        }

        /* Text of an item listed in a registry: */

        span.registryitemtext {
        	font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
        	-webkit-font-smoothing: antialiased;
        	font-size: 12px;
        	line-height: 16px;
        }

        /* And how the links in a registry index page behave: */

        a.registrysilentlink {
        	text-decoration: none;
        	color: #000;
        }
        a.registrybuttonlink {
        	text-decoration: none;
        }
        a.registrycontentslink:link {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:visited {
        	text-decoration: none;
        	color: var(--registry-contents-link-colour);
        }
        a.registrycontentslink:hover {
        	text-decoration: none;
        	color: #D00000;
        }
        a.registrycontentslink:active {
        	text-decoration: none;
        	color: #D00000;
        }

        -->
    </style>
    <style type="text/css">
        <!--
        /* (1) General layout material */

        *, *:before, *:after {
        	-moz-box-sizing: border-box;
        	-webkit-box-sizing: border-box;
        	box-sizing: border-box;
        }
        .headingpanellayout {
        	position: relative;
        	height: 56px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingpanellayoutdeeper {
        	position: relative;
        	height: 117px;
        	padding: 0px;
        	white-space:nowrap;
        }
        .headingtext {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 10px 0px 10px;
        }
        .headingrubric {
        	position: absolute;
        	top: 36px;
        	width: 100%;
        	padding: 0px 10px 0px 10px;
        }
        h3.tighter {
        	margin-top: 0px;
        }
        p.hang {
        	padding-left: 25px;
        	text-indent: -25px;
        	margin-top: 0px;
        	margin-bottom: 0px;
        }
        p.in1 {
        	padding-left: 0px;
        }
        p.tightin1 {
        	padding-left: 0px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin1 {
        	padding-left: 0px;
        	margin-bottom: 2px;
        }
        p.hangingin1 {
        	padding-left: 50px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in2 {
        	padding-left: 25px;
        }
        p.tightin2 {
        	padding-left: 25px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin2 {
        	padding-left: 25px;
        	margin-bottom: 2px;
        }
        p.hangingin2 {
        	padding-left: 75px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in3 {
        	padding-left: 50px;
        }
        p.tightin3 {
        	padding-left: 50px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin3 {
        	padding-left: 50px;
        	margin-bottom: 2px;
        }
        p.hangingin3 {
        	padding-left: 100px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in4 {
        	padding-left: 75px;
        }
        p.tightin4 {
        	padding-left: 75px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin4 {
        	padding-left: 75px;
        	margin-bottom: 2px;
        }
        p.hangingin4 {
        	padding-left: 125px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in5 {
        	padding-left: 100px;
        }
        p.tightin5 {
        	padding-left: 100px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin5 {
        	padding-left: 100px;
        	margin-bottom: 2px;
        }
        p.hangingin5 {
        	padding-left: 150px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in6 {
        	padding-left: 125px;
        }
        p.tightin6 {
        	padding-left: 125px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin6 {
        	padding-left: 125px;
        	margin-bottom: 2px;
        }
        p.hangingin6 {
        	padding-left: 175px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in7 {
        	padding-left: 150px;
        }
        p.tightin7 {
        	padding-left: 150px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin7 {
        	padding-left: 150px;
        	margin-bottom: 2px;
        }
        p.hangingin7 {
        	padding-left: 200px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in8 {
        	padding-left: 175px;
        }
        p.tightin8 {
        	padding-left: 175px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin8 {
        	padding-left: 175px;
        	margin-bottom: 2px;
        }
        p.hangingin8 {
        	padding-left: 225px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }
        p.in9 {
        	padding-left: 200px;
        }
        p.tightin9 {
        	padding-left: 200px;
        	margin-top: 2px;
        	margin-bottom: 2px;
        }
        p.halftightin9 {
        	padding-left: 200px;
        	margin-bottom: 2px;
        }
        p.hangingin9 {
        	padding-left: 250px;
        	text-indent: -50px;
        	margin-top: 0px;
        	margin-bottom: 1px;
        }

        /* (2) Index page layout material */

        /* The periodic table display has "sidebars", usually grey and taller than they
        are wide; they contain no text. */

        div.periodictablesidebar {
        	height: 56px;
        	width: 16px;
        }
        .periodictablesidebar a:link { text-decoration: none; }
        .periodictablesidebar a:visited { text-decoration: none; }
        .periodictablesidebar a:active { text-decoration: none; }

        /* The "element boxes" are the cells appearing in the periodic-table display
        on the welcome page of the index: */

        .elementbox {
        	position: relative;
        	height: 56px;
        	width: 56px;
        	padding: 0px;
        }

        .elementbox a:link { text-decoration: none; }
        .elementbox a:visited { text-decoration: none; }
        .elementbox a:active { text-decoration: none; }
        .elementbox a:hover { text-decoration: none; }
        .elementbox:hover {
        	opacity: 0.6;
        }

        /* The "small element boxes" look like those, but are smaller, and used on
        the headings of the content which those original boxes link to: */

        .smallelementbox {
        	position: relative;
        	height: 40px;
        	width: 40px;
        	padding: 0px;
        }

        .smallelementbox a:link { text-decoration: none; }
        .smallelementbox a:visited { text-decoration: none; }
        .smallelementbox a:active { text-decoration: none; }
        .smallelementbox a:hover { text-decoration: none; }
        .smallelementbox:hover {
        	opacity: 0.6;
        }

        /* This is a class for the links formed by the element boxes: */

        a.elementlink {
        	position: absolute;
        	top: -4px;
        	left: -1px;
        	width: 100%;
        	padding: 14px 0px 14px 1px;
        	text-align: center;
        }

        /* Similarly for the "atomic number" - a single digit - in the top left corner
        of these boxes: */

        div.elementnumber {
        	position: absolute;
        	top: 1px;
        	left: 3px;
        	text-align: left;
        }

        /* For the text of the element title, to the right of the element box: */

        div.elementtitle {
        	position: absolute;
        	top: 35px;
        	width: 100%;
        	text-align: center;
        }

        /* Used for the book-contents-page style leaders on the Contents element of
           the index: */

        ul.leaders {
        	padding: 0;
        	margin-top: 1px;
        	margin-bottom: 0;
        	overflow-x: hidden;
        	list-style: none}
        ul.leaders li.leaded:before {
        	float: left;
        	width: 0;
        	white-space: nowrap;
        	content:
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "
        	".  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  "}
        ul.leaders li.leaded span:first-child {
        	padding-right: 0.33em;
        }
        ul.leaders li.leaded span + span {
        	float: right;
        	padding-left: 0.33em;
        }
        li.indent1 span:first-child {
        	padding-left: 25px;
        }
        li.indent2 span:first-child {
        	padding-left: 50px;
        }
        li.indent3 span:first-child {
        	padding-left: 75px;
        }
        li.indent4 span:first-child {
        	padding-left: 100px;
        }
        li.indent5 span:first-child {
        	padding-left: 125px;
        }
        li.indent6 span:first-child {
        	padding-left: 150px;
        }
        li.indent7 span:first-child {
        	padding-left: 175px;
        }
        li.indent8 span:first-child {
        	padding-left: 200px;
        }
        li.indent9 span:first-child {
        	padding-left: 225px;
        }

        li.unleaded:before {
        	content: "";
        }

        /* On Registry index pages (such as the Public Library), these are used for
        download buttons and the like: */

        span.registrybuttons {
        	height: 20px;
        	padding: 2px 8px 2px 8px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 5px;
        }

        span.registryminibuttons {
        	height: 14px;
        	padding: 2px 5px 2px 5px;
        	margin: 2px;
        	border:1px solid;
        	border-radius: 4px;
        }

        /* Used to hide or display sections in the Registry pages: */

        div.registrysectionitemsopen {
        	display: block;
        }

        div.registrysectionitemsclosed {
        	display: none;
        }

        /* Hanging indentation for Registry item paragraphs: */

        p.registryitem {
        	padding-left: 80px;
        	text-indent: -40px;
        }

        p.registryaddition {
        	padding-left: 40px;
        	text-indent: -40px;
        }

        -->
    </style>
    <script type="text/javascript">
        function project() {
            return window.Project;
        }
        function showExtra(id, imid) {
        	if (document.getElementById(id).style.display == 'block') {
        		document.getElementById(id).style.display = 'none';
        		document.getElementById(imid).src = 'inform:/extra.png';
        	} else {
        		document.getElementById(id).style.display = 'block';
        		document.getElementById(imid).src = 'inform:/extraclose.png';
        	}
        }
        function openExtra(id, imid) {
        	document.getElementById(id).style.display = 'block';
        	document.getElementById(imid).src = 'inform:/extraclose.png';
        }
        function closeExtra(id, imid) {
        	document.getElementById(id).style.display = 'none';
        	document.getElementById(imid).src = 'inform:/extra.png';
        }
        function pasteCode(code) {
            var myProject = project();

            myProject.selectView('source');
            myProject.pasteCode(code);
        }

    </script>
</head>
<body>
    <!--CONTENT BEGINS-->
    <table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table>

    <p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Undo Output Control<span class="extensionindexentry"> by </span>Nathanael Nerode</b></p>
    <p><span class="smaller">Version 6.0.220529</span></p>
    <p>Provides hooks into UNDO processing, including multiple ways to suspend UNDO temporarily, to place limitations on UNDO (such as allowing only one UNDO in a row), to undo the current turn from code, and to control when the game state is saved. Using the latter, we can effectively control which turn UNDO returns us to.  Also allows the story to edit a blank command before analyzing it.  Updated to Inform 10.1.</p>
    <p></p>
    <hr>
    <p><span class="indexblack"><a style="text-decoration: none" href=#docsec1>Section 1: </span>Output rules<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec2>Section 2: </span>Undo suspension<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec3>Section 3: </span>Removing the option to UNDO at the end of the game<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec4>Section 4: </span>Temporary suspension of game state saving<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec5>Section 5: </span>Changing vocabulary for UNDO and OOPS<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec6>Section 6: </span>Undoing the current turn<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec7>Section 7: </span>Repairing an empty command<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec8>Section 8: </span>Extension not compatible with Conditional Undo by Jesse McGrew<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec9>Section 9: </span>Using this extension with Unified Glulx Input by Andrew Plotkin<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec10>Section 10: </span>Changelog<br>
    <span class="indexblack"><a style="text-decoration: none" href=#docsec11>Section 11: </span>Examples<br>
    <br>
    <b>Examples</b><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Undo Output Control-eg1.html#eg1">A &mdash; Mynah Undo</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Undo Output Control-eg2.html#eg2">B &mdash; I Love the Sound of Breaking Glass</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Undo Output Control-eg3.html#eg3">C &mdash; Purgatory</span><br>
    &nbsp;&nbsp;&nbsp;<span class="indexblack"><a style="text-decoration: none" href="Undo Output Control-eg4.html#eg4">D &mdash; Purgatory II</span><br>
    </p>
    <hr>
    <p></p>
    </p>

    <p> Undo Output Control patches the I6 template routines Keyboard (); and Perform_Undo (); so that we can use I7 rulebooks to hook into the UNDO command. These allow us to do anything we like--write new messages for UNDO responses and error text, keep track of variables (partially) independently of the game state as restored by UNDO, and even suspend UNDO programmatically.</p>

    <p><p><span class="indexblack"><b><span id=docsec1>Section 1: Output rules</span></b></span></p>
    </p>

    <p> The basic rulebooks provided by Undo Output Control are:</p>

    <p><blockquote><span class="indexdullblue"> (1) before undoing an action rules<br>
     (2) after undoing an action rules<br>
     (3) report undoing an action rules</span></blockquote>

    <p> These rulebooks provide hooks into the following &quot;moments&quot; in the UNDO process: (1) before testing whether UNDO is allowed/possible; (2) after an action has been _successfully_ undone; and (3) after an action has been successfully undone but immediately before it is reported, optionally allowing us to replace Inform's default output with our own. The report undoing an action rules should end explicitly in either success or failure. The rulebook will end in failure by default, which means that Inform's default reporting for UNDO will be printed. If you want to substitute Inform's reporting with your own, end your report undoing an action rule with &quot;rule succeeds&quot; or equivalent (see the example for a demonstration).</p>

    <p> The same is true of the more specialized rules:</p>

    <p><blockquote><span class="indexdullblue"> report prevented undo rules<br>
     report interpreter-undo-incapacity rules<br>
     report interpreter undo failure rules<br>
     report nothing to be undone failure rules</span></blockquote>

    <p> All of these also require a rule to end explicitly with &quot;success&quot; in order to replace the default output.</p>

    <p> A number of rules are provided as &quot;before&quot; and &quot;after&quot; counterparts of these rules:</p>

    <p><blockquote><span class="indexdullblue"> before prevented undo rules<br>
     after prevented undo rules<br>
     before interpreter-undo-incapacity rules<br>
     after interpreter-undo-incapacity rules<br>
     before interpreter undo failure rules<br>
     after interpreter undo failure rules<br>
     before nothing to be undone failure rules<br>
     after nothing to be undone failure rules</span></blockquote>

    <p> The before, after, and report prevented undo rules apply only when Inform's built-in use undo prevention option is enabled.</p>

    <p> It should be emphasized that, though these rules look like standard action rulebooks, they are not. UNDO is not an action, and these rules are limited to imitating the appearance of action rules. This is why &quot;check undoing&quot; and &quot;instead of undoing&quot; rulebooks are not provided. We have hooks into the output, but little else.</p>

    <p> However, it should be noted that when the before undoing an action rulebook ends in explicit failure, undo will be prevented from occurring; this is one way (perhaps the simplest) of disabling UNDO. An example:</p>

    <p><blockquote><span class="indexdullblue"> Before undoing an action when the player is tired:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; say &quot;You are too tired to bend space-time to your will.&quot;;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; rule fails.</span></blockquote>

    <p> The &quot;Breaking Glass&quot; example provides examples of ways to use both the before and after undoing entry points to accomplish interesting effects.</p>

    <p><p><span class="indexblack"><b><span id=docsec2>Section 2: Undo suspension</span></b></span></p>
    </p>

    <p> Undo Output Control provides a second mechanism for suspending UNDO. To turn UNDO on and off at will, we simply use these phrases:</p>

    <p><blockquote><span class="indexdullblue"> suspend undo<br>
     reinstate undo</span></blockquote>

    <p> Note that these will not function if we have used Inform's built-in undo prevention, which functions globally.</p>

    <p> We can also test whether UNDO is disabled using the &quot;if undo is suspended&quot; condition.</p>

    <p> Finally, a rulebook is provided that allows us to control the reporting of a failed attempt to UNDO while undo is suspended:</p>

    <p><blockquote><span class="indexdullblue"> report attempt to undo-while-disabled rules</span></blockquote>

    <p> By default, these rules print the message &quot;That action cannot be undone.&quot;</p>

    <p> Be warned that if the player types UNDO immediately after you have reinstated it, there may be unexpected behavior, as the game can revert to the suspended state, but in such a way that the report attempt to undo-while-disabled rules do not fire.</p>

    <p><p><span class="indexblack"><b><span id=docsec3>Section 3: Removing the option to UNDO at the end of the game</span></b></span></p>
    </p>

    <p> Note that the &quot;before undoing an action rule&quot; is NOT consulted after the game has finished, so we will not be able to use it to block UNDO at that point. Instead, we should simply remove UNDO from the list of options that are presented at the end of the game (&quot;Would you like to RESTART, RESTORE a saved game, QUIT or UNDO the last command?&quot;). We can do so by removing it from the Table of Final Question Options, like this:</p>

    <p><blockquote><span class="indexdullblue"> When play begins:<br>
    &nbsp;&nbsp;&nbsp;&nbsp; choose row with a final response rule of immediately undo rule in the Table of Final Question Options;<br>
    &nbsp;&nbsp;&nbsp;&nbsp; delete the final question wording entry.</span></blockquote>

    <p> This can be done conditionally if needed. We just need to delete the table row before the command to end the game.</p>

    <p><p><span class="indexblack"><b><span id=docsec4>Section 4: Temporary suspension of game state saving</span></b></span></p>
    </p>

    <p> Each turn, after the player has entered a command but before the command is parsed, Inform saves the state of the game into memory. This is the saved state to which the next UNDO command will revert. (When it comes back it will get a new command from the command line.) We can stop the game from saving the undo state, if desired. Once we've disabled saving, an UNDO typed later will revert back to the last saved state. If there are no saved undo states available, a message will print (&quot;You cannot undo any further&quot; by default).</p>

    <p> Undo Output Control provides the following phrases for controlling undo saves:</p>

    <p><blockquote><span class="indexdullblue"> disable saving of undo state<br>
     enable saving of undo state</span></blockquote>

    <p> See the &quot;Purgatory&quot; example below for a demonstration of how this feature might be used.</p>

    <p><p><span class="indexblack"><b><span id=docsec5>Section 5: Changing vocabulary for UNDO and OOPS</span></b></span></p>
    </p>

    <p> As was mentioned above, UNDO is not an action. Along with OOPS, it is handled before the player's command is actually parsed. To decide whether the player has typed either of these commands, Inform looks at the first word--only! --of the player's input and compares it to a character string (defined as an I6 constant).</p>

    <p> In v10 of Inform, there is a clean way to do this. There are three &quot;undo words&quot; and three &quot;oops words&quot;. This is how to replace them (with their default values noted):</p>

    <p><blockquote><span class="indexdullblue"> Include (- 
    		Constant UNDO1__WD = 'undo';
    	 -) replacing &quot;UNDO1__WD&quot;<br>
     Include (- 
    		Constant UNDO2__WD = 'undo';
    	 -) replacing &quot;UNDO2__WD&quot;<br>
     Include (- 
    		Constant UNDO3__WD = 'undo';
    	 -) replacing &quot;UNDO3__WD&quot;<br>
     Include (- 
    		Constant OOPS1__WD = 'oops';
    	 -) replacing &quot;OOPS1__WD&quot;<br>
     Include (- 
    		Constant OOPS2__WD = 'o//';
    	 -) replacing &quot;OOPS2__WD&quot;<br>
     Include (- 
    		Constant OOPS3__WD = 'oops';
    	 -) replacing &quot;OOPS3__WD&quot;</span></blockquote>

    <p> Note that oops word #2 is a single-letter abbreviation; two forward slashes are required after single-letter words for Inform to understand them.</p>

    <p> If the word contains a space, it will never be matched, as follows; this can be used to disable oops:<blockquote><span class="indexdullblue"> Include (- 
    		Constant OOPS2__WD = ' x';
    	 -) replacing &quot;OOPS2__WD&quot;</span></blockquote>

    <p> There was not a clean way to do this in earlier versions, and so older versions of this extension provided one. If you were using the &quot;to decide which value is undo word #3&quot; facility from a previous version of this extension, please update your code.</p>

    <p><p><span class="indexblack"><b><span id=docsec6>Section 6: Undoing the current turn</span></b></span></p>
    </p>

    <p> While UNDO is not an action, it is possible to trigger undo from an action. Under the hood, Inform saves the game after reading a command but before parsing it. UNDO then restores to this point, with a signal to read a new command. Inform must do the save very early in the command processing cycle in order to avoid any accidental side-effects in author-written parsing or action processing routines. However, UNDO (and OOPS) have to be processed before this save; otherwise they will restore to just before the player typed &quot;UNDO&quot;, rather than before the previous command!</p>

    <p> However, you can use this to your advantage. If at the end of a very long and complicated turn which changed a lot of world state, you decide the player probably shouldn't have done that, you can issue an undo order and restore the game to just before the player issued that command. This will undo the current turn -- not the previous turn.</p>

    <p><blockquote><span class="indexdullblue"> undo the current turn;</span></blockquote>

    <p> This can be combined with &quot;disable saving of undo state&quot;, as demonstrated in &quot;Purgatory II&quot;.</p>

    <p> You can also prevent the player from undoing and still use this in your code.</p>

    <p><p><span class="indexblack"><b><span id=docsec7>Section 7: Repairing an empty command</span></b></span></p>
    </p>

    <p> This version integrates the extension Empty Command Handling by Daniel Stelzer, based on code by Matt Weiner. Because Empty Command Handling replaces the same underlying library code as Undo Output Control, it cannot be used with Empty Command Handling; so the entirety of the extension has been integrated.</p>

    <p> This extension adds a new activity, &quot;repairing an empty command&quot;. When the player presses ENTER at the prompt, without typing anything, the &quot;repairing an empty command&quot; activity will be run before showing the parser error. This can be used to give better responses to empty input without hacking into the response system.</p>

    <p> For instance:</p>

    <p> Rule for repairing an empty command: change the text of the player's command to &quot;look&quot;.</p>

    <p> This happens early enough in parsing that even special commands like &quot;undo&quot; and &quot;oops&quot;, or a sequence of commands separated by periods, can be inserted.</p>

    <p><p><span class="indexblack"><b><span id=docsec8>Section 8: Extension not compatible with Conditional Undo by Jesse McGrew</span></b></span></p>
    </p>

    <p> The current version of this extension is no longer compatible with Jesse McGrew's Conditional Undo extension, which doesn't compile with Inform v10.1 anyway. Everything in Conditional Undo can be done by this extension but the interface is substantially different.</p>

    <p><p><span class="indexblack"><b><span id=docsec9>Section 9: Using this extension with Unified Glulx Input by Andrew Plotkin</span></b></span></p>
    </p>

    <p> Unified Glulx Input support is UNTESTED in Inform v10.1 and is quite likely to be broken.</p>

    <p> Unified Glulx Input has its own method for turning UNDO on and off; these all work, as do the methods in this extension.</p>

    <p> Unified Glulx Input has its own (superior) method for dealing with blank lines; &quot;repairing an empty command&quot; is not implemented.</p>

    <p><p><span class="indexblack"><b><span id=docsec10>Section 10: Changelog</span></b></span></p>
    </p>

    <p><blockquote><span class="indexdullblue"> 6.0.220529: Example cleanups idenified by automated testing.<br>
     6.0.220527: Example cleanups to facilitate automated testing.<br>
     v6 - Update to Inform v10.1.0. (Nathanael Nerode.) Eliminate compatibility with Conditional Undo by Jesse McGrew. Eliminate &quot;undo word #1&quot; in favor of new &quot;Include (- -) replacing UNDO1__WD&quot; syntax.<br>
     v5 - Add &quot;undo the current turn&quot;, documentation, and example. (Nathanael Nerode) Integrate Empty Command Handling by Daniel Stelzer. Make compatible with Unified Glulx Input.<br>
     v4 - Substantial updates by Nathanael Nerode. Update to 6M62. Fix bugs. Improve documentation.<br>
     v3 - Removed unnecessary check of the &quot;before undoing an action&quot; rulebook at the end of the game. This caused an UNDO typed at the end of the game to fail silently.<br>
     v2 - Added suspension of game state saving and the Breaking Glass and Purgatory examples. Also added the ability to change word constants. Fixed minor bug in operation of undo suspension.<br>
     v1 - Initial release.</span></blockquote>

    <p><p><span class="indexblack"><b><span id=docsec11>Section 11: Examples</span></b></span></p>
    </p>

    <p><blockquote><span class="indexdullblue"> All the examples are by Erik Temple from the original Undo Output Control.</span></blockquote>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg1><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">A</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Mynah Undo</span></b><br>
                <p>Presents report rules that reproduce Inform's default output.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg2><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">B</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">I Love the Sound of Breaking Glass</span></b><br>
                <p>This example shows how to rework the output for UNDO using &quot;report undoing an action&quot;, as well as how to limit both the total number of UNDOs available and the number of consecutive UNDOs allowed.</p>

            </td>
        </tr>
    </table>
    <table border="0" cellspacing="0" cellpadding="0" class="extensionexample" width=100%>
        <tr>
            <td align="left" valign="top">
                <p></p>

                <p> Limiting the total number of UNDOs available is simple. After undoing an action, we decrease the number of UNDOs available. Before undoing an action, we check to see whether there are any UNDOs left. However, this method will only work if the player is limited to one UNDO in a row; otherwise, the game state will be turned back another turn and Inform will &quot;forget&quot; that it had decremented the count. (One solution to this for Glulx games might be to write the number of UNDOs available to an external file, where the value can be tracked independently of the game state.)</p>

                <p> To limit the player to taking back just one turn, we use a global variable, &quot;current turn undone&quot;. We set this variable to true in the &quot;after undoing an action&quot; rules, and then, if the player tries another UNDO, we can stop it with a &quot;before undoing an action when current turn undone is true&quot; rule. In the every turn rules, which run at the end of a normal turn, we reset the current turn undone variable to false, allowing the player to UNDO once again.</p>

                <p> Note that Inform saves the game state even for out-of-world actions, so if the player types SCORE and then UNDO, we only undo as far as the game state before SCORE was typed.</p>

                <p><blockquote><span class="indexdullblue"><img border=0 src=../../../doc_images/paste.png> &quot;I Love the Sound of Breaking Glass&quot;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> The story author is &quot;Erik Temple&quot;.<br>
                 The release number is 3.<br>
                 Include Undo Output Control by Nathanael Nerode.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Report undoing an action:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[bracket]Previous turn undone.[close bracket][line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; try looking;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; rule succeeds.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Current turn undone is a truth state variable. Current turn undone is false.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> After undoing an action:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; decrease UNDOs remaining by 1;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; now current turn undone is true.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Before undoing an action when UNDOs remaining is less than 1:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[bracket]You have used all of your allotted UNDOs![close bracket][line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; rule fails.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Before undoing an action when current turn undone is true:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;[bracket]More than one consecutive UNDO is disallowed.[close bracket][line break]&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; rule fails.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Every turn:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; now current turn undone is false.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> UNDOs remaining is a number variable. UNDOs remaining is 3.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> When play begins:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;Whew, there's a lot of glass in here! A kid like you could get in a lot of trouble in a place like this. Luckily, you've got [UNDOs remaining in words] chances to UNDO any problems you cause! Be careful, though, as you can only UNDO one turn in a row.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; now the right hand status line is &quot;UNDOs left: [UNDOs remaining]&quot;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Laboratory is a room.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> A glasswork is a kind of thing. A beaker, a pipette, a test tube, and a graduated cylinder are glassworks in the Laboratory.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Attacking a glasswork is reckless behavior. Dropping a glasswork is reckless behavior. Inserting a glasswork into is reckless behavior. Throwing a glasswork at is reckless behavior. Squeezing a glasswork is reckless behavior. Pushing a glasswork is reckless behavior. Pulling a glasswork is reckless behavior. Turning a glasswork is reckless behavior. Swinging a glasswork is reckless behavior. Rubbing a glasswork is reckless behavior. Cutting a glasswork is reckless behavior. Examining a glasswork is reckless behavior.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> Instead of reckless behavior:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;The [noun] shatters into thousands of pieces.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; now the noun is nowhere;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if the pile of broken glass is in the Laboratory:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[line break]The pile of broken glass is now a bit higher.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[line break]The pile of broken glass glints in the light.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; move the pile of broken glass to the Laboratory.</span></blockquote>

                <p><blockquote><span class="indexdullblue"> A pile of broken glass is a thing. Instead of doing anything to the pile of glass, say &quot;Looks dangerous, better keep away.&quot;</span></blockquote>

                <p><blockquote><span class="indexdullblue"> At 9:05 am:<br>
                &nbsp;&nbsp;&nbsp;&nbsp; say &quot;Without warning, your dad enters the lab. &quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; if broken glass is in the Laboratory:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;His eyes dart to the pile of broken glass at your feet.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end the story finally saying &quot;You are in deep trouble&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;He looks at each of the glass containers in turn, then smiles when he realizes that you managed to stay in here alone for five whole minutes without breaking a single one.&quot;;<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end the story finally saying &quot;You have made your father proud&quot;</span></blockquote>

                <p></p>

            </td>
        </tr>
    </table>
    <hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg3><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">C</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Purgatory</span></b><br>
                <p>Illustrates how to suspend and reinstate the saving of undo states. The player is presented with a bottle of poison. If she drinks it, she will die within a certain number of turns. We suspend saving of the undo state on the drinking of the bottle, though, so that the player need type UNDO only once to return to the turn before drinking the poison, no matter how many turns have passed since.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p><hr>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td halign="left" valign="top" cellpadding=0 cellspacing=0 width=38px>
                <span id=eg4><table border="0" cellspacing="0" cellpadding="0">
                    <tr class="oval">
                        <td width=38px height=30px align="left" valign="center">
                            <div class="paragraph Body" style="line-height: 1px; margin-bottom: 0px; margin-top: 0px; padding-bottom: 0pt; padding-top: 0px; text-align: center;">
                                <span class="extensionexampleletter">D</span></div>
                            
                        </td>
                    </tr>
                </table>
                </span>
            </td>
            <td cellpadding=0 cellspacing=0 halign="left" valign="top">
                <img border="0" src='../../../doc_images/asterisk.png'><img border="0" src='../../../doc_images/asterisk.png'><b><span class="indexdarkgrey">&nbsp;Example&nbsp;</span><span class="indexblack">Purgatory II</span></b><br>
                <p>As an additional enhancement, we make an automatic undo attempt after the player has died.</p>

            </td>
        </tr>
    </table>
    </p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p></p>

    <p>
    <!--CONTENT ENDS-->
</body>
</html>
