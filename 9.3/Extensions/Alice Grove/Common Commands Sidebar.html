<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table><p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Common Commands Sidebar<font color="#404040"> by </font>Alice Grove</b><p><small></small><p><p><hr><p>
<p>
 Chapter: Acknowledgements
<p>
 Thanks to Joseph Geipel, Andrew Schultz, and Nick Turner for testing, to Björn Paulsen for code feedback, and to Björn Paulsen, Daniel Stelzer, Dannii Willis, Erik Temple, Hanon Ondricek, Joseph Geipel, Juhana, Matt Weiner, Peter Piers, and zarf for responding to my questions.
<p>
 This extension is inspired by 'How To Play Interactive Fiction: An entire strategy guide on a single postcard' written by Andrew Plotkin and designed by Lea Albaugh. The postcard, available at &lt;http://pr-if.org/doc/play-if-card/&gt;, is licensed under a CC BY SA 3.0 United States license, available at &lt;http://creativecommons.org/licenses/by-sa/3.0/us/&gt;. Content from the postcard has been adapted with permission.
<p>
 Modifications from the original postcard:
<p>
<blockquote><font color="#000080"> * Adapted to extension form with Inform code and documentation.<br> * Layout changed to vertical window.<br> * Changed colors.<br> * New heading.<br> * Condensed the list of commands and added extension-specific commands.<br> * Changes to wording, arrangement, and text formatting of commands.<br> * Explanations and other text omitted.<br> * Compass rose represented in text; other graphical elements omitted.</font></blockquote>
<p>
 Chapter: Basics
<p>
 Section: About the Required Extensions
<p>
 Common Commands Sidebar requires
<p>
<blockquote><font color="#000080"> Version 15/161003 of Flexible Windows (for Glulx only) by Jon Ingold</font></blockquote>
<p>
<blockquote><font color="#000080"> http://raw.githubusercontent.com/i7/extensions/master/Jon%20Ingold/Flexible%20Windows.i7x</font></blockquote>
<p>
 which in turn requires various other extensions that can be found at https://github.com/i7/extensions. See Flexible Windows for the version numbers required.
<p>
 (Basic Screen Effects is also required, but any relatively recent version will do.)
<p>
 Note that Flexible Windows uses the container relation for windows, so we'll need to be cautious about iterating through all containers. Also note that Spatterlight is liable to crash when Flexible Windows is used. If Common Commands Sidebar detects Spatterlight, the player will be warned to switch interpreters.
<p>
 Section: Bare Minimum Implementation
<p>
 If we want the default appearance and behavior for the sidebar, the only thing we need to do is to include the following line in our source:
<p>
<blockquote><font color="#000080"> Include Common Commands Sidebar by Alice Grove.</font></blockquote>
<p>
 Everything else is optional.
<p>
 Section: Toggling the Sidebar from a Full-Screen Menu
<p>
 When we open a full-screen menu created with Menus by Emily Short or Menus by Wade Clarke, the sidebar, if visible, will be automatically hidden. It will also be flagged so that, once the menu closes, the sidebar will automatically be shown again. To allow toggling the sidebar from inside the menu, we can write a toggle rule to set the sidebar property
<p>
<blockquote><font color="#000080"> flagged to appear later</font></blockquote>
<p>
 as in the &quot;Lost in 'Lost Igpay'&quot; example.
<p>
 Chapter: Options
<p>
 Section: Built-in Options
<p>
 Many of the options can be set with a single rule, for example
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; prepare the command sidebar, shown automatically, on the right, with italic type.</font></blockquote>
<p>
 The first part of the rule
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; prepare the command sidebar,</font></blockquote>
<p>
 is followed by one or more of the phrases below, separated by commas. Within each of the following code blocks, phrases are mutually exclusive--including both &quot;prompted automatically&quot; and &quot;shown automatically,&quot; for instance, will result in only one of these options taking effect. (See the section on debugging.)
<p>
 The sidebar can be introduced in one of three ways:
<p>
<blockquote><font color="#000080"> prompted automatically<br> shown automatically<br> shown manually</font></blockquote>
<p>
 &quot;Prompted automatically,&quot; the default setting, prompts the player to choose whether or not to show the sidebar. &quot;Shown automatically&quot; displays the sidebar without giving the player a choice. &quot;Shown manually&quot; keeps the sidebar hidden until it is shown manually (for instance, if the player types SIDEBAR ON).
<p>
 The &quot;prompted automatically&quot; and &quot;shown automatically&quot; options include a brief explanation of the sidebar. But if we choose &quot;shown manually,&quot; it will be up to us to inform the player that the sidebar is available. We may want to give instructions in our help text for turning the sidebar on and off (SIDEBAR ON and SIDEBAR OFF), and for listing the commands in the main window (COMMANDS) if a player's interpreter or screenreader doesn't support the sidebar. See also the section on toggling the sidebar from a menu.
<p>
 To position the sidebar (left is the default):
<p>
<blockquote><font color="#000080"> on the left<br> on the right</font></blockquote>
<p>
 To choose a style for the sidebar text (&quot;with roman type&quot; is the default):
<p>
<blockquote><font color="#000080"> with roman type<br> with fixed letter spacing<br> with italic type<br> with bold type</font></blockquote>
<p>
 To visually divide the groups of commands (the default is &quot;divided with space,&quot; which leaves a blank line between categories):
<p>
<blockquote><font color="#000080"> divided with space<br> divided with stars<br> not divided</font></blockquote>
<p>
 (Note: For a custom divider, we can instead set the variable &quot;custom sidebar divider&quot; to the ornament we'd like to use, altering the typeface from our other sidebar text if desired:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> The custom sidebar divider is &quot;[fixed letter spacing]+ + +[variable letter spacing]&quot;.</font></blockquote>
<p>
 This is not part of the &quot;prepare the command sidebar&quot; line.)
<p>
 To add, at the bottom of the sidebar, any additional commands that have been provided by compatible extensions (this option is off by default):
<p>
<blockquote><font color="#000080"> with extension commands</font></blockquote>
<p>
 For example, a swimming extension might add a &quot;Swim&quot; command, and an invisibility extension might add a &quot;Turn invisible&quot; command. If the extension authors have made their extensions compatible with Common Commands Sidebar, and if we've included both these extensions in our source after Common Commands Sidebar, the &quot;with extension commands&quot; option will add the commands &quot;Swim&quot; and &quot;Turn invisible&quot; to the end of the sidebar, after a divider. (If we want to fine-tune the sequence of commands, we should skip this option and arrange them by hand instead. See the &quot;cut and paste method&quot; in the chapter on changing the text in the sidebar.)
<p>
 To suggest to players who enter a blank command, and who do not have the sidebar visible, that they type SIDEBAR ON or COMMANDS to see some commands to try (this suggestion is disabled by default):
<p>
<blockquote><font color="#000080"> suggested after blank commands</font></blockquote>
<p>
 To prevent the typed commands SIDEBAR ON, SIDEBAR OFF, and SIDEBAR (which normally turn the sidebar on and off) from being understood:
<p>
<blockquote><font color="#000080"> with toggling disabled</font></blockquote>
<p>
 To leave the status line untouched, instead of automatically adjusting it when the sidebar is visible:
<p>
<blockquote><font color="#000080"> without changing the status line</font></blockquote>
<p>
 This extension assumes we are using Inform's default status line, with the player's surroundings on the left and (if we are using scoring) the score and turn count on the right. To avoid inconsistent text alignment between the status line and the sidebar, and to avoid ambiguity (especially if the sidebar and status line are similar in color), this extension by default centers the standard status text whenever it would otherwise appear directly above the sidebar. If we have a custom status bar, we'll likely want to disable or adjust this behavior.
<p>
 Section: Debugging
<p>
 A built-in debugging feature will warn us if 'prepare the command sidebar' is invoked more than once in the code (in which case a later invocation will override an earlier one) or if mutually exclusive sidebar options have been chosen (in which case only one of the options will take effect). The debugging messages are disabled in the release version of the story. We can also turn off debugging in the not-for-release version by including
<p>
<blockquote><font color="#000080"> The sidebar is disabling debugging in the not-for-release version.</font></blockquote>
<p>
 in our code.
<p>
 Section: Colors, Margin, and Measurements
<p>
 To change the sidebar colors from the default brown text on a beige background, we can use hex color codes (the 6-digit variety). A web search for &quot;hex color codes&quot; will bring up helpful sites that give the codes. For a black background with white text, we could say
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> The background color of the sidebar is &quot;#000000&quot;.<br> The text color of the sidebar is &quot;#ffffff&quot;.</font></blockquote>
<p>
 Since not all interpreters support indentation, the left margin of the sidebar is created by printing fixed-width blank spaces at the beginning of each line. We can override this default indentation with our own, putting the desired number of spaces between the quotation marks:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> The indent of the sidebar is &quot;   &quot;.</font></blockquote>
<p>
 To set the sidebar width (in characters, not pixels), we could say
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> The measurement of the sidebar is 28.</font></blockquote>
<p>
 The units used to measure text windows vary in size from one interpreter to another--width in characters is an approximation. We'll want to check the results in interpreters that are used by players, because the sidebar may look very different in the Inform IDE.
<p>
 To set the minimum size that we want the main window to be (in approximate characters, rather than pixels) in order to allow the sidebar to be displayed, we can say, for instance,
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> The minimum window width for opening of the sidebar is 60.<br> The minimum window height for opening of the sidebar is 20.</font></blockquote>
<p>
 If, at the start of play, the main window does not meet these minimums, and if the sidebar is set to be shown automatically or to show an opening prompt, the player will instead see an opening message about how to list the commands in the main window.
<p>
 Section: Colors, etc. in Quixe
<p>
 The Quixe interpreter will not automatically display the colors we have set in the source. To customize the colors, presence/absence of scroll bars, and various other elements as they appear in the Quixe interpreter, we can &quot;Release along with an interpreter&quot; (see &quot;25.11. A playable web page&quot; in the Inform manual) and modify the glkote.css file found in the interpreter folder. Glkote.css is automatically generated on each release, so we'll want to keep a copy of the modified file where it won't be overwritten. (There's a bit about this in &quot;25.13. Website templates&quot; in the Inform manual.)
<p>
 The glkote.css file is written in a language called CSS. In glkote.css we should use &quot;.WindowRock_225&quot; to identify the sidebar.
<p>
 An example: to set the sidebar's background color (&quot;background&quot;) to light blue and its text color (&quot;color&quot;) to dark blue using hex color codes, we could add the following to the CSS file. (Despite how the spacing may appear in this documentation, there should be no space between the period and the W.)
<p>
<blockquote><font color="#000080">. WindowRock_225 {<br> background: #BAF7F4;<br> color: #070833;<br> }</font></blockquote>
<p>
 More information about CSS is available with a web search. There are also some explanatory comments in the glkote.css file, available in the interpreter folder, as mentioned, or at &lt;http://github.com/erkyrath/quixe/blob/master/media/i7-glkote.css&gt;. Further information can be found at &lt;http://eblong.com/zarf/glk/glkote/docs.html#css&gt;.
<p>
 Chapter: Using Different Commands in the Sidebar
<p>
 If we don't want to use the default set of commands in the sidebar, there are several ways we can go about adjusting the commands. We can paste in and edit a provided template with the &quot;Cut and Paste&quot; method, or alter the default table using code with the &quot;Add or Remove Rows in the Default Table&quot; method, or swap entire sets of commands in and out during play with the &quot;Swap in a Different Table&quot; method.
<p>
 Note that when we tailor the commands in the sidebar, we are also affecting the list printed by the &quot;listing the sidebar commands in the main window&quot; action. After we've made changes to the sidebar commands, we should type COMMANDS to see how they look in list form. See also &quot;Adjusting the Commands Listed in the Main Window.&quot;
<p>
 Section: The &quot;Cut and Paste&quot; Method
<p>
 The &quot;Cut and Paste&quot; method of tailoring the sidebar commands gives the most control for the least effort. If we paste one of the templates below into our code to continue the (initially blank) Table of Custom Sidebar Commands, we can edit, cut, and paste rows to arrange the commands exactly how we want them. What you see is basically what you get. If we continue the Table of Custom Sidebar Commands in our code, our custom table will automatically be substituted for the default table in the sidebar (unless we specify otherwise).
<p>
 The commands in this first template are identical to the commands in the default sidebar:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Table of Custom Sidebar Commands (continued)<br> Displayed Command<br> &quot;[bold type]Useful Commands&quot;<br> &quot; &quot;<br> &quot;[fixed letter spacing]     N&quot;<br> &quot;[fixed letter spacing]  NW   NE&quot;<br> &quot;[fixed letter spacing]W    *    E&quot;<br> &quot;[fixed letter spacing]  SW   SE&quot;<br> &quot;[fixed letter spacing]	    S&quot;<br> &quot; &quot;<br> &quot;In/Out&quot;<br> &quot;Up (U)/Down (D)&quot;<br> &quot;?&quot;<br> &quot;Look (L)&quot;<br> &quot;Inventory (I)&quot;<br> &quot;Take/Drop something&quot;<br> &quot;Examine (X) it&quot;<br> &quot;Open/Close it&quot;<br> &quot;Push/Pull it&quot;<br> &quot;Put it in something&quot;<br> &quot;Put it on something&quot;<br> &quot;Wait (Z)&quot;<br> &quot;?&quot;<br> &quot;About&quot;<br> &quot;Help&quot;<br> &quot;Hint&quot;<br> &quot;Again (G)&quot;<br> &quot;Undo&quot;<br> &quot;Save/Restore&quot;<br> &quot;Quit (Q)&quot;<br> &quot;[if the sidebar is allowing toggling]Sidebar on/off[end if]&quot;</font></blockquote>
<p>
 This next template has the above commands plus Give, Show, Ask, and Tell, for stories with other characters:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Table of Custom Sidebar Commands (continued)<br> Displayed Command<br> &quot;[bold type]Useful Commands&quot;<br> &quot; &quot;<br> &quot;[fixed letter spacing]     N&quot;<br> &quot;[fixed letter spacing]  NW   NE&quot;<br> &quot;[fixed letter spacing]W    *    E&quot;<br> &quot;[fixed letter spacing]  SW   SE&quot;<br> &quot;[fixed letter spacing]	    S&quot;<br> &quot; &quot;<br> &quot;In/Out&quot;<br> &quot;Up (U)/Down (D)&quot;<br> &quot;?&quot;<br> &quot;Look (L)&quot;<br> &quot;Inventory (I)&quot;<br> &quot;Take/Drop something&quot;<br> &quot;Examine (X) it&quot;<br> &quot;Open/Close it&quot;<br> &quot;Push/Pull it&quot;<br> &quot;Put it in something&quot;<br> &quot;Put it on something&quot;<br> &quot;Give it to someone&quot;<br> &quot;Show it to someone&quot;<br> &quot;Ask someone about it&quot;<br> &quot;Tell someone about it&quot;<br> &quot;Wait (Z)&quot;<br> &quot;?&quot;<br> &quot;About&quot;<br> &quot;Help&quot;<br> &quot;Hint&quot;<br> &quot;Again (G)&quot;<br> &quot;Undo&quot;<br> &quot;Save/Restore&quot;<br> &quot;Quit (Q)&quot;<br> &quot;[if the sidebar is allowing toggling]Sidebar on/off[end if]&quot;</font></blockquote>
<p>
 If we'd rather start from scratch, we can use a table continuation with the following name and column heading:<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Table of Custom Sidebar Commands (continued)<br> Displayed Command (a text)</font></blockquote>
<p>
 Below this, we list the sidebar title (if desired) and command entries in a single column in the order we'd like them displayed. Each &quot;?&quot; entry will automatically be replaced with the chosen divider option (which, if it's a text ornament, will include a blank line before and after). A blank line will automatically be added at the top of the sidebar. Each &quot; &quot; entry will result in a blank line in the sidebar. (That's a single space between quotation marks--using more than one space can lead to stray punctuation in the auto-generated list for the &quot;listing the sidebar commands&quot; action.)
<p>
 Section: The &quot;Add or Remove Rows in the Default Table&quot; Method
<p>
 If we'd rather write traditional code than paste in a template, we can use code to add or remove rows in the Table of Default Sidebar Commands, which is found in the extension source. Or we could continue this table to add new commands at the end, perhaps starting with a divider (&quot;?&quot;) if we want to separate the new commands from the default meta commands:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Table of Default Sidebar Commands (continued)<br> Displayed Command<br> &quot;?&quot;<br> &quot;New Command 1&quot;<br> &quot;New Command 2&quot;</font></blockquote>
<p>
 For more information, see &quot;16.9. Blank rows,&quot; &quot;16.10: Adding and removing rows,&quot; and &quot;16.18: Table continuations&quot; in the Inform manual.
<p>
 Section: The &quot;Swap in a Different Table&quot; Method
<p>
 Still another approach to adjusting the commands in the sidebar is to designate a specific table (an additional table we have created, or one from an extension) as the table from which the sidebar commands should be drawn. To do this we use the phrase &quot;swap Table Name into the/-- sidebar&quot;:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; swap the Table of Aquatic Commands into the sidebar.</font></blockquote>
<p>
 We can swap in any table so long as it includes a column with the following heading:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Displayed Command (a text)</font></blockquote>
<p>
 If we don't include this column, the commands will not show up in the sidebar.
<p>
 The &quot;swap Table Name into the/-- sidebar&quot; phrase can also be used to switch from one set of commands to another mid-story.
<p>
 Chapter: Adjusting the Commands Listed in the Main Window
<p>
 When the player types COMMANDS, the &quot;listing the sidebar commands in the main window&quot; action prints the sidebar commands in the main window. This feature is intended for players using screenreader software, or devices with small screens, or interpreters that won't display the sidebar (e.g. Parchment).
<p>
 The list is automatically generated from our table of commands, so we'll probably want to check that the results look reasonable, especially if we've changed the sidebar text or if we're controlling command visibility with phrases.
<p>
 If we want to adjust the results, and if the commands will not change during play, we can create our own list as a string called the &quot;custom command list of the sidebar&quot;, for instance
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> The custom command list of the sidebar is &quot;Useful Commands. North (N). South (S). East (E). West (W). Talk to someone. Help. Quit (Q).&quot;</font></blockquote>
<p>
 Our custom list will automatically be used instead of the auto-generated list.
<p>
 If we instead want to modify listed commands individually (for instance, if we're using phrases to show or hide commands during play, and so the list needs to change during play), we can use the column &quot;Listed Command&quot; in our command table to show how we want each command to appear in the list. When the commands are printed as a list in the main window, the Listed Command entry, if present, will automatically be printed instead of the Displayed Command entry. Each entry will be followed by a period when it's printed in the list, but if we need additional periods within an entry, we'll need to include those ourselves, as in the &quot;West (W). East (E)&quot; entry below.
<p>
<blockquote><font color="#000080"> Displayed Command Listed Command<br> &quot; N&quot; &quot;North (N)&quot;<br> &quot;W E&quot; &quot;West (W). East (E)&quot;<br> &quot; S&quot; &quot;South (S)&quot;<br> &quot;In (I)/Out (O)&quot; --</font></blockquote>
<p>
 The commands in the above table will look like ths in listed form:
<p>
 North (N). West (W). East (E). South (S). In (I)/Out (O).
<p>
 Chapter: Showing and Hiding Individual Commands During Play
<p>
 If we want to hide or show individual commands during play, we can use conditions or phrases. Either way, we'll want to make sure to update the sidebar.
<p>
 Section: Updating the Sidebar During Play
<p>
 If the contents of the sidebar change during play, we can use the phrase &quot;refresh the sidebar&quot; inside a rule to keep the sidebar up to date, for instance:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Every turn:<br>&nbsp;&nbsp;&nbsp;&nbsp; refresh the sidebar.</font></blockquote>
<p>
 Note that if we refresh often, we'll want to be extra careful about whether our sidebar commands fit into the height of the window. If the list of commands is too long to fit in the window, an interpreter may show a &quot;More&quot; message at the bottom of the sidebar and require the player to press a key before continuing. This will happen every time the sidebar refreshes. To avoid making the player press an extra key every turn, we'll want to make sure our list of commands isn't overlong, and set the minimum window height to an adequate number. (See the &quot;measurements&quot; section.)
<p>
 Section: Showing and Hiding Using Conditions
<p>
 We can include conditions in the text of the displayed command entries to specify when to show them.
<p>
 For example:
<p>
<blockquote><font color="#000080"> Displayed Command (a text)<br> &quot;[if the player wears the duck costume]Quack[end if]&quot;</font></blockquote>
<p>
 If we do this in such a way that the entry evaluates to &quot;&quot; when the command is hidden, subsequent commands in the sidebar will move up to close the gap.
<p>
 But if we want a blank line in the sidebar where the absent command belongs, we should instead arrange for the entry to evaluate to &quot; &quot;. (That's a single space. Using more than one space may lead to extra punctuation in the &quot;listing the sidebar commands&quot; action.)
<p>
 For example:
<p>
<blockquote><font color="#000080"> Displayed Command (a text)<br> &quot;[if the player wears the duck costume]Quack[end if] &quot;</font></blockquote>
<p>
 For more complicated conditions, we can make the table more readable by putting the conditions in &quot;to decide&quot; phrases outside of the table:
<p>
<blockquote><font color="#000080"> To decide if quack is displayed:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the player wears the duck costume, decide yes;<br>&nbsp;&nbsp;&nbsp;&nbsp; if the player is a duck, decide yes;<br>&nbsp;&nbsp;&nbsp;&nbsp; decide no.</font></blockquote>
<p>
<blockquote><font color="#000080"> Displayed Command (a text)<br> &quot;[if quack is displayed]Quack[end if]&quot;</font></blockquote>
<p>
 For more on &quot;to decide&quot; phrases, see &quot;11.16. New conditions, new adjectives&quot; in the Inform 7 manual.
<p>
 Section: Showing and Hiding Using Phrases
<p>
 If we want to use phrases to show or hide commands, we need to opt in by including the following line in our code:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> The sidebar is using phrases to control command visibility.</font></blockquote>
<p>
 We also need to declare a &quot;command-label&quot; for each command or group of commands that we want to show or hide during play. For instance:
<p>
<blockquote><font color="#000080"> turn_invisible is a command-label.<br> compass_direction is a command-label.</font></blockquote>
<p>
 In our table of commands, we include the columns &quot;Command Label&quot; and &quot;Command Visibility&quot;:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Displayed Command (a text) Command Label (a command-label) Command Visibility (a command-visibility)</font></blockquote>
<p>
 In the &quot;Command Label&quot; column, we enter the command-label we want to use for the command in that row. If we have multiple commands that we want to treat as a single unit for showing and hiding purposes, we can list the same command-label in all the relevant rows.
<p>
 In the Command Visibility column, we can enter one of these options in each row:
<p>
<blockquote><font color="#000080"> c-shown<br> c-blank<br> c-hidden</font></blockquote>
<p>
 &quot;C-shown&quot; means the relevant command entry is displayed normally. &quot;C-blank&quot; means the relevant command entry is not visible, but a blank line appears in the sidebar where the command belongs. &quot;C-hidden&quot; means the relevant command entry is not visible, and subsequent commands in the sidebar are moved up to close the gap.
<p>
 Strictly speaking, we need only specify &quot;c-blank&quot; and &quot;c-hidden,&quot; because any entries missing from the Command Visibility column will be treated as &quot;c-shown&quot;.
<p>
 An example:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Displayed Command (a text) Command Label (a command-label) Command Visibility (a command-visibility)<br> &quot;North (N)&quot; compass_direction c-blank<br> &quot;South (S)&quot; compass_direction c-blank<br> &quot;East (E)&quot; compass_direction c-blank<br> &quot;West (W)&quot; compass_direction c-blank<br> &quot;Quack&quot; quack c-hidden<br> &quot;Turn invisible&quot; turn_invisible c-shown</font></blockquote>
<p>
 To show, hide, or blank (that is, leave a blank space for the command in the sidebar) commands during play, we can use the following phrases, where X is the command-label:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> show the/-- X command/commands in Table Name<br> show the/-- X command/commands<br> hide the/-- X command/commands in Table Name<br> hide the/-- X command/commands<br> blank the/-- X command/commands in Table Name<br> blank the/-- X command/commands</font></blockquote>
<p>
 The above phrases will show, hide, or blank all instances of X in the given table. The choices &quot;command&quot; and &quot;commands&quot; are provided only so that the code can read naturally regardless of whether the command-label applies to one command, or several.
<p>
 If we don't mention the table name, the extension will look for X in whichever table is currently designated as the source of sidebar commands. (That table name is held in the property &quot;chosen table of the sidebar&quot;).
<p>
 If we are trying to show, hide, or blank a command, and the command-label is not found in the table, the attempt will either generate a debug message (if debugging is on) or be ignored (if debugging is off).
<p>
 Some examples:
<p>
<blockquote><font color="#000080"> After wearing the duck costume:<br>&nbsp;&nbsp;&nbsp;&nbsp; show the quack command in the Table of Special Commands;<br>&nbsp;&nbsp;&nbsp;&nbsp; continue the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> After taking the ancient compass:<br>&nbsp;&nbsp;&nbsp;&nbsp; show the compass_direction commands;<br>&nbsp;&nbsp;&nbsp;&nbsp; continue the action.</font></blockquote>
<p>
 To find the Command Visibility entry for for a given command label, we can use the following phrases, where C is the command-label:
<p>
<blockquote><font color="#000080"> the/-- command-visibility of C in Table Name<br> the/-- command-visibility of C</font></blockquote>
<p>
 These will check only the first instance of C in the table. And if we don't mention a table name, the extension will assume we mean the &quot;chosen table of the sidebar.&quot;
<p>
 If there a Command Visibility column but no Command Visibility entry in the given row, the command is treated as shown, and so these phrases will return the value &quot;c-shown&quot;.
<p>
 But if there's something wrong with the table (for instance, if the command-label is not found in the given table), these phrases will return the value &quot;c-table-error&quot;. If debugging is on, a debug message will be shown.
<p>
 Chapter: A Note to Extension Authors
<p>
 If we've written an extension that creates a new command for the player, we can, in a section marked &quot;(for use with Common Commands Sidebar by Alice Grove),&quot; include the following table continuation:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> Table of Extension-Provided Sidebar Commands (continued)<br> Displayed Command<br> &quot;New command goes here&quot;</font></blockquote>
<p>
 By using this table, we make our extension compatible with other extensions adding their own sidebar commands. This way the story author can automatically add commands to the sidebar from multiple extensions at once, just by adding &quot;with extension commands&quot; to the &quot;prepare the commands sidebar&quot; line.
<p>
 If we want to provide a complete list of commands that can replace the default commands (for instance, if we're translating Common Commands Sidebar into another language), we can write a new extension to be used in place of Common Commands Sidebar, or we can write a compatible extension that provides a new table with a unique name. In the new table, the commands should be listed in a column entitled &quot;Displayed Command (a text)&quot;. The story author can then swap in the new table if desired.
<p>
 Most of the responses visible to players can be changed according to &quot;14.11. Changing the text of responses&quot; in the Inform manual, but there are two exceptions: the responses shown when players mistakenly type &quot;sidebar [text]&quot; or &quot;commands [text].&quot; These can be changed as follows:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png><br> The SIDEBAR instructions of the sidebar are &quot;New response here.&quot;.<br> The COMMANDS instructions of the sidebar are &quot;New response here.&quot;.</font></blockquote>
<p>
 Extensions intended to be compatible with Common Commands Sidebar should not modify the Table of Default Sidebar Commands or the Table of Custom Sidebar Commands, as this would create obstacles for story authors who want to include only the original commands, or who want to create a custom list from scratch. Compatible extensions should also avoid setting any of the built-in sidebar options without good reason, because if both the extension author and the story author include &quot;Prepare the Commands Sidebar&quot; lines, the extension will detect both lines and generate error messages.
<p>
 Example: * The Absolute Minimum - Including the sidebar with a minimum of code.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;The Absolute Minimum&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Common Commands Sidebar by Alice Grove.</font></blockquote>
<p>
<blockquote><font color="#000080"> Minimal Room is a room.</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;sidebar / sidebar / sidebar off / sidebar on / commands&quot;.</font></blockquote>
<p>
 Example: * Sidebar in Chocolate - A sidebar that makes use of presentation options and a custom command list.
<p>
<blockquote><font color="#000080"> Here we have an automatically-shown sidebar with a brown background, italic off-white text, plus signs as dividers, and a custom list of commands.</font></blockquote>
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Sidebar in Chocolate&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Common Commands Sidebar by Alice Grove.</font></blockquote>
<p>
<blockquote><font color="#000080"> Table of Custom Sidebar Commands (continued)</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> Displayed Command (a text)</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[bold type]Common Commands&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; &quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;About&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Help&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Hint&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Again (G)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Undo&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Save/Restore&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Quit (Q)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;?&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Look (L)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Inventory (I)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Take/Drop something&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Examine it (X it)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Open/Close it&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Push/Pull it&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Put it in something&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Put it on something&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Wait (Z)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;?&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Give it to someone&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Show it to someone&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Ask someone about it&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Tell someone about it&quot;</font></font></td></tr></table></blockquote>
<p>
<blockquote><font color="#000080"> The background color of the sidebar is &quot;#542c03&quot;.<br> The text color of the sidebar is &quot;#faf0e6&quot;.<br> The custom divider of the sidebar is &quot;+ + +&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; prepare the command sidebar, shown automatically, with italic type.</font></blockquote>
<p>
<blockquote><font color="#000080"> Help Desk is a room.</font></blockquote>
<p>
<blockquote><font color="#000080"> A supporter called the desk is in Help Desk.</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;sidebar / sidebar / sidebar off / sidebar on / commands&quot;.</font></blockquote>
<p>
 Example: * Lost in 'Lost Igpay' - A way to toggle the command sidebar from inside a full-screen menu using Emily Short's Menus extension.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Lost in 'Lost Igpay'&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Menus by Emily Short.<br> Include Common Commands Sidebar by Alice Grove.</font></blockquote>
<p>
<blockquote><font color="#000080"> Asking for help is an action out of world.<br> Understand &quot;help&quot; and &quot;elphay&quot; as asking for help.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out asking for help:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the current menu is the Table of Options;<br>&nbsp;&nbsp;&nbsp;&nbsp; carry out the displaying activity;<br>&nbsp;&nbsp;&nbsp;&nbsp; clear the screen;<br>&nbsp;&nbsp;&nbsp;&nbsp; try looking.</font></blockquote>
<p>
<blockquote><font color="#000080"> Table of Options</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> title</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> subtable (table name)</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> description</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> toggle (a rule)</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;How to Play&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[How_to_Play]&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Commands Sidebar (currently [if the sidebar is not flagged to appear later]off[otherwise]on[end if])&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> toggle sidebar from menu rule</font></font></td></tr></table></blockquote>
<p>
<blockquote><font color="#000080"> To say How_to_Play:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Help Unkgray find the lost igpay! At the prompt ( &gt; ), type short commands to tell him what to do.[paragraph break]To see a sidebar that lists the most common commands, toggle the COMMANDS SIDEBAR option on the top level of this menu. You can also type COMMANDS to list these commands in the main window.&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> This is the toggle sidebar from menu rule:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the sidebar is not flagged to appear later:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the sidebar is flagged to appear later;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise if the sidebar is flagged to appear later:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the sidebar is not flagged to appear later.</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br> prepare the commands sidebar, shown manually;<br> say &quot;For two weeks you resisted the inevitable. But Gretchen's enthusiasm was unrelenting.[paragraph break]'All right,' you finally said. 'Show me this text adventure you've been telling me about.'[paragraph break]So here you are, scowling at some game called 'Lost Igpay.' And that's exactly what you are: lost. You've tried typing 'Start looking for the igpay' and 'Go find the igpay!' and 'Unkgray need find igpay now' and nothing seems to work.&quot;;<br> wait for any key.</font></blockquote>
<p>
<blockquote><font color="#000080"> At the Computer is a room. The description of At the Computer is &quot;The screen is strewn with failures of communication.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Gretchen is a woman in At the Computer. &quot;Gretchen stands at your shoulder, clasping her hands in gleeful anticipation.[first time][paragraph break]'Don't worry!' she says. 'There's a helpful sidebar that shows all the common commands! Type HELP to go to the menu. You can turn on the sidebar from there!'[only]&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;help&quot;.</font></blockquote>
<p>
 Example: *** Dropping the Compass - Using phrases to blank out compass directions in the sidebar when the player drops the compass.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Dropping the Compass&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Common Commands Sidebar by Alice Grove.</font></blockquote>
<p>
<blockquote><font color="#000080"> compass_direction is a command-label.</font></blockquote>
<p>
<blockquote><font color="#000080"> Table of Custom Sidebar Commands (continued)</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> Displayed Command</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> Command Label (a command-label)</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> Command visibility (a command-visibility)</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[bold type]Useful Commands&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; &quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> --</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[fixed letter spacing]     N&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> compass_direction</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> c-shown</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[fixed letter spacing]  NW   NE&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> compass_direction</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> c-shown</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[fixed letter spacing]W    *    E&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> compass_direction</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> c-shown</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[fixed letter spacing]  SW   SE&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> compass_direction</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> c-shown</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[fixed letter spacing]     S&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> compass_direction</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> c-shown</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; &quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Look (L)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Inventory (I)&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Take/Drop something&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Examine (X) it&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Quit (Q)&quot;</font></font></td></tr></table></blockquote>
<p>
<blockquote><font color="#000080"> Shifting Cavern is a room. &quot;Your usually excellect sense of direction fails you in this strange cavern. You feel vaguely dizzy.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> A compass is a thing. The description of the compass is &quot;They insisted that you bring it.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The player carries the compass.</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; prepare the command sidebar, shown automatically.</font></blockquote>
<p>
<blockquote><font color="#000080"> The sidebar is using phrases to control command visibility.</font></blockquote>
<p>
<blockquote><font color="#000080"> Every turn:<br>&nbsp;&nbsp;&nbsp;&nbsp; refresh the sidebar.</font></blockquote>
<p>
<blockquote><font color="#000080"> Every turn when the turn count is 1:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the compass is in the location of the player;<br>&nbsp;&nbsp;&nbsp;&nbsp; blank the compass_direction commands;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Gravity shifts in the cave, sweeping the compass out of your grip. The instrument meanders sideways through the air, then loops overhead before crashing to the ground.[paragraph break]You no longer know which way is which.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going a direction when the player does not carry the compass:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Without the compass you have no idea which way is which.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> After taking the compass:<br>&nbsp;&nbsp;&nbsp;&nbsp; show the compass_direction commands;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Phew! Now you can orient yourself.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> After dropping the compass:<br>&nbsp;&nbsp;&nbsp;&nbsp; blank the compass_direction commands;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You drop the compass...and now you don't know which way is which.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;commands / inventory / x compass / commands&quot;.</font></blockquote>
<p>

<p>
<p></body></html>