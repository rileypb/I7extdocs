<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table><p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Startup Precomputation<font color="#404040"> by </font>Dannii Willis</b><p><small></small><p><p><hr><p>
<p>
 There are a few Inform stories which do so much in their &quot;when play begins&quot; rules that the interpreter pauses for a few seconds on the fastest computers. On slow computers it can take much longer. This extension provides a system for the results of the startup code to be saved and loaded the next time the story file is run. It is also possible to embed that precomputation data inside the blorb so that those who download your story don't even need to run the startup code once!
<p>
 This extension adds two rules: the attempt to load a precomputation data file rule in the after starting the virtual machine rules, and the finalise startup precomputation rule in the when play begins rules. You must ensure that all of your slow startup rules run before the finalise startup precomputation rule, by using &quot;listed before&quot; statements as described in section 19.4 of the manual.
<p>
 To embed the precomputation data inside the blorb, compile a release version of your story and run it once to produce the data file. Then use a blorb editing program to add the data file as a new blorb chunk. I recommend Andrew Plotkin's blorbtool.py (available at https://github.com/erkyrath/glk-dev/blob/master/blorbtool.py). This command will embed Story-startup-data.glkdata inside Story.gblorb:
<p>
<blockquote><font color="#000080"> python blorbtool.py Story.gblorb import Data 9998 IFZS Story-startup-data.glkdata</font></blockquote>
<p>
 This extension will by default use a blorb resource number of 9998. If for some reason you need to change it, you can use this command to set another (higher) number:
<p>
<blockquote><font color="#000080"> Use startup precomputation blorb chunk number of at least 10000.</font></blockquote>
<p>
 This extension is released under the Creative Commons Attribution licence. Bug reports, feature requests or questions should be made at &lt;https://github.com/i7/extensions/issues&gt;.
<p>

<p>
<p></body></html>