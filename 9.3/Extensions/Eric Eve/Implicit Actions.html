<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table><p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Implicit Actions<font color="#404040"> by </font>Eric Eve</b><p><small></small><p><p><hr><p>
<p>
 Chapter: The Basics - A Set of Implicit Actions
<p>
 Section: Introduction - Using Impicit Actions
<p>
 The documentation of this extension may look quite long, but that's because it has quite a few features to explain, not because it's hard to use if we just want to use its functionality &quot;out of the box&quot;. To do that, we just need the line:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> Include Implicit Actions by Eric Eve</font></blockquote>
<p>
 At the start of our code, and we'll get all (or most) of the benefits of this extension without further ado. The rest of this documentation explains what those benefits are how we can extend them.
<p>
 Section: What's New in Version 10
<p>
 Previously Implicit Actions used the before rules to trigger implicit actions. Version 10 implements a new rulebook, the precondition rules, for this purpose. The precondition rules run between the Before rules and the Instead rules, in fact just before the basic accessibility rule. This is both because they are the same kind of thing as other rules inserted at this point (for example the carrying requirements rule which the Standard Rules uses to perform some implicit takes is located around this stage), and also, more pragmatically, because it should make it easier to write Before rules that are certain to pre-empt implicit actions, which may sometimes be necessary.
<p>
 Section: What's New in Version 11
<p>
 Previous versions of Implicit Actions could not be used with Locksmith by Emily Short. Version 11 can be used with Locksmith, in which case it leaves Locksmith to do all the handling of locks and doors. On the other hand if Implicit Actions is used there should be no need for Locksmith, since if Locksmith is not present Implicit Actions will provide similar functionality in a manner more consistent with the rest of Implicit Actions.
<p>
 Section: What's New in Version 12
<p>
 Version 12 makes no change to the functionality of Implicit Actions, but makes several changes both to the extension code and to the examples to avoid using Inform features that became deprecated in release 6E59. This should help to ensure that Implicit Actions continues to be usable with whatever future release of Inform withdraws the deprecated features.
<p>
 Release 6E59 of Inform introduced its own implicit action handling for inserting objects into containers, putting objects on supporters, and going through closed doors. The Implicit Actions extension replaces the Standard Library rules that carry out these implicit actions with its own versions to avoid clashes and duplications.
<p>
 Section: Common Cases of Implicit Action
<p>
 There are many common situations in Interactive Fiction where an action is annoyingly prevented because some other completely obvious action has not been carried out. We want to put the diamond in the jewel case, but we're told we have to be holding it first (even though it's right there in front of us). We want to leave to the north, but we're told we can't because the front door is in the way, even though the door isn't locked and it should be obvious that we want to open it in order to go through it. Interactive Fiction is a much smoother and less frustrating experience if these kinds of obvious action are carried out for us. Actions that are carried out in order to allow other actions to go ahead are called &quot;implicit actions&quot;. The Implicit Actions extension defines a number of these, and all we have to do is to include the extension in our game to enjoy the benefit of them.
<p>
 In particular, the extension provides implicit actions for the following cases:
<p>
 1. If we want to search a container that's closed, the game will first try to open it for us.
<p>
 2. If we want to put something in a container that's closed, the game will first try to open it for us.
<p>
 3. If we want to go through a door that's closed, the game will first try to open it for us.
<p>
 4. If we want to open a door or a container that's locked, the game will first try to unlock it for us.
<p>
 5. If we want to put something we're not holding into or onto something, the game will first try to take it for us.
<p>
 6. If we want to leave the room while we're in an enterable container or on an enterable supporter, the game will first try to take us out of it.
<p>
 7. If we want to take something that's inside a closed transparent container, the game will first try to open the container for us.
<p>
 8. If we want to use a key to lock or unlock something but we're not carrying the key (although it's within reach), the game will first try to take it for us.
<p>
 Note that Inform release 6E59 increases the range of implicit actions carried out by the Standard Rules, which may reduce the need for the Implicit Actions extension in some cases. Implicit Actions nevertheless extends the range of implicit actions further than does the Standard Rules and provides for better reporting of implicit actions. It also provides a franework for creating further implicit actions.
<p>
 Section: Chains of Actions
<p>
 Sometimes more than one implicit action may need to be carried out before we can go ahead with the command the player actually ordered. For example, suppose we want to go north through a locked door, the key to which is lying in plain sight on the table. To go through the door we first need to open it, to open it we first need to unlock it, and to unlock it we first need to take the key. The design of this extension allows each implicit action to trigger a further implicit action in turn. When there's a chain of actions like this, where each is needed to allow the next to be performed, the extension also combines all the implicit action into a single report, so that what we'd see is something like:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first taking the key, then unlocking the door with the key, then opening the door)</font></blockquote>
<p>
<blockquote><font color="#000080"> Front Garden<br> The house lies to the south...</font></blockquote>
<p>
 Note that although the extension can combine a chain of implicit actions (up to any practicable) length into a single report like this, it cannot do the same with a sequence of implicit actions that are mutually independent. For example, if the player character is in a chair and needs to go through a closed door in order to leave the room, both leaving the chair and opening the door are implicit actions that need to be carried out to let us leave the room, but neither depends on the other. So what we get in this case is:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first leaving the chair)<br> (first opening the door)</font></blockquote>
<p>
 Rather than the neater:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first leaving the chair, then opening the door)</font></blockquote>
<p>
 Although it may have been possible to have made the extension do the latter, the gain in neatness would probably not justify the increase in complexity (for the user as much as the author!). Moreover, the present system does have the slight advantage of making it clear which implicit actions are chained (each dependent on the one before) as opposed to simply carried out in sequence (with no dependence between them).
<p>
 Section: Success and Failure
<p>
 We have so far assumed that all implicit actions succeed, but that's not necessarily the case. Suppose we try to go north through a closed door which is also locked, and the key needed to unlock it is nowhere in sight. With this extension we'd then get:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first trying to open the door)<br> The door seems to be locked.</font></blockquote>
<p>
 Notice the different wording of the implicit action report here. With this extension &quot;(first trying to do something)&quot; means that we need to do something to carry out the command we actually issued, so we tried to do it, but we didn't succeed. This is less misleading (and less jarring) than:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first opening the door)<br> The door seems to be locked.</font></blockquote>
<p>
 The most natural meaning of which is that we did actually manage to open the door (even though in fact we couldn't, because it was locked).
<p>
 When a chain of implicit commands is being carried out, it is stopped as soon as one of them fails, with a message explaining why it failed at that point. So, going back to the earlier example where the key was available, we could (in principle) get either:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first trying to take the key)<br> One look at the scorpion sitting on the key quickly changes your mind about trying to take it.</font></blockquote>
<p>
 Or
<p>
<blockquote><font color="#000080"> &gt;n<br> (first taking the key, then trying to unlock the door with the key)<br> The lock proves too stiff; perhaps it needs oiling.</font></blockquote>
<p>
 Or
<p>
<blockquote><font color="#000080"> &gt;n<br> (first taking the key, then unlocking the door with the key, then trying to open the door)<br> Something seems to be jamming the door, even though it's not locked.</font></blockquote>
<p>
 Section: Changing the Implicit Action Reporting Style.
<p>
 All the example we have seen so far have reported implicit actions in parentheses (the normal style). To see them reported more like normal actions, we can just chnage the global variable parenthesize implicit actions to false, then we'd see (for example):
<p>
<blockquote><font color="#000080"> &gt;n<br> You take the key, then unlock the door with the key, then try to open the door.</font></blockquote>
<p>
<blockquote><font color="#000080"> Something seems to be jamming the door, even though it's not locked.</font></blockquote>
<p>
 This is done via a global variable rather than a use option, so that we can (should we wish) change the style during the course of the game. To switch off the parenthesized style of implicit action right from the start, include the following:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> when play begins:<br> now parenthesize implicit actions is false.</font></blockquote>
<p>
 Section: Overriding or Preventing Implicit Actions
<p>
 Once in a while an implicit action may not do what we want. For example, if the player encounters a red door marked DANGER it might be a bad idea to open it via an implicit action. To prevent the door being opening implicitly we need to write a special rule for implicitly opening it. This could simply take the form:
<p>
<blockquote><font color="#000080"> rule for implicitly opening the red door:<br> do nothing.</font></blockquote>
<p>
 But this could easily cause the action to fail with no explanation at all:
<p>
<blockquote><font color="#000080"> &gt;north<br> &gt;</font></blockquote>
<p>
 We could instead have our rule explicitly abort the implicit action, so that we get the standard failure report:
<p>
<blockquote><font color="#000080"> rule for implicitly opening the red door:<br> abort the implicit action.</font></blockquote>
<p>
 This is fine provided opening the red door will only ever be a top-level implicit action (i.e. not one triggered by another implicit action higher up in the chain). If the aborted implicit action is generated by one higher up in the chain, however, the result can be be a bit messy. Suppose we have a transparent cabinet containing a brass key that we need to unlock a door that needs to be open if the player is to go north, but for some reason we don't want the cabinet to be open via an implicit action (perhaps because it's full of poison gas and we don't want to kill the player as an unintended side-effect of some other action). Stopping the implicit action with &quot;abort the implicit action&quot; would generate the following rather messy output:
<p>
<blockquote><font color="#000080"> &gt;n<br> (first trying to take the brass key)<br> The cabinet isn't open.</font></blockquote>
<p>
<blockquote><font color="#000080"> The cabinet isn't open.</font></blockquote>
<p>
<blockquote><font color="#000080"> It seems to be locked.</font></blockquote>
<p>
<blockquote><font color="#000080"> You can't, since the oak door is in the way.</font></blockquote>
<p>
 We can prevent this mess by having our custom rule print a failure message instead:
<p>
<blockquote><font color="#000080"> rule for implicitly opening the cabinet:<br> say &quot;It may be dangerous to open the cabinet.&quot;</font></blockquote>
<p>
 Or we can get the best of both worlds with:
<p>
<blockquote><font color="#000080"> Rule for implicitly opening the cabinet:<br> abort the implicit action with message &quot;It may be dangerous to open the cabinet.&quot;</font></blockquote>
<p>
 This will then use a standard failure message in the implicit opening is generated by a top-level action (an explicit TAKE THE BRASS KEY), say, but will show our custom message if the implicit opening is triggered by another implicit action (such as implicitly taking the key to unlock the door).
<p>
 A final technique is to tailor the failure message to the context by writing a rule that is specific to one implicit action taking place in the context of another:
<p>
<blockquote><font color="#000080"> Rule for implicitly opening the cabinet while implicitly unlocking the oak door:<br> say &quot;You need the brass key to unlock the door, but the cabinet is closed.&quot;</font></blockquote>
<p>
 Chapter: Locks, Keys and Doors
<p>
 Section: Using Implicit Actions Can with Locksmith
<p>
 Because the Implicit Actions extensions provides its own way of dealing with implicit actions, there is no need to use Emily Short's Locksmith extension at the same time. Locksmith carries out implicit actions for locks and doors, which Implicit Actions also does. On the other hand, if you want to use both extensions together you now can. The code in Implcit Actions that deals with keys and doors has all been marked &quot;(for use without Locksmith by Emily Short)&quot;, so that if Locksmith and Implicit Actions are both included in the same game, the two shouldn't clash. If both extensions are included, the handling of implcit actions for Locks, Keys and Doors will thus be entirely left to Locksmith, and none of the rest of the present chapter will apply.
<p>
 There's no particular reason for using both Implicit Actions and Locksmith in the same game. Implicit Actions does just about everything Locksmith does, but in a slightly different way, so using the two together in the same game will give a less consistent playing experience than using Implicit Actions alone. It has been made possible to use the two together in case (a) some authors prefer the way Locksmith handles doors and keys, but want to extend the range of impllcit actions available or (b) an author starts by using Locksmith and then wants to extend the range of implicit actions used without changing code already wrirtten.
<p>
 The example games below can be made to work with Locksmith, with minor modifications. References to the &quot;key&quot; kind would need to be changed to &quot;passkey&quot;, and &quot;keyring&quot; likewise changed to &quot;keychain&quot;. In Example C &quot;The known-key of the oak door is the brass key.&quot; needs to be replaced with &quot;The brass key unbolts the oak door.&quot; and &quot;Rule for implicitly opening the cabinet while implicitly unlocking the oak door&quot; will need to be commented out or removed, since there's no &quot;implicitly unlocking&quot; activity when Locksmith is used. The examples can then be compiled and run, but don't work quite so smoothly.
<p>
 In sum: Implicit Actions can now be used with Locksmith, but in most cases it's probably better to use it without.
<p>
 Section: Remembering Keys
<p>
 Whenever a key (which can be an ordinary thing, or can be of kind key) is successfully used to lock or unlock something, it is remembered as the known-key for that item (door or container). Thereafter that key will automatically be used to unlock or lock that item (door or container) whenever possible. Every door and container has a known-key property (as well as its matching key property) for this purpose. Thus, if there are doors or containers in the game for which the player character is already meant to know the matching key at the start of the game, we can simply define the known-key property on those doors or containers accordingly. Normally, of course, the known-key property should then contain the same object as the matching key property.
<p>
 Section: Locking and Unlocking Without Keys
<p>
 A door or container can be defined as not needing a key to be locked or unlocked by giving it a matching key property of no-key. It can then be locked with LOCK DOOR or unlocked with UNLOCK BOX. This can be used to model doors and containers locked with catches, bolts, paddles and the like.
<p>
 The extension defines bolting and unbolting actions corresponding to the grammar LOCK WHATEVER and UNLOCK WHATEVER. If WHATEVER has a matching key of no-key then these commands simply lock and unlock the whatever object without further ado. Otherwise, if the whatever object has a known-key, and the known-key is to hand, these commands use the known-key to lock and unlock the object.
<p>
 If we want to define an object that locks and unlocks without a key but is controlled by some other mechanism (such as a combination lock), then we should probably not define it as lockable.
<p>
 Section: Keys and Passkeys
<p>
 Like Locksmith, this extension defines a passkey kind. There is no need to use the passkey kind to get any of the functionality described above. The only thing a passkey does that a ordinary thing doesn't is to display a list of the objects it's known to lock and unlock when it is examined or listed in inventory. We don't need to use a passkey at all if we don't want this particular feature.
<p>
 The extension also defines a key kind (to which passkey belongs). We don't need to use the key kind to make keys work (unless we want to put them on a keyring, see below), but defining keys to be of kind key can help the parser make a more intelligent choice of indirect object in locking and unlocking commands.
<p>
 Section: Keyrings
<p>
 Finally, the extension defines a keyring kind (equivalent to keychain in Locksmith). This may be used to carry keys around on (provided they are defined to be of kind key or passkey). Keys on a keyring can be used to lock and unlock things without being removed from the keyring.
<p>
 Chapter: Defining New Implicit Actions
<p>
 This extension makes it relatively easy to define further explicit actions that work within the same framework (this is illustrated in Example B). The steps involved are basically:
<p>
 1. Define a new activity that actually carries out the implicit action.
<p>
 2. Define one or more Before rules that make use of the activity.
<p>
 It's not strictly necessary to use an activity at stage 1; a to phrase would do the job, for example; but using an acitivity keeps the new implicit action consistent with the implicit actions defined in this extension, and allows us to use conditions like &quot;while implicitly dropping the priceless vase&quot;. But whether we use an activity or not (and from now on we'll assume we do), our definition should follow this pattern:
<p>
<blockquote><font color="#000080"> initialize the implicit action;<br> silently try opening the obstructor;<br> finish the implicit action with participle &quot;opening&quot; infinitive &quot;open&quot; object &quot;[the obstructor]&quot; and condition (whether or not the obstructor is open).</font></blockquote>
<p>
 That is we start our definition with the phrase &quot;initialize the implicit action&quot;. We next write a phrase to silently try doing whatever the implicit action needs to attempt. We finally use the phrase &quot;finish the implicit action&quot; with a number of additional piece of information that facilitate the construction of the implicit action report:
<p>
 - with participle &quot;opening&quot;: this part of the phrase defines the verb form to use if the implicit action succeeds (e.g. in &quot;opening the door&quot; or &quot;taking the key&quot;). We just need the present participle here (e.g. &quot;opening&quot; or &quot;taking&quot;).
<p>
 - infinitive &quot;open&quot;: this part of the phrase defines the verb form to use if the implicit action fails (e.g. in &quot;trying to open the door&quot; or &quot;trying to take the key&quot;). We just need the inifinitive (minus &quot;to&quot;) here (e.g. &quot;open&quot; or &quot;take&quot;).
<p>
 - object: this part of the phrase is a string that will expand into the object or objects involved in the implicit action (e.g. &quot;the door&quot; or &quot;the door with the brass key&quot;). We'll probably need to use substitutions here so that this string will expand into the object or objects actually used.
<p>
 - and condition: this final part of the phrase needs to define a truth state expression that evaluates to true if the implicit action succeeds and false if it fails. For example, in the case of an implicit opening action, the object we were trying to open (here called &quot;the obstructor&quot;) will be open if the impicit opening succeeded, and closed if it did not, so we can use the expression (whether or not the obstructor is open) here.
<p>
 We'd then normally wrap all this in an activity:
<p>
<blockquote><font color="#000080"> Implicitly opening something is an activity.</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for implicitly opening something (called the obstructor) (this is the implicit opening rule):<br> initialize the implicit action;<br> silently try opening the obstructor;<br> finish the implicit action with participle &quot;opening&quot; infinitive &quot;open&quot; object &quot;[the obstructor]&quot; and condition (whether or not the obstructor is open).</font></blockquote>
<p>
 Finally, we write a precondition rule to invoke the implicit activity when needed, e.g.:
<p>
<blockquote><font color="#000080"> Precondition for going through a closed door (called the obstructor):<br> carry out the implicitly opening activitity with the obstructor;<br> if the obstructor is closed and implicit action attempted is true, stop the action.</font></blockquote>
<p>
 We add the final test, stopping the action if the door remains closed after the implicit attempt to open it, because in that case the implicit action will already have printed its own failure message (&quot;The door seems to be locked&quot; or whatever), so we don't also want to see the failure message a later check rule would display.
<p>
 The clause &quot;and implicit action attempted is true&quot; is added to allow for exceptions. If there's a particular door we don't want the implicit opening activity to apply to, for example the Very Dangerous Door, then we can write a special carry out implicitly opening rule for it that sets implicit action attemped to false. In that case the action can proceed to the normal check stage to display the normal failure message.
<p>
 The implicitly opening action used as an example here is already defined in this extension. To see an illustration of a new implicit action that isn't, see Example B below.
<p>
 Chapter: Limitations and Cautions
<p>
 Section: Player Actions Only
<p>
 Implicit Actions works only for actions carried out by the Player Character, not for Non-Player Characters. For many games, this will suffice, since the primary aim is to provide a smoother experience for players than to create more intelligent NPCs. Nevertheless, the framework provided here could be extended to work with NPCs, but the best way to do this would be to write a further extension (NPC Implicit Actions, say) that provides the relevant functionality for characters other than the player character. Such an extension would probably need to include this one, and then add a host of &quot;Before someone going through a closed door&quot; type rules.
<p>
 A simple (and rather basic) NPC Implicit Actions extension is available from the official Inform Extensions page.
<p>
 Section: Overflowing the Text Buffer
<p>
 Implicit Actions makes use of the Text Capture extension to store the text that might be output during an implicit action to explain why an action failed (and then display it at the end of the implicit action report). The text capture buffer can hold a maximum of 256 characters, so it should be used only for fairly short pieces of text, not huge amounts of it all at once. Overrunning the buffer will cause a run-time error in Z-Code games, and the loss of all characters beyond the 256th in Glulx games. If a larger buffer is needed, because you want to display a very long failure message in the course of an implicit action, you need to change the text buffer size to something larger. You can do this with the option &quot;Use maximum capture buffer length of at least 512&quot; (or whatever other buffer size you want).
<p>
 Section: Debugging Commands (Such as RULES)
<p>
 Implicit Actions makes use of the Text Capture extension to suppress output until it is ready to display a summary of implicit actions. This can play havoc with some of the debugging commands, particularly RULES and RULES ALL, since if they're active when an implicit action is being carried out, their output will also be captured, with the probable result that the text capture buffer will overflow, the rule tracing won't be displayed, and the game output will consist of a huge number of error messages (or the game may hang altogether). Be very careful, then, in using RULES in a game that includes Implicit Actions.
<p>
 Section: Redirecting Actions - Instead vs Before
<p>
 It's not uncommon in Inform programming to use Instead rules to redirect one action to another, e.g.:
<p>
<blockquote><font color="#000080"> Instead of opening the sliding door, try pulling the red lever.</font></blockquote>
<p>
 This could cause problems if used in conjuction with Implicit Actions, however. Implicit Actions generates implicit actions in Precondition rules, which are run before Instead rules, so our redirection could be defeated in this case:
<p>
<blockquote><font color="#000080"> &gt;open the sliding door<br> (first trying to unlock the sliding door)<br> The sliding door seems to be locked.</font></blockquote>
<p>
 The solution is to use before rather than instead to carry out the redirection:
<p>
<blockquote><font color="#000080"> Before opening the sliding door, try pulling the red lever instead.</font></blockquote>
<p>
 This also applies if we need to write code to carry out the effect of an action. For example the standard rules require an actor not to be in a container or on a supporter when travelling from a location, but if we want to prevent egress through a window unless the player character is on a ladder (for example), we need to code round that restriction. The following would work just fine:
<p>
<blockquote><font color="#000080"> Before going through the window when the player is on a ladder:<br> say &quot;You clamber through the window.&quot;;<br> if the location is the Short Narrow Alley then move the player to the Private Office;<br> otherwise move the player to the Short Narrow Alley;<br> stop the action.</font></blockquote>
<p>
 But it would not have worked if we'd put the same code in an instead rule; Implicit Actions would have carried out an implicit action to remove the player character from the ladder before the instead rule was reached, defeating the purpose of the ladder.
<p>
 Example: * A Study in Two Keys - A demonstration of the various kinds of implicit action defined in the Implicit Actions extension.
<p>
 This little game exhibits what Implicit Actions does straight out of the box, by offering examples of all the implicit actions it defines. The only extension-specific code in this game (beyond the Include statement) is &quot;The matching key of the pine door is no-key&quot;, which means that we don't need a key to lock and unlock this door.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;A Study in Two Keys&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Implicit Actions by Eric Eve.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Study is a Room. &quot;A large wooden table stands to one side of the room, opposite a glass cabinet. An oak door leads south.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The chair is an enterable scenery supporter in the Study.<br> The player is on the chair.</font></blockquote>
<p>
<blockquote><font color="#000080"> The large wooden table is a scenery supporter in the Study.</font></blockquote>
<p>
<blockquote><font color="#000080"> The red box is a closed openable container. It is on the table.<br> In the red box is a key called the silver key.</font></blockquote>
<p>
<blockquote><font color="#000080"> A keyring called the gold keyring is on the table.</font></blockquote>
<p>
<blockquote><font color="#000080"> The glass cabinet is a closed locked openable lockable transparent scenery container. It is in the study.<br> The matching key of the glass cabinet is the silver key.<br> A key called the brass key is in the glass cabinet.</font></blockquote>
<p>
<blockquote><font color="#000080"> The oak door is a closed locked scenery door. It is south of the Study and north of the Hall.<br> The matching key of the oak door is the brass key.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Hall is a Room. &quot;This room is quite bare, but an oak door leads north, and a pine door east.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The pine door is a closed locked scenery door. It is east of the Hall and west of the Closet.<br> The matching key of the pine door is no-key.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Closet is a Room. &quot;This small closet is little more than a broom-cupboard (though there is not a broom in sight). A pine door leads out to the west.&quot;<br> Instead of exiting in the Closet, try going west.</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;s/unlock door with brass key/look in red box/unlock glass cabinet with silver key/unlock oak door with brass key/s/e/lock door/out/n/lock door/drop all/close red box/put silver key in red box/put brass key in cabinet/lock cabinet/drop silver key/sit on chair/take gold/s/put brass on gold/lock oak&quot;</font></blockquote>
<p>
 When you've tried running this example, you might like to try it again with the following added, to see the difference in reporting style:
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> when play begins:<br> now parenthesize implicit actions is false.</font></blockquote>
<p>
 Example: ** Football Practice - Defining a new implicit action.
<p>
 In this example we define a new action (kicking) and a new implicit action (dropping something). It's a bit dificult to kick something you're holding, so we make the kick action carry out an implicit drop if the thing to be kicked is currently carried.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Football Practice&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Implicit Actions by Eric Eve.</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 1 - Define the Implicit Drop Activity</font></blockquote>
<p>
<blockquote><font color="#000080"> implicitly dropping something is an activity.</font></blockquote>
<p>
<blockquote><font color="#000080"> rule for implicitly dropping something (called the held-thing):<br> initialize the implicit action;<br> silently try dropping the held-thing;<br> finish the implicit action with participle &quot;dropping&quot; infinitive &quot;drop&quot; object &quot;[the held-thing]&quot; and condition (whether or not the held-thing is not carried).</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 2 - The Kicking Action</font></blockquote>
<p>
<blockquote><font color="#000080"> kicking is an action applying to one thing.<br> Understand &quot;kick [something]&quot; as kicking.</font></blockquote>
<p>
<blockquote><font color="#000080"> Precondition for kicking something that is carried:<br> carry out the implicitly dropping activity with the noun;<br> if the noun is carried and implicit action attempted is true, stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Check kicking yourself:<br> say &quot;You may feel like kicking yourself, but it wouldn[apostrophe]t actually do much good.&quot; instead.</font></blockquote>
<p>
<blockquote><font color="#000080"> Check kicking the off-pitch ball:<br> say &quot;It[apostrophe]s off the pitch now; you[apostrophe]ll need to pick it up and bring it back before you can take another shot at the goal.&quot; instead.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out kicking the ball:<br> now the ball is off-pitch.</font></blockquote>
<p>
<blockquote><font color="#000080"> Report kicking the ball:<br> say &quot;You give [the noun] a good kick, [one of]but it goes sailing wide of the goal[or]but it narrowly misses the goal[or]and it sails nicely between the goal-posts[as decreasingly likely outcomes].&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 3 - The Scenario</font></blockquote>
<p>
<blockquote><font color="#000080"> The Football Pitch is a room. &quot;[if unvisited]It is a painfully cold morning this early in the day, but you wanted to come out and practice your kicking when there was absolutely no one else around to watch you make a fool of yourself. [end if]The pitch is deserted, and the goal is a couple of dozen yards away.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The goal is scenery in the Football Pitch. &quot;It is just waiting there for you to kick a ball into it - if you can.&quot;<br> Understand &quot;posts&quot; or &quot;goal-posts&quot; as the goal.</font></blockquote>
<p>
<blockquote><font color="#000080"> The ball is in the Football Pitch. The ball can be in-play or off-pitch. It is in-play.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out taking the ball: now the ball is in-play.<br> After taking the ball when the ball was off-pitch:<br> say &quot;You pick up the ball and carry it back onto the pitch.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for writing a paragraph about the in-play ball:<br> say &quot;A ball rests at your feet, patiently awaiting a kick.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for writing a paragraph about the off-pitch ball: say &quot;The ball is just off the pitch.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;kick ball/g/get ball/kick ball/get ball/kick ball.&quot;</font></blockquote>
<p>
 Example: *** Poison Trap - Preventing implicit actions in specific cases
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Poison Traps&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Implicit Actions by Eric Eve.</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 1 - Scenario</font></blockquote>
<p>
<blockquote><font color="#000080"> Use scoring.<br> The maximum score is 5.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Study is a room.<br> &quot;An oak door leads north, and there is a table here.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The cabinet is a closed openable transparent container.<br> The description is &quot;The cabinet [if dangerous]seems to be full of green gas[otherwise]is glass-fronted.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The cabinet can be safe or dangerous. The cabinet is dangerous.</font></blockquote>
<p>
<blockquote><font color="#000080"> Understand &quot;green&quot; or &quot;gas&quot; as the cabinet when the cabinet is dangerous.<br> Understand &quot;glass-fronted&quot; or &quot;glass&quot; or &quot;fronted&quot; as the cabinet.</font></blockquote>
<p>
<blockquote><font color="#000080"> The cabinet is on the plain wooden table.</font></blockquote>
<p>
<blockquote><font color="#000080"> After opening the dangerous cabinet:<br> if the gas mask is worn begin;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;The green gas escapes into the room, but is soon extracted by the ventillator.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; now the cabinet is safe;<br> otherwise;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;The green gas escapes into the room, killing you in seconds.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; end the story saying &quot;You have died&quot;.;<br> end if;</font></blockquote>
<p>
<blockquote><font color="#000080"> The brass key is a key. The brass key is in the cabinet.</font></blockquote>
<p>
<blockquote><font color="#000080"> A plain wooden table is a scenery supporter in the Study.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of looking under the plain wooden table when the gas mask is not handled:<br> if the gas mask is off-stage begin;<br>&nbsp;&nbsp;&nbsp;&nbsp; move the gas mask to the Study;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You find a gas mask under the table.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; increase the score by 2;<br> otherwise;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;There's a gas mask under the table.&quot;;<br> end if.</font></blockquote>
<p>
<blockquote><font color="#000080"> A scorpion is in the Study. &quot;A scorpion is crawling about on the floor.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The gas mask is a wearable thing. &quot;A gas mask lies under the table.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> After taking the scorpion:<br> say &quot;The scorpion gives you a nasty bite.&quot;;<br> end the story saying &quot;You have died&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> The oak door is a closed openable lockable locked scenery door.<br> The matching key of the oak door is the brass key.<br> The known-key of the oak door is the brass key.</font></blockquote>
<p>
<blockquote><font color="#000080"> The oak door is north of the Study and south of the Hall.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Hall is a room. &quot;An oak door leads south.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> After going to the Hall:<br> try looking;<br> say &quot;You have escaped the trap!&quot;;<br> increase the score by 3;<br> end the story finally saying &quot;You have won&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 2 - Overridden Implicit Actions</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for implicitly taking the scorpion:<br> abort the implicit action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for implicitly opening the cabinet:<br> abort the implicit action with message &quot;The cabinet should only be opened with caution.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for implicitly opening the cabinet while implicitly unlocking the oak door:<br> say &quot;You need the brass key to unlock the door, but the cabinet is closed.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Part 3 - Testing</font></blockquote>
<p>
<blockquote><font color="#000080"> Test gas with &quot;n/take key/open cabinet&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test scorpion with &quot;put scorpion on table/take scorpion&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;n/x cabinet/take key/put key on table/put scorpion on table/look under table/wear gas mask/open cabinet/x cabinet/north&quot;</font></blockquote>
<p>

<p>
<p></body></html>