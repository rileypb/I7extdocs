<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"><img border=0 src="../../../doc_images/Hookindex.png" border=0></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"><img border=0 src="../../../doc_images/Hookup.png" border=0></td></tr></table><p><img border=0 src=../../../doc_images/paste.png>&nbsp;<b>Hyperlinks<font color="#404040"> by </font>Gavin Lambert</b><p><small></small><p><p><hr><p>
<p>
 This is primarily a utility extension intended for other extensions to use, rather than for direct use in stories.
<p>
 A hyperlink can be created with an arbitrary ID in the output text by saying &quot;[set link 1]displayed text[clear link]&quot;.
<p>
 To handle processing when that link is clicked, you can declare a rule:
<p>
<blockquote><font color="#000080"> Hyperlink id processing rule for 1:<br>&nbsp;&nbsp;&nbsp;&nbsp; (do something interesting);<br>&nbsp;&nbsp;&nbsp;&nbsp; rule succeeds with result &quot;go north&quot;.</font></blockquote>
<p>
 Where a rule provides command input as above, this will be entered as the full player command if the story is currently waiting for line input, or only the first character will be input if the story is currently waiting for char input. If the story isn't currently waiting for either kind of input then the command is ignored.
<p>
 If you don't want to input any commands but do still want to consider this rule a success (and not process any other hyperlink rules), then you can simply do one of these:
<p>
<blockquote><font color="#000080"> rule succeeds with result &quot;&quot;.<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
 If you don't want to make any decision but continue to run other rules, simply:
<p>
<blockquote><font color="#000080"> continue the action.</font></blockquote>
<p>
 (Or don't say anything at all, as this is the default.)
<p>
 If you want to handle a range of link IDs from a single rule, you can do this by turning it into a parameter:
<p>
<blockquote><font color="#000080"> Hyperlink id processing rule for number (called id):<br>&nbsp;&nbsp;&nbsp;&nbsp; if id &gt;= 20 and id &lt; 100:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (do a thing).</font></blockquote>
<p>
 Note that this extension does not define any mechanism for &quot;reserving&quot; IDs or otherwise ensuring that different usages don't clash with each other; for that, it is strongly recommended to use the &quot;Inline Hyperlinks by Gavin Lambert&quot; extension instead, which builds on this.
<p>
 Section: Compatibility with Flexible Windows
<p>
 This extension can be used with or without Flexible Windows, but if you are using it then it's recommended that you include that before including this. Without any further changes, this will enable hyperlinks to be accepted in any window. (By default, only hyperlinks in the main window and status windows are recognised.)
<p>
 Example: * Lab Session
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Lab Session&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Hyperlinks by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> Laboratory is a room. &quot;A curious assortment of odds and ends line the [set link 1]workbench[clear link].&quot;<br> A workbench is a scenery supporter in Laboratory. The description is &quot;The workbench itself is made of plain unpainted wood, with a lacquered coating to make it immune to most chemical spills -- apart from one corner, after an encounter with an especially frisky acid.&quot;<br> The describe what's on scenery supporters in room descriptions rule does nothing when the item described is the workbench.</font></blockquote>
<p>
<blockquote><font color="#000080"> A beaker is on workbench. The printed name is &quot;[set link 2]beaker[clear link]&quot;. The description is &quot;A fragile glass beaker, currently empty.  One part of the rim is slightly chipped.&quot;<br> A bunsen burner is on workbench. The printed name is &quot;[set link 3]bunsen burner[clear link]&quot;. The description is &quot;A small, lightly charred, Bunsen burner.&quot;<br> A horrifying monstrosity is on workbench. The printed name is &quot;[set link 4]horrifying monstrosity[clear link]&quot;. The description is &quot;Best not described.  Even though this is apparently the subject your professor wants you to dissect later today.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Hyperlink id processing rule for 1: rule succeeds with result &quot;x workbench&quot;.<br> Hyperlink id processing rule for 2: rule succeeds with result &quot;x beaker&quot;.<br> Hyperlink id processing rule for 3: rule succeeds with result &quot;x burner&quot;.<br> Hyperlink id processing rule for 4: rule succeeds with result &quot;x monstrosity&quot;.</font></blockquote>
<p>
 Example: * Window Management
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;Window Management&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Flexible Windows by Jon Ingold.<br> Include Hyperlinks by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> Office is a room. &quot;Finally, a corner office all to yourself.  This is the good life.  Or at least it would be, if the air conditioner were working.  Currently it's more of a muggy life.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> A large window is fixed in place in Office. The printed name is &quot;[set link 1]large window[clear link]&quot;. &quot;[A window] is set into one wall.&quot;<br> The description is &quot;On one wall a large window [if open]is slowly breathing life back into the office[otherwise]might just be your ticket to getting things bearable -- except that it's [set link 2]closed[clear link][end if].&quot;<br> The window can be openable. The window can be open. The window can be lockable. The window can be locked. The window is openable, lockable, locked.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of opening the locked window: say &quot;You strain at the window for a few minutes, but it won't budge.  It seems [set link 3]security[clear link] electronically sealed all the windows at some point.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> After opening the unlocked window for the first time, say &quot;After more straining, the window eventually cracks open a smidgen, then finally enough to allow a cool [set link 1]breeze[clear link] into the office.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Calling security about is an action applying to one topic. Understand &quot;call security about [text]&quot; as calling security about.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about &quot;window&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about &quot;past events&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You spend a few minutes in meandering conversation, but you don't think it's getting you anywhere.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about &quot;weather&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You explain about the hot and muggy weather, and that the air conditioning isn't working properly.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;'I feel for ya, mate, I really do, but the policy clearly states that all the windows have to remain sealed.'[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;After a few moments, he adds, 'Don't worry, there's a repair ticket in for the A/C.  Shouldn't be more'n a few days.  Week, tops.'[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You quail internally.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about &quot;sealed&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You ask why the window was sealed in the first place.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;There's a moment of pause at the other end of the line, and then the worker responds, 'Well... let's just say that the former owner of your office... he... he had a [italic type]really[roman type] bad week.'[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about &quot;escalate&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You threaten to bring this up with his manager on your next lunch break.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if the window is locked:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;In a slightly darker tone of voice, he responds, 'Now, now, there's no need for any of that, [italic type]Karen[roman type].'[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Sighing, 'Fine, fine, it's only policy after all, who am I to argue with [italic type]management[roman type].'[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You hear a quiet buzzing and clicking noise coming from [the window].&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the window is unlocked;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Somewhat defensively, he replies, 'Come on, that Karen thing was just a joke, you know I didn't really mean that.  I unlocked the window, didn't I?'&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; focus the main window;<br>&nbsp;&nbsp;&nbsp;&nbsp; stop the action.</font></blockquote>
<p>
<blockquote><font color="#000080"> Carry out calling security about:<br>&nbsp;&nbsp;&nbsp;&nbsp; start a call;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You try asking the security worker about [topic understood], but he doesn't seem interested.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window.</font></blockquote>
<p>
<blockquote><font color="#000080"> The phone window is a text buffer g-window spawned by the main window.<br> The background color of the phone window is &quot;#FFFFE0&quot;.<br> The position of the phone window is g-placebelow.<br> The measurement of the phone window is 40.</font></blockquote>
<p>
<blockquote><font color="#000080"> To start a call:<br>&nbsp;&nbsp;&nbsp;&nbsp; open the phone window;<br>&nbsp;&nbsp;&nbsp;&nbsp; clear the phone window;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the phone window;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You reach for the phone on your desk and call security.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Eventually a grumpy voice responds.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You ask about unsealing the window.[paragraph break]&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;The voice laughs dismissively, and you spend the next several minutes arguing about [set link 4]past events[clear link], the [set link 5]weather[clear link], why the window was [set link 6]sealed[clear link] in the first place, that you'll [set link 7]escalate[clear link] it to his manager, and so forth.[paragraph break]&quot;;</font></blockquote>
<p>
<blockquote><font color="#000080"> Before doing anything except calling security about when the phone window is g-present:<br>&nbsp;&nbsp;&nbsp;&nbsp; close the phone window;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Sensing your distraction, the security worker hangs up on you.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Hyperlink id processing rule for 1: rule succeeds with result &quot;x window&quot;.<br> Hyperlink id processing rule for 2: rule succeeds with result &quot;open window&quot;.<br> Hyperlink id processing rule for 3: rule succeeds with result &quot;call security about window&quot;.<br> Hyperlink id processing rule for 4: rule succeeds with result &quot;call security about past events&quot;.<br> Hyperlink id processing rule for 5: rule succeeds with result &quot;call security about weather&quot;.<br> Hyperlink id processing rule for 6: rule succeeds with result &quot;call security about sealed&quot;.<br> Hyperlink id processing rule for 7: rule succeeds with result &quot;call security about escalate&quot;.</font></blockquote>
<p>
 Example: ** I'll have a Side of Inventory, Please
<p>
 In this example, we present the inventory as a sidebar (using the same example as given in Flexible Windows), but we assign each object a unique id that's used as a link to examine the object when shown in the sidebar.
<p>
<blockquote><font color="#000080"><img border=0 src=../../../doc_images/paste.png> &quot;I'll have a Side of Inventory, Please&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Flexible Windows by Jon Ingold.<br> Include Hyperlinks by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> A thing has a number called link number.<br> For printing the name of something (called item) when the current focus window is the side window:<br>&nbsp;&nbsp;&nbsp;&nbsp; let id be the link number of item;<br>&nbsp;&nbsp;&nbsp;&nbsp; if id is zero, continue the action;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[set link id][printed name of item][clear link]&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> Hyperlink id processing rule for number (called id):<br>&nbsp;&nbsp;&nbsp;&nbsp; repeat with item running through things:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if id is the link number of item, rule succeeds with result &quot;x [item]&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> The side window is a text buffer g-window spawned by the main window.<br> The position of the side window is g-placeright.<br> The measurement of the side window is 30.</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for refreshing the side window:<br>&nbsp;&nbsp;&nbsp;&nbsp; try taking inventory.</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; open the side window.</font></blockquote>
<p>
<blockquote><font color="#000080"> Every turn:<br>&nbsp;&nbsp;&nbsp;&nbsp; refresh the side window;<br>&nbsp;&nbsp;&nbsp;&nbsp; focus the main window.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Study is a room. In the study is an old oak desk. On the desk is a Parker pen, a letter, an envelope and twenty dollars.<br> The description of pen is &quot;Metallic, with a stainless tip and other trimmings, but otherwise the body is all matte black.  [if carried]You feel fancier just holding it.&quot;<br> The description of letter is &quot;You've read this letter so many times that you can't stand to read it again.  And yet, you know you will, eventually.&quot;<br> The description of envelope is &quot;This is the envelope that the letter came in, on that fateful night just a few days ago.&quot;<br> The description of twenty dollars is &quot;A creased twenty dollar bill.  It was in the envelope along with the letter.&quot;<br> The link number of pen is 1.<br> The link number of letter is 2.<br> The link number of envelope is 3.<br> The link number of twenty dollars is 4.</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;take pen/take letter/i/take all&quot;.</font></blockquote>
<p>

<p>
<p></body></html>