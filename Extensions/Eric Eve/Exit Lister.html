<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"></td></tr></table><p><img border=0 src=../../doc_images/paste.png>&nbsp;<b>Exit Lister<font color="#404040"> by </font>Eric Eve</b><p><small></small><p><p><hr><p>
<p>
 Chapter: Basic Overview
<p>
 Section: What's New
<p>
 Version 10 of Exit Lister suppresses the listing of exits that lead from one dark room to another, although this behaviour can be changed by setting the global variable.dark-exits-invisible to false. For further details see the section on Listing or Hiding Exits in the Dark below.
<p>
 Section: Status Line Exit Lister
<p>
 This extension implements a status line exit lister similar to that provided as standard in TADS 3. The player can turn it on and off with the EXITS ON and EXITS OFF command. Its presence or absence may also be controlled programmatically by setting Exit Listing to enabled or disabled.
<p>
 The extension also provides an EXITS command that lists the available exits, together with their destinations if these have been visited. The first time the EXITS command is used, the EXITS ON and EXITS OFF commands are explained.
<p>
 Any room may optionally be given a destination name property. If we defined a destination room property for a room, it will be used in place of the printed name property when the room is shown as the destination of an exit in response to an EXITS command. This can result in better looking output, e.g.:
<p>
 The obvious exits are north to the garden and east to the path.
<p>
 Instead of:
<p>
 The obvious exits are north to Garden and east to Path.
<p>
 Section: Alternative Status Lines
<p>
 The table used to construct the status line when exit listing is on is held in the global variable status exit table. This allows us to use the exit lister with a different status line layout if we wish. For example, we might define:
<p>
<blockquote><font color="#000080"> Table of New Exit Status</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> left</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> central</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> right</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; [left hand status line]&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[right hand status line]&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; Explored: [number of visited rooms]/[number of rooms]&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;Turn count:[turn count]&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot; [exit list]&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;&quot;</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;&quot;</font></font></td></tr></table></blockquote>
<p>
 And we could then use this table instead of the one defined in this extension by using the command:
<p>
<blockquote><font color="#000080"> now status exit table is Table of New Exit Status.</font></blockquote>
<p>
 Section: Listing Exits Programmatically - A Smart Cant Go
<p>
 The available exits can be listed using the command:<blockquote><font color="#000080"> list the exits</font></blockquote>
<p>
 This could be used to provide a &quot;smart cant go&quot; response, such as:
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> Instead of going nowhere:<br> say &quot;You can't go that way. &quot;;<br> list the exits.</font></blockquote>
<p>
 You can also use &quot;[list the exits]&quot; as a to say phrase, for example:
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> Instead of going nowhere:<br> say &quot;You can't go that way. [list the exits]&quot;;</font></blockquote>
<p>
 Chapter: Showing Unvisited Rooms
<p>
 Section: The Standard Behaviour
<p>
 In a Z-Code game, exits leading to an unvisited room can be indicated in a different colour. In a Glulx game they can be shown in capitals. In both Z-Code and Glulx games, they can be shown preceded and followed by a marker character (either =, -, + or *). By default, unvisited exits are shown in red in a Z-Code game and in capitals in a Glulx game.
<p>
 The command EXIT COLOUR or EXIT COLOR is provided to allow players to cycle through the options to find the one that best suits their interpreter and their preferences. In a Z-Code game the colours of unvisited exits will cycle between red, yellow, blue, green and none (i.e. the default colour, usually white). In a Glulx game unvisited exits will toggle between upper and lower case.
<p>
 In both Z-Code and Glulx games the command EXIT SYMBOL can be used to cycle the symbols between =, -, *, + and none. This may be useful for a player using a Z-Code interpreter (such as Gargolye) that doesn't have the capability to change colours.
<p>
 Section: Customization
<p>
 By default this marking of unvisited exits is enabled at the start of a Z-Code game. If you do not want this you can disable it when play begins:
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; now indicate-unvisited is dont-show-unvisited;</font></blockquote>
<p>
 Conversely, you can enable this feature under programatic control with the command:
<p>
<blockquote><font color="#000080"> now indicate-unvisited is show-unvisited;</font></blockquote>
<p>
 You can also change the colour (in Z-Code) by changing the value of the exit-colour-num variable according to the following table:
<p>
<blockquote><font color="#000080"> Table</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> exit-colour-num</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> Z-Code Colour</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> 1</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> red</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> 2</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> yellow</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> 3</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> blue</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> 4</font>&nbsp;&nbsp;&nbsp;&nbsp;</font></td><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> green</font></font></td></tr></table></blockquote>
<p>
 Finally, you can change the marker symbol to anything you like by changing the exit-marker variable; e.g.:
<p>
<blockquote><font color="#000080"> now exit-marker is &quot;?&quot;.</font></blockquote>
<p>
 Of course, unless you disable the EXIT SYMBOL command, the player will still be able to change your choice of symbol.
<p>
 You can also extend the range of symbols on offer by continuing the Table of Exit Symbols, e.g.
<p>
<blockquote><font color="#000080"> Table of Exit Symbols (continued)</font><br><table border="0" cellspacing="0" cellpadding="0"><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> exit-symbol</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;!&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;~&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;[unicode 166]&quot;</font></td></tr><tr><td align="left" valign="top"><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><font color="#000080"> &quot;%&quot;</font></font></td></tr></table></blockquote>
<p>
 Chapter: Hiding or Showing Exits
<p>
 Section: Apparent or Not Apparent
<p>
 Doors can be apparent or not apparent. In some cases you may not want an exit shown in the exit lister because the player is not yet meant to know that an exit exists in that direction (for example, if a bookcase is in fact a secret door). In such a case you can declare the door through which the secret exit leads as not apparent. Once the player has discovered the secret exit you can make the door apparent, and then the exit will show up in the lister.
<p>
 Rooms can also be apparent on not apparent. By default every room is apparent, but if for some reason we do not want the exits leading to a room to show up in the exit lister, we can make that room not apparent. If we want the same room to be apparent from some locations but not others, then we need to create some mechanism to switch the room between apparent and not apparent depending on the location of the player or other circumstances, perhaps in a before going or every turn rule, e.g.:
<p>
<blockquote><font color="#000080"> Every turn:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the location is the Short Path, now the Sunken Garden is apparent;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise now the Sunken Garden is not apparent.</font></blockquote>
<p>
 Section: Listing or Hiding Exits in the Dark
<p>
 If the player character is in a dark room we may not want the player to see any of the exits leading to other unlit rooms: the Exit Lister could potentially give too much information away in cases where the game text is telling us &quot;It is pitch darkness and you can't see a thing&quot; but the Status Line Exit Lister (and the EXITS commands) nevertheless lists all the exits leading from this pitch dark location. By default Exit Lister therefore suppresses the listing of directions that would lead to unlit locations when the player character is in a darkness. In this context &quot;unlit&quot; means a room that is not only dark itself but also contains no visible light source.
<p>
 To change this behaviour we can simply set the value of the truth state variable dark-exits-invisible to false. When dark-exits-invisible is false all exits are listed (provided they are apparent) regardless of the state of the lighting. This is illustrated further in Example B.
<p>
 We might also want to prevent travel to an unlit room from a dark location on the grounds that the player character can't see where he's going. To do this we can take advantage of the fact that Exit Lister defines the adjective darkness-occluded to refer to unlit rooms adjacent to a room where the player character is in darkness. To prevent dark-to-dark travel without giving anything away we could thus use something like:
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> Instead of going nowhere when in darkness: say can't see way in dark.<br> Instead of going to a darkness-occluded room: say can't see way in dark.<br> To say can't see way in dark: say &quot;It's too dark to see where you're going.&quot;</font></blockquote>
<p>
 This is also illustrated in Example B below.
<p>
 Chapter: Customizing No Exit Messages
<p>
 We can also customize what is displayed when there are no exits from a particular location. By default the status line exit lister will show &quot;None&quot; and the exits listed in response to an EXIT command will say &quot;There are no obvious exits.&quot; We can change these if we like by providing our own definition of the phrases:
<p>
<blockquote><font color="#000080"> To say no-exits:<br> To say no-obvious-exits:</font></blockquote>
<p>
 For example:
<p>
<blockquote><font color="#000080"> A room can be mapworthy or not mapworthy. A room is usually mapworthy.</font></blockquote>
<p>
<blockquote><font color="#000080"> To say no-exits:<br> if the location is mapworthy, say &quot;None&quot;;<br> otherwise say &quot;Unclear&quot;;</font></blockquote>
<p>
<blockquote><font color="#000080"> To say no-obvious-exits:<br> if the location is mapworthy, say &quot;There are no obvious exits.&quot;;<br> otherwise say &quot;It's unclear where the exits are.&quot;</font></blockquote>
<p>
 Example: * A Walk in the Woods - A brief exit lister example
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;A Walk in the Woods&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Exit Lister by Eric Eve.</font></blockquote>
<p>
<blockquote><font color="#000080"> Use full-length room descriptions.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going nowhere:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You can't go that way. &quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; list the exits.</font></blockquote>
<p>
<blockquote><font color="#000080"> A fixture is a kind of thing. A fixture is usually scenery. A fixture is always fixed in place.</font></blockquote>
<p>
<blockquote><font color="#000080"> A thing can be near or distant. A thing is usually near.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of doing anything except examining with a distant thing (called the remote), say &quot;[The remote] is too far away.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The Junction of Paths is a room. &quot;Here the long north-south path running through the fields meets a narrow lane disappearing of into a dark wood to the east. A little way ahead to the north lies a low hill.&quot; The destination name is &quot;the path junction&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going south in the Junction of Paths, say &quot;You've just come from there, and you don't fancy going back.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The overgrown fields are a fixture in the Junction of Paths. The description is &quot;They look rather overgrown - too overgrown to be readily walked over.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The low hill is a distant fixture in the Junction of Paths. The description is &quot;It's just a short way up ahead and doesn't look too difficult to climb.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The dark wood is a distant fixture in the Junction of Paths. The description is &quot;It looks pretty dense from here, but the lane running into it looks passable enough.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of entering the wood, try going east.</font></blockquote>
<p>
<blockquote><font color="#000080"> Heart of the Wood is east of Junction of Paths. &quot;Here the lane from the west forks to northeast and southeast.&quot; The destination name is &quot;the heart of the wood&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> River Bank is southeast of Heart of the Wood. &quot;The path from the northwest comes to the end on the bank of a broad river. You could walk along the bank to the north.&quot; The destination name is &quot;the riverbank&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Clearing is north of River Bank and northeast of Heart of the Wood. &quot;A river flows sluggishly through the middle of the clearing, while paths lead south along the river bank and southwest into the wood.&quot; The destination name is &quot;the clearing&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> The sluggish river is a backdrop. The sluggish river is in the Clearing and the River Bank. The description is &quot;It looks far too wide to cross.&quot; Understand &quot;wide&quot; as the river.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Hilltop is north of the Junction of Paths. &quot;From the top of the hill you can see a long path running through the fields to the south. On the other side of the hill to the north is an evil-looking marsh.&quot; The destination name is &quot;the top of the hill&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going north in the Hilltop, say &quot;You really don't like the look of that marsh to the north.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The evil-looking marsh is a distant fixture in the Hilltop. The description is &quot;You don't like the look of it at all - from where you stand there seems to be no safe way through.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;w/n/n/x marsh/s/x hill/s/w/e/exits/ne/s/s/nw/e/w&quot;.</font></blockquote>
<p>
 You can run the above test, but it won't really show what's happening in the status line lister, so you might do better to enter the commands manually one at at a time.
<p>
 Example: * Exploring the Dark - Hiding and Showing Dark Exits
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Exploring the Dark&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Exit Lister by Eric Eve.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Secluded Grove is a room. &quot;You stand just outside the mouth of a dark cave to the east.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The blazing torch is in the Secluded Grove. It is lit.</font></blockquote>
<p>
<blockquote><font color="#000080"> The Dark Cave is east of Secluded Grove.<br> &quot;The main exit is to the east. Other exits lead north and south.&quot;<br> It is dark.</font></blockquote>
<p>
<blockquote><font color="#000080"> Narrow Crawl is north of Dark Cave. &quot;This seems to be a dead end. The only way out is back south.&quot; It is dark.</font></blockquote>
<p>
<blockquote><font color="#000080"> Long Tunnel is south of Dark Cave. &quot;The tunnel comes to a dead end. The only way out is back north.&quot; It is dark.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of thinking:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You have a [if dark-exits-invisible is true]bright[otherwise]dim[end if] idea, as a result of which you [if dark-exits-invisible is true]can[otherwise]can't[end if] now see darkened exits.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; now dark-exits-invisible is whether or not dark-exits-invisible is false.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going nowhere when in darkness: say can't see way in dark.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going to a darkness-occluded room: say can't see way in dark.</font></blockquote>
<p>
<blockquote><font color="#000080"> To say can't see way in dark: say &quot;It's too dark to see where you're going.&quot;</font></blockquote>
<p>
 There's little point including a &quot;test me&quot; script for this example, since it would run too fast for us to see the changes to the status line. We can try exploring the caves with or without the torch, and with or without issuing a THINK command to see the effect.
<p>

<p>
<p></body></html>