<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"></td></tr></table><p><img border=0 src=../../doc_images/paste.png>&nbsp;<b>Exit Lister<font color="#404040"> by </font>Gavin Lambert</b><p><small></small><p><p><hr><p>
<p>
 Chapter: About
<p>
 This extension is based on Exit Lister by Andre Kosmos. I've tried to keep the author-facing interface compatible while reworking the internal design and adding some extra features.
<p>
 This gives you a list of available exits at the end of the room description. There are options to mention doors that are in your way, to mention rooms you have already visited, and how much info to reveal in dark rooms.
<p>
 For suggestions and feedback, Gavin Lambert can be contacted via &quot;http://www.mirality.co.nz/&quot; or via GitHub.
<p>
 Chapter: Reference
<p>
 Section: New commands
<p>
... for the player
<p>
<blockquote><font color="#000080"> 'EXITS' ------- this gives a list of the available exits.<br> 'EXITS ON' ---- after this command there will be a list of available exits at the end of the room description. (default setting)<br> 'EXITS OFF' --- after this command the list of exits will no longer appear at the end of the room description.</font></blockquote>
<p>
... for the author: (note: these are phrases, and must appear inside a rule; eg. &quot;when play begins&quot;)
<p>
<blockquote><font color="#000080"> 'mention doors'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command the exit lister will mention if there is a door in the way of an exit. (default setting)</font></blockquote>
<p>
<blockquote><font color="#000080"> 'don't mention doors'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command doors will no longer be mentioned in the exit list.</font></blockquote>
<p>
<blockquote><font color="#000080"> 'mention visited rooms'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command exits leading to a visited room will mention this room. (default setting)</font></blockquote>
<p>
<blockquote><font color="#000080"> 'don't mention visited rooms'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command exits leading to a visited room will no longer mention this room.</font></blockquote>
<p>
<blockquote><font color="#000080"> 'mention visited rooms in darkness'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command exits leading to a visited room will still be mentioned when in darkness. (default setting)</font></blockquote>
<p>
<blockquote><font color="#000080"> 'don't mention visited rooms in darkness'<br>&nbsp;&nbsp;&nbsp;&nbsp; after this command no exits will be mentioned when in darkness.</font></blockquote>
<p>
 Section: Properties and Text
<p>
 Doors have a new property called passing text. The default is &quot;through&quot;. Some suggestions for other types of doors are: &quot;over&quot; for bridges, &quot;climbing&quot; for ropes and ladders.<blockquote><font color="#000080"> The passing text for the Wooden Bridge is &quot;over&quot;.</font></blockquote>
<p>
 Doors have a new property called closed text. The default is &quot;[closed door]&quot;, to make it use the common definition from previous versions of this extension, described below. This can be overridden on a case by case basis, eg:<blockquote><font color="#000080"> The closed text for the brown door is &quot;(barred)&quot;.</font></blockquote>
<p>
 If the closed text for a door is not defined, closed doors are mentioned with the text &quot;(closed)&quot; by default, but you can write your own text with:<blockquote><font color="#000080"> To say closed door: say &quot;(tightly shut)&quot;.</font></blockquote>
<p>
 If you don't want to mention the fact that doors are closed (unless you've defined a &quot;closed text&quot; for it) you can use:<blockquote><font color="#000080"> To say closed door: do nothing instead.</font></blockquote>
<p>
 You can also change the text shown when no obvious exits are visible (which doesn't necessarily mean no exits are present; note that as this is a phrase, it must appear inside a rule -- typically &quot;when play begins&quot;.) In previous versions of this extension, this was done with the rule &quot;To say no obvious exits, say ...&quot; instead, but this method is more in the spirit of the new rule-response system in Inform:<blockquote><font color="#000080"> now the standard exit listing rule response (A) is &quot;There doesn't seem to be anywhere that you can go.&quot;</font></blockquote>
<p>
 In addition, you can override the normal description by using the &quot;listing exits&quot; activity. For example:<blockquote><font color="#000080"> Rule for listing exits when the location is Fog Bank: say &quot;It's too foggy to see the exits.&quot;</font></blockquote>
<p>
 Doors can be made &quot;not obvious&quot;. This will cause them to be hidden from exit listings (and they will stay that way even after use unless you later mark them as &quot;obvious&quot;).<blockquote><font color="#000080"> Hidden Trapdoor is a door. It is not obvious.</font></blockquote>
<p>
 Section: Advanced
<p>
 For more complicated cases, you can also define a rule:<blockquote><font color="#000080"> A door obviousness rule for the Concealed Trapdoor:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the Secret Passage is not visited, rule fails.</font></blockquote>
<p>
 This also works for exits, by checking against where they go to:<blockquote><font color="#000080"> An exit obviousness rule for the Hidden Chamber:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the Hidden Chamber is not visited, rule fails.</font></blockquote>
<p>
 Note that it is best to only use &quot;rule fails&quot; and &quot;make no decision&quot; -- this permits other rules (such as the standard &quot;darkness hides exits rule&quot;) to also hide the door/exit.
<p>
 You can also decide on a room-by-room basis (the destination room) whether you want to tell the player the destination of the exit or not. The default rule is to only show the destination if the player has been there before (&quot;visited&quot;), but for example if there's a glass door between the two locations then it may be reasonable for the player to know what's on the other side regardless (you can check &quot;the location&quot; to see where they are now). Conversely in a maze you may not want the player to know which rooms they've been to already:
<p>
<blockquote><font color="#000080"> A room memory rule for the Garden:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the location is the Conservatory, rule succeeds;<br> A room memory rule for Inside the Well:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the well cover is open, rule succeeds;<br> A room memory rule:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the location is mazelike, rule fails.</font></blockquote>
<p>
 Also, while it's a little odd, you can choose to completely avoid describing specific exits like so (this will still display the direction, but won't display the name of the door or where it leads to):<blockquote><font color="#000080"> After printing the name of east while listing exits:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the location is the Garden, do nothing instead.</font></blockquote>
<p>
 The standard &quot;mention / don't mention visited rooms in darkness&quot; controls let you decide if you want to tell the player the way to get out (ie. the way they came in) while hiding other paths (although bear in mind that by default Inform doesn't stop them actually using those other paths), or whether you want to hide all the exits and report that there are no obvious exits. Note that only the room's visited flag is checked; in the Test Game example, the path up out of darkness to the Main Road is listed because the player has been to the Main Road, even though they haven't used that specific exit before.
<p>
 In addition, there are a couple of other potentially useful alternatives. One is to use a technique shown above to hide the message entirely (or to display a different message from normal):<blockquote><font color="#000080"> Rule for listing exits while in darkness: do nothing instead.</font></blockquote>
<p>
 Another is to remove darkness handling entirely and to show all exits. This breaks realism, so probably won't be common, but the option is there:<blockquote><font color="#000080"> The darkness hides exits rule is not listed in any rulebook.</font></blockquote>
<p>
 One final option would be to override all normal handling (including testing for darkness) for a single exit -- perhaps you have a self-lit door (or with light seeping through the cracks), giving enough light to see the door but not its surroundings:<blockquote><font color="#000080"> A door obviousness rule for the Glowing Door:<br>&nbsp;&nbsp;&nbsp;&nbsp; rule succeeds.</font></blockquote>
<p>
 There are a few more things that you can tweak if you delve into the innards of the extension, but I couldn't come up with a compelling example for when you'd want to. If you do come up with something, let me know and I'll add it to the list!
<p>
 Chapter: Integration
<p>
 If the &quot;Secret Doors by Andrew Owen&quot; (or its update, &quot;Secret Doors by Gavin Lambert&quot;) extension is in use (this is optional), then an unrevealed secret door is automatically unobvious as well.
<p>
 Chapter: Change Log
<p>
 Section: Changes from version 2 to version 4
<p>
 Updated various phrases for 6L02 compatibility, after some prompting by Joey Cramsey.
<p>
 Replaced &quot;To say no obvious exits&quot; with &quot;the standard exit listing rule response (A)&quot;. (Response (B) is also editable, but that seems less useful as it's already pretty flexible.)
<p>
 Added room memory rulebook to allow further customisation.
<p>
 Skipped version 3 because Mark Harviston used that version number in the Friends of i7 repo (since I didn't republish this quickly enough); this version ignores and supersedes those changes.
<p>
 Section: Changes from version 1 to version 2
<p>
 Replaced &quot;object-based-rulebook&quot; with &quot;object-based rulebook&quot;, which seems to make recent versions of I7 happier.
<p>
 Replaced custom &quot;yes_no_flag&quot; variable kind with the built-in &quot;truth state&quot; (added in 5G67), to reduce clutter.
<p>
 Added &quot;closed text&quot; property to doors.
<p>
 When printing the names of exit destinations, the definite article is used (if you've used any article when defining the place in your source text).
<p>
 Example: * Test Game for Exit Lister - Lots of interesting rooms and doors to explore.
<p>
 This example asks the player up front what they want to see in the exit list, in order to better demonstrate the options. Normally, though, these will be fixed by the author, although if you want you can define additional commands to let the player change them at will.
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Test Game for Exit Lister&quot; by Gavin Lambert.<br> After printing the banner text: say &quot;Based on the test game by Andre Kosmos.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Exit Lister by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> Hallway is a room. &quot;This hallway is decorated with the simplest wallpaper you have ever seen. There are no pictures, or plates with wise words, nor tiles with proverbs hanging on any of the walls. The only thing you notice is that all the doors are painted in different colors.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The pink door is east of hallway and west of Bathroom. It is a door and scenery.<br> The description of the bathroom is &quot;Everything in here is pink. The tiles on the walls, the toilet bowl, the bathtub, the floor, and even the ceiling. The only thing not pink is a large mirror on the wall, but since all it reflects is pink that hardly matters.&quot;.<br> A large mirror is scenery in bathroom. Instead of examining mirror, say &quot;Don't be vain, you look fine.&quot;. Rule for listing exits when the location is Bathroom: say &quot;All this pink numbs your brain, and you can't remember how you got here.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The brown door is west of hallway and east of the Living Room. It is a door and scenery. The closed text of the brown door is &quot;(barred)&quot;.<br> The description of the living room is &quot;You are in a well decorated room here, there are numerous pictures on the walls, some comfy looking chairs, and a big television set.&quot;<br> Before opening the brown door for the first time, say &quot;Despite the bars, the door opens surprisingly easily.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The green door is south of hallway and north of Garden. It is a door and scenery.<br> The description of garden is &quot;A large garden with very short cut grass, and various flowerbeds. The main thing you notice is a large oak tree. From between the leaves of the trees you see a rope ladder hanging down to the ground. The ladder is dug into the ground to keep it from swinging too much when you climb it.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The rope ladder is up from garden and down from the Tree house. It is a open unopenable door and scenery.<br> The passing text of rope ladder is &quot;climbing&quot;.<br> Instead of climbing the rope ladder in tree house, try going down.<br> Instead of climbing the rope ladder in garden, try going up.</font></blockquote>
<p>
<blockquote><font color="#000080"> The description of the tree house is &quot;A rather untraditional tree house, the walls are decorated with a rather ugly wallpaper with pink and purple flowers, and a thick red carpet covers the floor.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> A wooden bridge is east of garden and west of the Main Street. It is an open unopenable door and scenery. The passing text of the wooden bridge is &quot;over&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> The description of the main street is &quot;This is the main street, from here you could go to town to see a movie, visit a pub, or something. If only the author of this game wasn't too lazy to write those pleasant locations in. Ah well... maybe next version.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> West End of Tunnel is down from the garden. &quot;The western end of a small tunnel running under the river.&quot; It is dark.<br> East End of Tunnel is down from Main Street. &quot;The eastern end of a small tunnel running under the river.&quot; It is dark.<br> East of West End of Tunnel is East End of Tunnel.</font></blockquote>
<p>
<blockquote><font color="#000080"> A light stick is in Main Street. &quot;A feebly-glowing light stick lies discarded nearby.&quot; It is lit.</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Do you want a list of possible exits at the end of the room description?&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if player consents, try turning exits on;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise try turning exits off;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[paragraph break]You can always turn the exit list on or off with the commands EXITS ON and EXITS OFF. You can also always ask for an exit list with the command EXITS.[paragraph break]Do you want the exit lister to mention locations you have already visited?&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if player consents, mention visited rooms;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise don't mention visited rooms;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[paragraph break]Sometimes the exit list can tell you that you can go north, but when you try to the game tells you that You can't, since some door is in the way. [paragraph break]Do you want to mention those doors in the exit list?&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if player consents, mention doors;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise don't mention doors;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[paragraph break]Do you want the exit lister to still mention visited rooms even in darkness?&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if player consents, mention visited rooms in darkness;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise don't mention visited rooms in darkness;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[paragraph break]&quot;.</font></blockquote>
<p>
<blockquote><font color="#000080"> test me with &quot;open green door / s / e / w / u / d / d / e / u / get stick / d / w&quot;</font></blockquote>
<p>
 Example: * Simple Cave with Secret Door and Lever, plus Exit Listing - Secret Doors example plus Exit Listing
<p>
 For ease of testing the different behaviour, this example also asks the player whether they want to see exits listed when play begins; normally this can just be left to the default.
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Secret Cave Passage with Listed Exits&quot; by Gavin Lambert</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Secret Doors by Gavin Lambert.<br> Include Exit Lister by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> Big Cave is a room. &quot;You're not sure how you ended up here, but you're surrounded on all sides by slightly damp rock.  Fortunately the walls seem to contain faintly glowing moss, so there's enough light to see by.&quot;<br> The faintly glowing moss is scenery in the Big Cave. &quot;It glows just barely enough to make out your surroundings.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Secret Passage is a room. &quot;For being so close to a cave, this passage is surprisingly well built and is lit by standard electrical bulbs.  Unfortunately it also appears to be blocked by rubble not too far from the entrance; you can't seem to proceed any further.&quot;<br> The rubble is scenery in the Secret Passage. &quot;It looks completely impassable.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The passage door is an unopenable secret door. &quot;It's fairly unassuming.  You'd never have known it was there until it opened.&quot;<br> It is west of the Big Cave and east of the Secret Passage.</font></blockquote>
<p>
<blockquote><font color="#000080"> The hidden lever is a secret switch in the Big Cave. &quot;Nestled almost invisibly between two rocks in the cave wall.  [if the passage door is revealed]It has been pulled downwards.[otherwise]It points invitingly upwards.[end if]&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The cave wall is scenery in the Big Cave. &quot;Nothing else more interesting presents itself.  Just more glowing moss.&quot;<br> Understand &quot;damp rock&quot; or &quot;rock&quot; as the cave wall.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of searching or examining the cave wall for the first time:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the lever is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;As you examine the cave wall, in a gap between two rocks you discover a lever.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of pulling or pushing the revealed lever:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the passage door is revealed:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You don't have any desire to close the passage again.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is open;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;A secret door opens with a rumble, revealing a secret passage in the west wall!&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> When play begins:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;Do you want a list of possible exits at the end of the room description?&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; if player consents, try turning exits on;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise try turning exits off;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[paragraph break]You can always turn the exit list on or off with the commands EXITS ON and EXITS OFF. You can also always ask for an exit list with the command EXITS.[paragraph break]&quot;;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;w / x door / pull lever / x wall / pull lever / w&quot;</font></blockquote>
<p>

<p>
<p></body></html>