<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"></td></tr></table><p><img border=0 src=../../doc_images/paste.png>&nbsp;<b>Secret Doors<font color="#404040"> by </font>Gavin Lambert</b><p><small></small><p><p><hr><p>
<p>
 Secret Doors is an extension which provides robust support for hidden doors and hidden switches. It was originally written by Andrew Owen, but has had minor changes in order to make it compatible with Inform 7 build 6L02.
<p>
 Version 2 adds a fix that allows &quot;going nowhere&quot; rules to apply to unrevealed secret doors as well.
<p>
 It creates two new kinds: &quot;secret door&quot; (a kind of door) and &quot;secret switch&quot; (a kind of thing) with the properties &quot;revealed&quot; or &quot;unrevealed&quot;.
<p>
<blockquote><font color="#000080"> The passage door is a secret door.<br> The passage door is west of the Big Cave and east of the Secret Passage.</font></blockquote>
<p>
<blockquote><font color="#000080"> The hidden lever is a secret switch in the Big Cave.</font></blockquote>
<p>
 If the player attempts to walk through a secret door, the same response to attempting to travel in a non-existent direction is given:
<p>
<blockquote><font color="#000080"> &gt;west<br> You can't go that way.</font></blockquote>
<p>
 If the player attempts to interact with a secret switch, the same response to attempting to interact with a non-existent object is given:
<p>
<blockquote><font color="#000080"> &gt;pull lever<br> You can't see any such thing!</font></blockquote>
<p>
<blockquote><font color="#000080"> &gt;throw rock at lever<br> You can't see any such thing!</font></blockquote>
<p>
 It might be that we want the switch to be in plain sight. In that case it should be defined as a normal object rather than a secret switch:
<p>
<blockquote><font color="#000080"> The lever is fixed in place in the Big Cave.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of pulling the lever for the first time:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is open;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;As you pull the lever, a secret door opens, revealing a secret
passage!&quot;</font></blockquote>
<p>
 If on the other hand we want the switch to be hidden as well, then we need a way of revealing it so that it can be used. For example:
<p>
<blockquote><font color="#000080"> The lever is a secret switch in the Big Cave.</font></blockquote>
<p>
<blockquote><font color="#000080"> The cave wall is scenery in the Big Cave.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of searching or examining the cave wall:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the lever is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;In a gap between two rocks you discover a lever.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of pulling the revealed lever for the first time:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is open;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;As you pull the lever, a secret door opens, revealing a secret
passage!&quot;</font></blockquote>
<p>
 WARNING: it's important to say &quot;the revealed lever&quot;, not simply &quot;the lever&quot;. Otherwise attempts to pull the lever when it is not yet revealed will be counted, and &quot;the first time&quot; will no longer be true, resulting in a broken story.
<p>
 Note that secret doors and switches are defined as scenery by default (which is why it's not necessary to define a secret switch as fixed in place). You can override this on a case-by-case basis if you wish.
<p>
 Also note that by default secret doors behave like regular doors once revealed, which means that the player can open and close them as normal. If you want to have the door open exclusively through some story-provided mechanism, then remember to define them as &quot;unopenable&quot; -- this doesn't stop the story from opening the door, but it stops the player from doing so.
<p>
 Example: * Simple Cave with Secret Door and Lever - This defines a simple two-room example similar to the above.
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Secret Cave Passage&quot; by Gavin Lambert</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Secret Doors by Gavin Lambert.</font></blockquote>
<p>
<blockquote><font color="#000080"> Big Cave is a room. &quot;You're not sure how you ended up here, but you're surrounded on all sides by slightly damp rock.  Fortunately the walls seem to contain faintly glowing moss, so there's enough light to see by.&quot;<br> The faintly glowing moss is scenery in the Big Cave. &quot;It glows just barely enough to make out your surroundings.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Secret Passage is a room. &quot;For being so close to a cave, this passage is surprisingly well built and is lit by standard electrical bulbs.  Unfortunately it also appears to be blocked by rubble not too far from the entrance; you can't seem to proceed any further.&quot;<br> The rubble is scenery in the Secret Passage. &quot;It looks completely impassable.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The passage door is an unopenable secret door. &quot;It's fairly unassuming.  You'd never have known it was there until it opened.&quot;<br> It is west of the Big Cave and east of the Secret Passage.</font></blockquote>
<p>
<blockquote><font color="#000080"> The hidden lever is a secret switch in the Big Cave. &quot;Nestled almost invisibly between two rocks in the cave wall.  [if the passage door is revealed]It has been pulled downwards.[otherwise]It points invitingly upwards.[end if]&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> The cave wall is scenery in the Big Cave. &quot;Nothing else more interesting presents itself.  Just more glowing moss.&quot;<br> Understand &quot;damp rock&quot; or &quot;rock&quot; as the cave wall.</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of going nowhere from the Big Cave:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;The cave walls seem completely intact in that direction.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of searching or examining the cave wall for the first time:<br>&nbsp;&nbsp;&nbsp;&nbsp; now the lever is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;As you examine the cave wall, in a gap between two rocks you discover a lever.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Instead of pulling or pushing the revealed lever:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the passage door is revealed:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You don't have any desire to close the passage again.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; otherwise:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is revealed;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; now the passage door is open;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;A secret door opens with a rumble, revealing a secret passage in the west wall!&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;w / open door / pull lever / x wall / x lever / pull lever / x lever / w&quot;</font></blockquote>
<p>

<p>
<p></body></html>