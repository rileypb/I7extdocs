<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Extension</title><script type="text/javascript">	function showExtra(id, imid) {		if (document.getElementById(id).style.display == 'block') {			document.getElementById(id).style.display = 'none';			document.getElementById(imid).src = 'inform:/extra.png';		} else {			document.getElementById(id).style.display = 'block';			document.getElementById(imid).src = 'inform:/extraclose.png';		}	}    function openExtra(id, imid) {    	document.getElementById(id).style.display = 'block';    	document.getElementById(imid).src = 'inform:/extraclose.png';    }    function closeExtra(id, imid) {    	document.getElementById(id).style.display = 'none';    	document.getElementById(imid).src = 'inform:/extra.png';    }</script></head><STYLE TYPE="text/css"><!--*, *:before, *:after {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.oval, .oval TD{background-image:url('../../doc_images/ovoid.png');color:white;}--></STYLE><body><script language="JavaScript">function pasteCode(code) {    var myProject = window.Project;    myProject.selectView('source');    myProject.pasteCode(code);}</script><font face="lucida grande,geneva,arial,tahoma,verdana,helvetica,helv" size=2><table CELLPADDING=0 CELLSPACING=0 width="100%" bgcolor="#000000"><tr><TD width=38px height=26px align="center" valign="center"></td><TD width=38px height=26px align="center" valign="center"></td><td halign="left" valign="center" CELLPADDING=0 CELLSPACING=0></td><TD width=56px height=26px align="right" valign="center"></td></tr></table><p><img border=0 src=../../doc_images/paste.png>&nbsp;<b>Object Matching<font color="#404040"> by </font>Xavid</b><p><small></small><p><p><hr><p>
<p>
 This extension provides support for getting the matched object when matching a snippet against a pattern and for disabling clarification when a command or snippet is ambiguous.
<p>
 Disambiguation Override by Mike Ciul provides similar functionality with more options, however, it doesn't seem compatible with recent Inform 7.
<p>
 Chapter 1 - Object Matching
<p>
 This extension provides one main construct. You can use &quot;if (snippet) object-matches (topic)&quot; in the same way as you use the standard Inform &quot;if (snippet) matches (topic)&quot;. The difference is that, if the condition is true, the following code can refer to &quot;the matched object&quot;. For example,
<p>
<blockquote><font color="#000080"> if S object-matches &quot;[any thing]&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You sense that that is in [the location of the matched object].&quot;</font></blockquote>
<p>
 This is mainly useful for making overly-clever error messages without affecting the parsing of normal commands; for non-error situations you're probably better off using normal understand-based parsing.
<p>
 Chapter 2 - Disabling Clarification
<p>
 This extension internally disables clarification while object-matching both because it doesn't make sense and also because it doesn't work and crashes the interpreter. If the snippet matches more than one thing equally well, Inform will pick one arbitrarily instead of asking for clarification.
<p>
 If you want to disable clarification in some other situation, you can do so with:
<p>
<blockquote><font color="#000080"> Now disable clarification is true.</font></blockquote>
<p>
 Note that this will last until you do &quot;now disable clarification is false&quot;.
<p>
 Chapter 3 - Bugs and Comments
<p>
 This extension is hosted in Github at https://github.com/i7/extensions/tree/master/Xavid. Feel free to email me at extensions@xavid.us with questions, comments, bug reports, suggestions, or improvements.
<p>
 Section 1 - Known Issues
<p>
 Something in the current multiple object list won't match as a &quot;[thing]&quot; or similar.
<p>
 Example: *** Psychic Examiner - Error messages with locations.
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Psychic Examiner&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Object Matching by Xavid.<br> Include Snippetage by Dave Robinson.</font></blockquote>
<p>
<blockquote><font color="#000080"> Library is a room.</font></blockquote>
<p>
<blockquote><font color="#000080"> Study is south of Library.</font></blockquote>
<p>
<blockquote><font color="#000080"> A thing called a laser sword is here.</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for printing a parser error when the latest parser error is the can't see any such thing error:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the snippet at 2 of length (the command length - 1) object-matches &quot;[any thing]&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[regarding the matched object]You don't see [the matched object] here; your psychic intuition tells you that [it] is in the [location of the matched object].&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You can't see any such thing.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;x sword / x wombat / s / x sword&quot;.</font></blockquote>
<p>
 Example: ** Unit Tests
<p>
<blockquote><font color="#000080"><img border=0 src=../../doc_images/paste.png> &quot;Unit Tests&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Include Object Matching by Xavid.<br> Include Command Unit Testing by Xavid.<br> Include Snippetage by Dave Robinson.</font></blockquote>
<p>
<blockquote><font color="#000080"> Library is a room.</font></blockquote>
<p>
<blockquote><font color="#000080"> A thing called a red apple is here. A thing called a green apple is here.</font></blockquote>
<p>
<blockquote><font color="#000080"> Study is south of Library.</font></blockquote>
<p>
<blockquote><font color="#000080"> A thing called a laser sword is here.</font></blockquote>
<p>
<blockquote><font color="#000080"> Rule for printing a parser error when the latest parser error is the can't see any such thing error:<br>&nbsp;&nbsp;&nbsp;&nbsp; if the snippet at 2 of length (the command length - 1) object-matches &quot;[any thing]&quot;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;[regarding the matched object]You don't see [the matched object] here; your psychic intuition tells you that [it] is in the [location of the matched object].&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; else:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; say &quot;You can't see any such thing.&quot;</font></blockquote>
<p>
<blockquote><font color="#000080"> Unit test:<br>&nbsp;&nbsp;&nbsp;&nbsp; start test &quot;successful match&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; assert that &quot;x sword&quot; produces &quot;You don't see the laser sword here; your psychic intuition tells you that it is in the Study.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; do &quot;s&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; assert that &quot;x sword&quot; produces &quot;You see nothing special about the laser sword.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; start test &quot;failure to match&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; assert that &quot;x wombat&quot; produces &quot;You can't see any such thing.&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; start test &quot;ambiguous match&quot;;<br>&nbsp;&nbsp;&nbsp;&nbsp; assert that &quot;x apple&quot; produces &quot;You don't see the red apple here; your psychic intuition tells you that it is in the Library.&quot;;</font></blockquote>
<p>
<blockquote><font color="#000080"> Test me with &quot;unit&quot;.</font></blockquote>
<p>

<p>
<p></body></html>